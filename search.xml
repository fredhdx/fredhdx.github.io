<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[使用Python多线程爬虫获取B站UP主视频信息]]></title>
      <url>/multiprocessScrape/</url>
      <content type="html"><![CDATA[<p>使用Python获取指定B站UP主所有上传视频; 使用Python自带或第三方多任务插件进行加速 <a id="more"></a></p>
<p>使用Python多线程爬虫获取B站UP主视频信息</p>
<p>使用Python多线程爬虫获取B站UP主视频信息</p>
<h1 id="目标">目标</h1>
<p>使用Python获取指定B站UP主所有上传视频</p>
<p>使用Python自带或第三方多任务插件进行加速</p>
<h1 id="需要的库">需要的库</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">import</span> psutil</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</div><div class="line"><span class="keyword">import</span> multiprocessing</div><div class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> cpu_count</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> time</div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> DataFrame</div><div class="line"><span class="keyword">import</span> gevent.monkey</div><div class="line"></div><div class="line"><span class="keyword">import</span> gevent.pool <span class="keyword">as</span> gpool</div></pre></td></tr></table></figure>
<h1 id="基础例子单线程">基础例子(单线程)</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># UP主id: 如https://space.bilibili.com/14781644中，14781644为mid</span></div><div class="line">mid = <span class="number">14781644</span></div><div class="line"></div><div class="line"><span class="comment"># API: 此API返回json格式，含有当前页面的所有上传视频信息</span></div><div class="line">url = <span class="string">"https://space.bilibili.com/ajax/member/getSubmitVideos?mid=%s&amp;pagesize=30&amp;tid=0&amp;page=%s&amp;keyword=&amp;order=pubdate"</span> % (mid, page)</div><div class="line"></div><div class="line"><span class="comment"># 通过一次request该API，获取所有页数的url</span></div><div class="line">API_list, itemNum = getListing(mid)</div><div class="line"></div><div class="line"><span class="comment"># 循环所有页面获得每个视频的信息</span></div><div class="line">Info = []</div><div class="line"><span class="keyword">for</span> page <span class="keyword">in</span> API_list:</div><div class="line">	Info.append(get_singlePage(page))</div></pre></td></tr></table></figure>
<p>其中</p>
<p><code>getListing</code>含有一次<code>requests.get</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_pageList</span><span class="params">(mid, headers)</span>:</span></div><div class="line">    <span class="string">''' input: (bilibili) mid</span></div><div class="line"><span class="string">        output: A list containing page urls for all submitted videos</span></div><div class="line"><span class="string">    '''</span></div><div class="line">    pageSize = <span class="number">30</span></div><div class="line">    API= (<span class="string">'https://space.bilibili.com/ajax/member/getSubmitVideos?mid=%s'</span> % str(mid)</div><div class="line">            + <span class="string">'&amp;pagesize=%s'</span> % str(pageSize) + <span class="string">'&amp;tid=0&amp;page=%s&amp;keyword=&amp;order=pubdate'</span> )</div><div class="line">    pageNum = <span class="number">0</span></div><div class="line">    itemNum = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="comment"># get pageNum</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        r = requests.get((API % <span class="string">'1'</span>), headers=headers)</div><div class="line">        <span class="keyword">if</span> r.status_code == <span class="number">200</span>:</div><div class="line">            json_content = r.json()</div><div class="line">            tlist = json_content[<span class="string">'data'</span>][<span class="string">'tlist'</span>]</div><div class="line">            <span class="keyword">for</span> tab <span class="keyword">in</span> tlist:</div><div class="line">                itemNum += int(tlist[tab][<span class="string">'count'</span>])</div><div class="line">            pageNum = int(itemNum/pageSize) + (itemNum % pageSize &gt; <span class="number">0</span>)</div><div class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</div><div class="line">        print(e)</div><div class="line">        sys.exit</div><div class="line"></div><div class="line">    <span class="comment"># get page list</span></div><div class="line">    API_list = [(API % str(page)) <span class="keyword">for</span> page <span class="keyword">in</span> range(<span class="number">1</span>, pageNum + <span class="number">1</span>)]</div><div class="line">    <span class="keyword">return</span> [API_list, itemNum]</div></pre></td></tr></table></figure>
<p><code>get_singlePage</code>含有一次<code>requests.get</code>, 返回<code>{&quot;视频名字&quot;, &quot;aid&quot;, &quot;url&quot;}</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_singlePage</span><span class="params">(params)</span>:</span></div><div class="line"></div><div class="line">    page_url, headers = params</div><div class="line"></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        r = requests.get(page_url, headers=headers)</div><div class="line">        json_content = r.json()</div><div class="line">        vlist = json_content[<span class="string">'data'</span>][<span class="string">'vlist'</span>]</div><div class="line">        records = []</div><div class="line">        <span class="keyword">for</span> video <span class="keyword">in</span> vlist:</div><div class="line">            records.append(json_video(video)) <span class="comment"># json_video用于提取一个json object中的信息</span></div><div class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</div><div class="line">        print(e)</div><div class="line">        sys.exit</div><div class="line"></div><div class="line">    <span class="keyword">return</span> records</div></pre></td></tr></table></figure>
<p>执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># 视频数量 花费时间</div><div class="line">100 took 5.667012453079224 seconds</div><div class="line">200 took 14.260912895202637 seconds</div><div class="line">300 took 17.25295925140381 seconds</div><div class="line">700 took 26.95353651046753 seconds</div><div class="line">1500 took 51.36556887626648 seconds</div><div class="line">3000 took 108.84225630760193 seconds</div></pre></td></tr></table></figure>
<p><strong>在基础例子中，我们一共需要进行（视频数量/30）次requests。</strong>因此，如果UP主所上传的视频数目过多，进行一次爬虫会花去数分钟时间，这对需要重复爬取的用户非常不利。</p>
<h1 id="多任务">多任务</h1>
<p>幸好，Python和其他第三方为我们提供了不少用于多任务计算的库：有Python自带的<code>multiprocessing</code>，有由<code>gevent</code>提供的<code>gevent.pool</code>，还有用于提供同一链接persistent link的<code>requests.session</code>功能。</p>
<p>以下，我将用以上提及的不同库对基础例子进行优化，并进行比较。</p>
<p>用于计算时间和作图的代码由<a href="http://maxmelnick.com/2016/04/18/faster-python-data-scraping.html" target="_blank" rel="noopener">此博客</a>提供。</p>
<p>首先，做好一个<code>simulateCrawlMember</code>方程用于使用不同的爬虫方程对多个拥有不同视频数量的用户进行爬取。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">simulateCrawlMember</span><span class="params">(my_func, method_name, headers)</span>:</span></div><div class="line"></div><div class="line">    mid_bucket = [<span class="number">17221410</span>, <span class="number">2139573</span>, <span class="number">37694382</span>, <span class="number">26810901</span>, <span class="number">26480852</span>, <span class="number">1315101</span>]</div><div class="line"></div><div class="line">    times = []</div><div class="line">    <span class="keyword">for</span> mid <span class="keyword">in</span> mid_bucket:</div><div class="line">        [API_list, itemNum] = get_pageList(mid, headers)</div><div class="line">        secs = my_func(API_list, <span class="number">10</span>, headers)[<span class="number">1</span>]</div><div class="line">        times.append(&#123;<span class="string">'method'</span>: method_name, <span class="string">'N'</span>: itemNum, <span class="string">'seconds'</span>: secs&#125;)</div><div class="line"></div><div class="line">    <span class="keyword">return</span> times</div></pre></td></tr></table></figure>
<p>然后，借鉴<a href="http://maxmelnick.com/2016/04/18/faster-python-data-scraping.html" target="_blank" rel="noopener">此博客</a>的画图方程，用于比较不同爬虫方法的速度。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">plotPerformance</span><span class="params">(performance_results)</span>:</span></div><div class="line">    df = DataFrame(performance_results)</div><div class="line"></div><div class="line">    g = sns.factorplot(x=<span class="string">'N'</span>, y=<span class="string">'seconds'</span>, hue=<span class="string">'method'</span>,</div><div class="line">                   data=df, size=<span class="number">7</span>, ci=<span class="keyword">None</span>)</div><div class="line"></div><div class="line">    g.set_axis_labels(<span class="string">'N (# http requests)'</span>, <span class="string">'Total Time to Complete (seconds)'</span>)</div><div class="line">    plt.title(<span class="string">'Performance of different http request methods vs. number of http requests'</span>)</div></pre></td></tr></table></figure>
<p>接着，借鉴<a href="http://maxmelnick.com/2016/04/18/faster-python-data-scraping.html" target="_blank" rel="noopener">此博客</a>的计时方程，用于计算每一个爬虫方程的速度。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">timefunc</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line"><span class="string">    Time profiling function adapted from "Simple Timers" example at</span></div><div class="line"><span class="string">    https://zapier.com/engineering/profiling-python-boss/</span></div><div class="line"><span class="string">    '''</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f_timer</span><span class="params">(*args, **kwargs)</span>:</span></div><div class="line">        start = time.time()</div><div class="line">        result = f(*args, **kwargs)</div><div class="line">        end = time.time()</div><div class="line">        elapsed_time = end - start</div><div class="line">        <span class="keyword">print</span> f.__name__, <span class="string">'took'</span>, elapsed_time, <span class="string">'seconds'</span></div><div class="line">        <span class="keyword">return</span> (result, elapsed_time)</div><div class="line">    <span class="keyword">return</span> f_timer</div></pre></td></tr></table></figure>
<p>合起来，我们的测试方程像这样</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">sns.set_style(<span class="string">'whitegrid'</span>)</div><div class="line"></div><div class="line">performance_results = []</div><div class="line">headers = &#123;<span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safari/537.36'</span>&#125;</div><div class="line"></div><div class="line">performance_results += simulateCrawlMember(parseAll_gevent, <span class="string">'gevent'</span>, headers)</div><div class="line">plotPerformance(performance_results, <span class="string">'gevent'</span>)</div><div class="line"></div><div class="line">performance_results += simulateCrawlMember(parseAll_pool, <span class="string">'pool'</span>, headers)</div><div class="line">plotPerformance(performance_results, <span class="string">'pool'</span>)</div><div class="line"></div><div class="line">performance_results += simulateCrawlMember(parseAll_gevent_session, <span class="string">'gevent + Session'</span>, headers)</div><div class="line">plotPerformance(performance_results, <span class="string">'gevent + Session'</span>)</div><div class="line"></div><div class="line">performance_results += simulateCrawlMember(parseAll_pool_session, <span class="string">'pool + Session'</span>, headers)</div><div class="line">plotPerformance(performance_results, <span class="string">'pool + Session'</span>)</div><div class="line"></div><div class="line">performance_results += simulateCrawlMember(parseAll_single, <span class="string">'Single'</span>, headers)</div><div class="line">plotPerformance(performance_results,<span class="string">'Single'</span> )</div></pre></td></tr></table></figure>
<h2 id="单程">单程</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@timefunc</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">parseAll_single</span><span class="params">(API_list, numProcess, headers)</span>:</span></div><div class="line">    <span class="comment"># numProcess is dummy</span></div><div class="line"></div><div class="line">    result = []</div><div class="line">    <span class="keyword">for</span> API_url <span class="keyword">in</span> API_list:</div><div class="line">        result.append(get_singlePage((API_url, headers)))</div></pre></td></tr></table></figure>
<p>执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">parseAll_single took 5.729526519775391 seconds</div><div class="line">parseAll_single took 14.209691286087036 seconds</div><div class="line">parseAll_single took 17.519840240478516 seconds</div><div class="line">parseAll_single took 27.10710334777832 seconds</div><div class="line">parseAll_single took 52.06931471824646 seconds</div><div class="line">parseAll_single took 110.40392351150513 seconds</div></pre></td></tr></table></figure>
<h2 id="使用multiprocessing库">使用multiprocessing库</h2>
<p><code>multiprocessing</code> 是python自带的多进程库。<code>multiprocessing</code>侧重多CPU分配，将任务分配给不同的CPU和进程用以提高处理效率。在本文的应用时，<code>multiprocessing</code>建立多个进程用以同时处理不同的<code>requests</code>访问要求。更多<code>multiprocessing</code>问题，请访问<a href="https://docs.python.org/3.6/library/multiprocessing.html" target="_blank" rel="noopener">Python文档</a> 。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@timefunc</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">parseAll_pool</span><span class="params">(API_list, numProcess, headers)</span>:</span></div><div class="line">    <span class="keyword">with</span> multiprocessing.Pool(numProcess) <span class="keyword">as</span> p:</div><div class="line">        result = p.map(get_singlePage, zip(API_list, [headers] * len(API_list)))</div></pre></td></tr></table></figure>
<blockquote>
<p>在单个requests方程拥有多个输入量时，需使用iterable，可通过zip()实现</p>
</blockquote>
<p>执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">parseAll_pool took 5.815796136856079 seconds</div><div class="line">parseAll_pool took 9.356193780899048 seconds</div><div class="line">parseAll_pool took 9.501183986663818 seconds</div><div class="line">parseAll_pool took 9.569898843765259 seconds</div><div class="line">parseAll_pool took 13.018352508544922 seconds</div><div class="line">parseAll_pool took 18.32560443878174 seconds</div></pre></td></tr></table></figure>
<h2 id="使用multiprocessing-session库">使用multiprocessing + session库</h2>
<p><code>requests.session()</code>使用<code>urllib3</code>的connection pooling，让用户在访问同一网址时，可以使用统一的变量和cookie。同时，<code>requests.session()</code>让重复访问的<code>TCP</code>链接被重复利用，大幅提高访问速度。</p>
<p>在我们的例子中，我们虽然不会重复访问同一个网址，但这些网址处于同一个域名下，所以我想测试以下<code>session</code>是否仍然能够提供一定的加速。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@timefunc</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">parseAll_pool_session</span><span class="params">(API_list, numProcess, headers)</span>:</span></div><div class="line">    s = requests.session()</div><div class="line">    s.headers.update(headers)</div><div class="line">    <span class="keyword">with</span> multiprocessing.Pool(numProcess) <span class="keyword">as</span> p:</div><div class="line">        result = p.map(get_singlePage_session, zip(API_list, [s] * len(API_list)))</div><div class="line"></div><div class="line">    s.close()</div></pre></td></tr></table></figure>
<p>执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">parseAll_pool_session took 5.774076223373413 seconds</div><div class="line">parseAll_pool_session took 9.44986343383789 seconds</div><div class="line">parseAll_pool_session took 8.862924575805664 seconds</div><div class="line">parseAll_pool_session took 10.02916932106018 seconds</div><div class="line">parseAll_pool_session took 12.375799655914307 seconds</div><div class="line">parseAll_pool_session took 18.021499633789062 seconds</div></pre></td></tr></table></figure>
<h2 id="使用gevent库">使用gevent库</h2>
<blockquote>
<p>gevent is a <a href="https://en.wikipedia.org/wiki/Coroutine" target="_blank" rel="noopener">coroutine</a> -based <a href="http://python.org/" target="_blank" rel="noopener">Python</a> networking library that uses <a href="https://greenlet.readthedocs.io/" target="_blank" rel="noopener">greenlet</a> to provide a high-level synchronous API on top of the libev event loop. - Documentation</p>
</blockquote>
<p><code>gevent</code>是一个第三方<strong>协程</strong>资源库，可通过<code>pip install gevent</code>进行安装。协程不等于进程，协程不拥有独立独立的内存空间，占有资源小。协程共享堆，不共享栈，由程序员在协程的代码里显示调度；同时，多采用异步的消息通讯，效率比较高。更多进程和协程信息，请访问<a href="https://www.jianshu.com/p/c6053a4c3dd5" target="_blank" rel="noopener">这篇博文</a>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@timefunc</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">parseAll_gevent</span><span class="params">(API_list, numProcess, headers)</span>:</span></div><div class="line">    gevent.monkey.patch_socket()</div><div class="line">    pool = gpool.Pool(numProcess)</div><div class="line"></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(API_list)):</div><div class="line">        pool.spawn(get_singlePage, (API_list[i], headers))</div><div class="line"></div><div class="line">    pool.join()</div></pre></td></tr></table></figure>
<blockquote>
<p>每个线程（进程）循环按照指定的任务清单顺序完成不同的任务（当任务被堵塞时，执行下一个任务；当恢复时，再回来执行这个任务；任务间切换只需要保存任务的上下文，没有内核的开销，可以不加锁的访问全局变量）</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">parseAll_gevent took 5.389847040176392 seconds</div><div class="line">parseAll_gevent took 12.893646955490112 seconds</div><div class="line">parseAll_gevent took 16.130355834960938 seconds</div><div class="line">parseAll_gevent took 25.19377088546753 seconds</div><div class="line">parseAll_gevent took 50.55870485305786 seconds</div><div class="line">parseAll_gevent took 107.25761365890503 seconds</div></pre></td></tr></table></figure>
<h2 id="使用gevent库-session库">使用gevent库 + session库</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@timefunc</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">parseAll_gevent_session</span><span class="params">(API_list, numProcess, headers)</span>:</span></div><div class="line">    gevent.monkey.patch_socket()</div><div class="line">    pool = gpool.Pool(numProcess)</div><div class="line"></div><div class="line">    s = requests.session()</div><div class="line">    s.headers.update(headers)</div><div class="line"></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(API_list)):</div><div class="line">        pool.spawn(get_singlePage_session, (API_list[i], s))</div><div class="line"></div><div class="line">    pool.join()</div><div class="line"></div><div class="line">    s.close()</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">parse_gevent took 1.3498566150665283 seconds</div><div class="line">parse_gevent took 2.1473851203918457 seconds</div><div class="line">parse_gevent took 2.217400550842285 seconds</div><div class="line">parse_gevent took 3.378615617752075 seconds</div><div class="line">parse_gevent took 6.412792682647705 seconds</div><div class="line">parse_gevent took 12.337404251098633 seconds</div></pre></td></tr></table></figure>
<p>需要注意的是，使用<code>gevent</code>需要先进行<code>monkey.patch_all()</code>。</p>
<p>gevent和python自带的socket库有部分的兼容问题，因此gevent提供了自己的socket补丁<code>monkey.patch_all()</code>。需要在import之后立刻进行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">import gevent.pool as pool</div><div class="line">import gevent.monkey</div><div class="line"></div><div class="line">monkey.patch_all()</div></pre></td></tr></table></figure>
<blockquote>
<p>在进行monkey.patch_all()之后，multiprocessing()等使用默认socket库的程序会出现错误。有一些错误可以通过<code>monkey.patch_all(thread=False, socket=False)</code>解决，有一些不行。因此，尽量把gevent的使用放在代码末尾，或者避免和multiprocessing等同时使用。gevent自带的threading功能足够满足多线程需求。</p>
</blockquote>
<p>如果未进行monkey补丁，在同时使用<code>gevent</code>和<code>requests.session</code>则可能出现以下错误。该错误为多次重复服务器拒绝连接，是由<code>gevent</code>和默认<code>socket</code>冲突导致。。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">HTTPSConnectionPool(host=<span class="string">'space.bilibili.com'</span>, port=443): Max retries exceeded with url: /ajax/member/getSubmitVideos?mid=1315101&amp;pagesize=30&amp;tid=0&amp;page=2&amp;keyword=&amp;order=pubdate (Caused by SSLError(SSLError(<span class="string">"bad handshake: SysCallError(-1, 'Unexpected EOF')"</span>,),))</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"C:\Users\Dongxu\AppData\Local\Programs\Python\Python36\lib\site-packages\gevent\greenlet.py"</span>, line 536, <span class="keyword">in</span> run</div><div class="line">    result = self._run(*self.args, **self.kwargs)</div><div class="line">  File <span class="string">"C:\Users\Dongxu\Documents\getVideo_biliMember.py"</span>, line 106, <span class="keyword">in</span> get_singlePage_session</div><div class="line">    <span class="built_in">return</span> records</div><div class="line">UnboundLocalError: <span class="built_in">local</span> variable <span class="string">'records'</span> referenced before assignment</div><div class="line">Mon Mar  5 04:08:28 2018 &lt;Greenlet at 0x20162abe470: get_singlePage_session((<span class="string">'https://space.bilibili.com/ajax/member/getSubmit)&gt; failed with UnboundLocalError</span></div></pre></td></tr></table></figure>
<h2 id="使用grequests库有误">使用grequests库(有误)</h2>
<p><code>grequests</code>是由<a href="https://github.com/kennethreitz" target="_blank" rel="noopener">kennethreitz</a>开发的第三方库。grequests同时使用requests和gevent，允许用户发起多个异步HTTP请求。<code>grequests</code>简化了单独使用<code>gevent</code>的步骤，并且在进行HTTP请求时有一定速度上的提升。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">exception_handler</span><span class="params">(request, exception)</span>:</span></div><div class="line">    print(<span class="string">"Request failed"</span>)</div><div class="line"></div><div class="line"><span class="meta">@timefunc</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">parseAll_grequests</span><span class="params">(API_List, numProcess, headers)</span>:</span></div><div class="line">    <span class="keyword">import</span> grequests</div><div class="line"></div><div class="line">    s = requests.Session()</div><div class="line"></div><div class="line">    rs = (grequests.get(u, session=s) <span class="keyword">for</span> u <span class="keyword">in</span> API_List)</div><div class="line">    responses = grequests.map(rs, exception_handler=exception_handler)</div><div class="line">    all_records = []</div><div class="line"></div><div class="line">    <span class="keyword">for</span> r <span class="keyword">in</span> responses:</div><div class="line">        <span class="keyword">if</span> r:</div><div class="line">            <span class="keyword">if</span> r.status_code == <span class="number">200</span>:</div><div class="line">                json_content = r.json()</div><div class="line">                vlist = json_content[<span class="string">'data'</span>][<span class="string">'vlist'</span>]</div><div class="line">                records = []</div><div class="line">                <span class="keyword">for</span> video <span class="keyword">in</span> vlist:</div><div class="line">                    records.append(json_video(video))</div><div class="line">                all_records += records</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                print(r.status_code)</div></pre></td></tr></table></figure>
<p>执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">parse_gevent_session took 1.0508449077606201 seconds</div><div class="line">parse_gevent_session took 1.8688721656799316 seconds</div><div class="line">parse_gevent_session took 1.7941479682922363 seconds</div><div class="line">parse_gevent_session took 2.61824893951416 seconds</div><div class="line">parse_gevent_session took 4.60194730758667 seconds</div><div class="line">parse_gevent_session took 8.719105005264282 seconds</div></pre></td></tr></table></figure>
<p>使用<code>grequests</code>依然会导致response错误，无论是否使用<code>session</code>。所以，<code>gevent</code>应该共享了一些HTTP链接数据导致B站将不同的requests视作爬虫处理。</p>
<blockquote>
<p>关于更多的grequests: <a href="https://stackoverflow.com/questions/23935201/is-a-python-requests-session-object-shared-between-gevent-greenlets-thread-safe" target="_blank" rel="noopener">thread</a>, <a href="https://github.com/kennethreitz/grequests" target="_blank" rel="noopener">doc</a></p>
</blockquote>
<h1 id="结果分析">结果分析</h1>
<img src="/multiprocessScrape/Comparepng.png" title="Benchmark">
<blockquote>
<p>其中，N为UP主视频数量，实际执行的<code>requests.get</code>访问数大概为N/30。</p>
</blockquote>
<table>
<thead>
<tr class="header">
<th>视频数</th>
<th align="center">单线程</th>
<th align="center">pool</th>
<th align="center">pool + session</th>
<th align="center">gevent</th>
<th align="center">gevent + session</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>156</td>
<td align="center">5.773</td>
<td align="center">7.83</td>
<td align="center">7.241</td>
<td align="center">1.349</td>
<td align="center">1.05</td>
</tr>
<tr class="even">
<td>413</td>
<td align="center">13.88</td>
<td align="center">8.68</td>
<td align="center">8.60</td>
<td align="center">2.147</td>
<td align="center">1.86</td>
</tr>
<tr class="odd">
<td>522</td>
<td align="center">17.38</td>
<td align="center">8.231</td>
<td align="center">8.86</td>
<td align="center">2.217</td>
<td align="center">1.79</td>
</tr>
<tr class="even">
<td>792</td>
<td align="center">27.37</td>
<td align="center">9.473</td>
<td align="center">9.29</td>
<td align="center">3.378</td>
<td align="center">2.618</td>
</tr>
<tr class="odd">
<td>1569</td>
<td align="center">51.51</td>
<td align="center">12.42</td>
<td align="center">12.07</td>
<td align="center">6.412</td>
<td align="center">4.60</td>
</tr>
<tr class="even">
<td>3259</td>
<td align="center">113.71</td>
<td align="center">18.34</td>
<td align="center">18.33</td>
<td align="center">12.33</td>
<td align="center">8.71</td>
</tr>
</tbody>
</table>
<h2 id="gevent速度最快">gevent速度最快</h2>
<p>在仅仅使用10个gevent携程时，<code>gevent</code>所达到的速度也比<code>multiprocessing</code>快上一倍左右。由此可以看出，在进行大量socket连接时，<code>gevent</code>这个针对网络连接优化过的多“线程”库比多进程更加高效。而在资源占用率上，<code>gevent</code>因为不产生新的进程，对于机器基本不产生额外的负担。在我的台式机上，可以轻易的使用上百条携程。</p>
<h2 id="multiprocessing优化明显但资源占用率太大">multiprocessing优化明显，但资源占用率太大</h2>
<p><code>multiprocessing.pool</code>对于我们的应用的加速也很明显。共享<code>session</code>的使用在使用<code>multiprocessing</code>时并没有明显的加速。然而，使用<code>multiprocessing</code>时CPU占用率达到了100%，对于需要计算机同时处理其它工作显然时不合适的。可以考虑减少进程数，或者使用<code>psutils</code>来限制进程的优先度。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> psutil</div><div class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool, cpu_count</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">limit_cpu</span><span class="params">()</span>:</span></div><div class="line">    <span class="string">"is called at every process start"</span></div><div class="line">    p = psutil.Process(os.getpid())</div><div class="line">    <span class="comment"># set to lowest priority, this is windows only, on Unix use ps.nice(19)</span></div><div class="line">    p.nice(psutil.BELOW_NORMAL_PRIORITY_CLASS)</div><div class="line"></div><div class="line"><span class="comment"># 使用pool时</span></div><div class="line">pool = Pool(<span class="keyword">None</span>, limit_cpu) <span class="comment"># 使用CPU核心数目，也可以自定义</span></div></pre></td></tr></table></figure>
<p>执行结果</p>
<table>
<thead>
<tr class="header">
<th align="center"></th>
<th align="center">psutil</th>
<th align="center">2 Process</th>
<th align="center">4 Process</th>
<th align="center">10 Process</th>
<th align="center">单线程</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">3259视频</td>
<td align="center">31.91</td>
<td align="center">60.75</td>
<td align="center">32.19</td>
<td align="center">18.32</td>
<td align="center">110.41</td>
</tr>
<tr class="even">
<td align="center">CPU</td>
<td align="center">浮动</td>
<td align="center">小于50%</td>
<td align="center">浮动</td>
<td align="center">100%</td>
<td align="center">&lt;10%</td>
</tr>
</tbody>
</table>
<h2 id="requests.session优化作用不明显">requests.session优化作用不明显</h2>
<p>无论在使用<code>gevent</code>还是<code>multiprocessing</code>时，加上<code>requests.session</code>后的优化都不明显。原因可能是因为我们的并没有重复连接同一url。不过在访问大量连接时，<code>session</code>对于<code>gevent</code>有小程度的优化。可以预则，如果继续加大需要访问的连接量，<code>session</code>加速会更加明显。</p>
<h1 id="参考">参考</h1>
<p><a href="http://maxmelnick.com/2016/04/18/faster-python-data-scraping.html" target="_blank" rel="noopener">Faster Python Data Scraping with gevent.pool</a></p>
<p><a href="http://blog.adnansiddiqi.me/how-to-speed-up-your-python-web-scraper-by-using-multiprocessing/" target="_blank" rel="noopener">How to speed up your python web scraper by using multiprocessing</a></p>
<p><a href="https://stackoverflow.com/questions/42103367/limit-total-cpu-usage-in-python-multiprocessing" target="_blank" rel="noopener">Limit total CPU usage in python multiprocessing</a></p>
<p><a href="https://stackoverflow.com/questions/23935201/is-a-python-requests-session-object-shared-between-gevent-greenlets-thread-safe" target="_blank" rel="noopener">Is a Python requests Session object shared between gevent greenlets, thread-safe (between greenlets)?</a></p>
<p><a href="https://stackoverflow.com/questions/13490346/python-gevent-pass-multiple-arguments-to-function-called-via-pool-map" target="_blank" rel="noopener">Python gevent: pass multiple arguments to function called via pool.map</a></p>
<p><a href="https://www.jianshu.com/p/c6053a4c3dd5" target="_blank" rel="noopener">Gevent 进程 线程 协程 异步</a></p>
<p><a href="http://www.gevent.org/gevent.pool.html" target="_blank" rel="noopener">gevent-pool</a></p>
<p><a href="https://stackoverflow.com/questions/8678307/gevent-monkeypatching-breaking-multiprocessing" target="_blank" rel="noopener">Gevent monkeypatching breaking multiprocessing</a></p>
]]></content>
      
        <categories>
            
            <category> data </category>
            
        </categories>
        
        
        <tags>
            
            <tag> web-crawl </tag>
            
            <tag> requests </tag>
            
            <tag> multiprocess </tag>
            
            <tag> pool </tag>
            
            <tag> gevent </tag>
            
            <tag> webScrape </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Lightworks 14 Closes Immediately After Opening Ubuntu 17]]></title>
      <url>/lightworksOnubuntu/</url>
      <content type="html"><![CDATA[<p>Solution for Lightworks 14 closing immediately after opneing on Ubuntu 17.</p>
<a id="more"></a>
<h1 id="download-two-libs-from-ubuntu-artful-repo-.deb-files">Download two libs from Ubuntu artful repo (.deb files)</h1>
<ul>
<li>libportaudio2</li>
<li>libportaudiocpp0</li>
</ul>
<p>Choose amd64 (64 bit lightworks) and any mirror</p>
<h1 id="extract-.deb-files">Extract .deb files</h1>
<ul>
<li>Extract here</li>
<li>Go to extracted folders</li>
<li>Extract data.tar.xz for each .deb file into a <code>data</code> folder</li>
</ul>
<h1 id="now-you-should-have-two-files-under-each-data-folder">Now you should have two files under each data folder</h1>
<ul>
<li>libportaudiocpp.so.0</li>
<li>libportaudio.so.2</li>
<li>libportaudiocpp.so.0.0.12</li>
<li>libportaudio.so.2.0.0</li>
</ul>
<h1 id="copy-these-4-files-into-usrliblightworks">Copy these 4 files into /usr/lib/lightworks/</h1>
<p>You are done.</p>
<p><strong>Note</strong> You should use lightworks 14.1 beta version at least (not sure your newest version when you read this).</p>
<h1 id="other-usable-video-editing-software-on-linux">Other usable video editing software on linux</h1>
<p>Openshot, Pitivi</p>
<p>Neither of them support timeline rendering and visual cropping though. But they are free.</p>
]]></content>
      
        <categories>
            
            <category> Linux </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Linux </tag>
            
            <tag> video-editing </tag>
            
            <tag> lightworks </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[初尝B站爬虫：总结和感悟]]></title>
      <url>/bilibilicrawl/</url>
      <content type="html"><![CDATA[<img src="/bilibilicrawl/head.jpg">
<a id="more"></a>
<h1 id="前言">前言</h1>
<ul>
<li>提取单个视频信息(GetList)</li>
<li>提取搜索遍历(GetCover)</li>
<li>首页图片存储(GetCover)</li>
<li>csv列表、markdown表格导出(GetList)</li>
<li>参考1：airingursb/bilibili-video</li>
<li>参考2：http://www.cnblogs.com/liuliliuli2017/p/6746433.html</li>
<li>参考3：airingursb/bilibili-danmu</li>
<li>参考4：airingursb/bilibili-user</li>
<li>持续整理中…</li>
</ul>
<h1 id="开发平台">开发平台</h1>
<p>Linux</p>
<h1 id="软件要求">软件要求</h1>
<ul>
<li>Python version: 3.6.3</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">import</span> os,sys,re</div><div class="line"><span class="keyword">import</span> json</div><div class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</div><div class="line"><span class="keyword">import</span> csv</div></pre></td></tr></table></figure>
<h1 id="完整代码">完整代码</h1>
<p><a href="https://github.com/knightReigh/CrawlBilyInfo" target="_blank" rel="noopener">knightReigh/CrawlBilyInfo</a></p>
<h1 id="中心代码">中心代码</h1>
<h2 id="requests-beautifulsoup命令">requests, BeautifulSoup命令</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"># 解析网页</div><div class="line">r = requests.get(url, headers=header, &lt;options&gt;)</div><div class="line"># 翻译requests object</div><div class="line">soup = BeautifulSoup(r, &apos;html5lib&apos;)</div><div class="line"># 搜索数据</div><div class="line">object = soup.find(element_keyword, &#123;attribute:keyword&#125;)</div><div class="line">    # element_keyword = [&apos;div&apos;,&apos;body&apos;,&apos;head&apos;,&apos;script&apos;, etc]</div><div class="line">    # attribute_keyword = [&apos;class:classname&apos;,&apos;type:text/javascript&apos;,&apos;custom:custom-key&apos;]</div><div class="line">    # example: soud.find(&apos;div&apos;,&#123;&apos;class&apos;:&apos;gallery&apos;&#125;)</div><div class="line"># 提取数据信息</div><div class="line">text = object.text # or object.string or object.content</div><div class="line">attribute_value = object[&apos;attribute&apos;] # object[&apos;class&apos;] -&gt; &apos;div&apos;</div><div class="line"># 得到多个搜索结果</div><div class="line">object_list = soup.findAll(element_keyword,&#123;attribute:keyword&#125;)</div><div class="line">for object in object_list: do something</div></pre></td></tr></table></figure>
<h2 id="关键字搜索">1. 关键字搜索</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment"># 搜索API </span></div><div class="line">page = <span class="string">"https://search.bilibili.com/all?keyword="</span> + keyword + <span class="string">"&amp;page="</span></div><div class="line"></div><div class="line"><span class="comment"># 搜索模式</span></div><div class="line"><span class="comment">#  order = ("1: 综合排序 2:最多点击 3:最新发布 4:最多弹幕 5:最多收藏")</span></div><div class="line"><span class="comment">#  order = ('&amp;order=totalrank', '&amp;order=click', '&amp;order=pubdate', '&amp;order=dm', '&amp;order=stow')</span></div><div class="line"></div><div class="line"><span class="comment"># 抓取搜索页</span></div><div class="line">q = requests.get(page + str(<span class="number">1</span>) + order, headers = UA)</div><div class="line">Soup_q = BeautifulSoup(q.text, <span class="string">'html5lib'</span>)</div><div class="line"></div><div class="line">page_upper = Soup_q.find(<span class="string">'body'</span>, class_=<span class="string">"report-wrap-module old-ver"</span>)</div><div class="line">page_upper_int = int(page_upper[<span class="string">'data-num_pages'</span>]) + <span class="number">1</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, page_upper_int):</div><div class="line">    <span class="comment"># 抓取单个页面</span></div><div class="line">    r = requests.get(page + str(i) + order,headers = UA)</div><div class="line">    Soup = BeautifulSoup(r.text,<span class="string">'html5lib'</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 得到视频列表</span></div><div class="line">    all_li = Soup.find_all(<span class="string">'li'</span>, class_ = <span class="string">"video matrix "</span> )</div><div class="line">    <span class="keyword">for</span> li <span class="keyword">in</span> all_li:</div><div class="line"></div><div class="line">        <span class="comment"># 抓取单个视频</span></div><div class="line">        print(li.a[<span class="string">'title'</span>])</div><div class="line">        video_html = requests.get(<span class="string">"https:"</span> + li.a[<span class="string">'href'</span>], headers = UA)</div><div class="line">        video_soup = BeautifulSoup(video_html.text,<span class="string">'html5lib'</span>)</div><div class="line"></div><div class="line">        <span class="comment"># do something</span></div><div class="line"></div><div class="line">        <span class="comment"># input("任意键继续下一项...")</span></div><div class="line">    print(<span class="string">"第"</span> + str(i) + <span class="string">"页爬取完毕"</span>)</div></pre></td></tr></table></figure>
<h2 id="提取封面图片">2. 提取封面图片</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment"># PATH = 目标文件夹</span></div><div class="line"><span class="comment"># URL = 目标视频链接</span></div><div class="line"></div><div class="line"><span class="comment"># 检查文件夹</span></div><div class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(path + <span class="string">"/"</span> + order):</div><div class="line">    os.makedirs(path + <span class="string">"/"</span> + order)</div><div class="line"><span class="keyword">try</span>:</div><div class="line">    video_html = requests.get(url, headers = UA)</div><div class="line">    video_soup = BeautifulSoup(video_html.text,<span class="string">'html5lib'</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 生成图片绝对地址 path-to-image/imagename.extension</span></div><div class="line">    img_src = video_soup.find(<span class="string">'img'</span>)</div><div class="line">    r = requests.get(<span class="string">"http:"</span> + img_src, headers = UA)</div><div class="line">    path = path + <span class="string">"/"</span> + order +<span class="string">"/"</span> + str(page_num) + <span class="string">"/"</span>+ title + <span class="string">"."</span> +page_url.split(<span class="string">'.'</span>)[<span class="number">-1</span>]</div><div class="line"></div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(path):</div><div class="line">        <span class="comment"># 储存图片</span></div><div class="line">        f = open(path, <span class="string">"wb"</span>)</div><div class="line">        f.write(r.content)</div><div class="line">        f.close()</div></pre></td></tr></table></figure>
<h2 id="信息爬虫">3. 信息爬虫</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 自定义储存类型</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">bilibili_video</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, args=&#123;&#125;)</span>:</span></div><div class="line">        self.meta = &#123;<span class="string">'url'</span>:<span class="string">''</span>,<span class="string">'title'</span>:<span class="string">''</span>,<span class="string">'aid'</span>:<span class="number">-1</span>,<span class="string">'cid'</span>:<span class="number">-1</span>,<span class="string">'uploadtime'</span>:<span class="string">''</span>,<span class="string">'duration'</span>:<span class="string">''</span>,<span class="string">'category'</span>:<span class="string">''</span>&#125;</div><div class="line">        self.play = &#123;<span class="string">'view'</span>:<span class="number">0</span>,<span class="string">'click'</span>:<span class="number">0</span>,<span class="string">'favorite'</span>:<span class="number">0</span>,<span class="string">'coin'</span>:<span class="number">0</span>,<span class="string">'danmaku'</span>:<span class="number">0</span>,<span class="string">'reply'</span>:<span class="number">0</span>,<span class="string">'share'</span>:<span class="number">0</span>&#125;</div><div class="line">        self.up = &#123;<span class="string">'up'</span>:<span class="string">''</span>,<span class="string">'mid'</span>:<span class="number">-1</span>, <span class="string">'upspace'</span>:<span class="string">''</span>&#125;</div><div class="line">        self.text = &#123;<span class="string">'intro'</span>:<span class="string">''</span>&#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> bool(args):</div><div class="line">            self.update(args)</div><div class="line"></div><div class="line">    <span class="comment"># 写入信息</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, args)</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># 打印信息</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(self,kargs=[])</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">writevalue</span><span class="params">(self)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">writekey</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line"><span class="comment"># 爬虫代码</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">spider</span><span class="params">(url)</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># 翻译网页</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        html = requests.get(url, headers=UA)</div><div class="line">        soup = BeautifulSoup(html.text,<span class="string">'html5lib'</span>)</div><div class="line">    <span class="keyword">except</span> requests.exceptions.RequestException <span class="keyword">as</span> e:</div><div class="line">        print(e)</div><div class="line">        sys.exit(<span class="number">1</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 标题</span></div><div class="line">    title = soup.find(<span class="string">'div'</span>, class_=<span class="string">"v-title"</span>).h1[<span class="string">'title'</span>] <span class="comment"># 标题</span></div><div class="line"></div><div class="line">    <span class="comment"># 视频aid</span></div><div class="line">    aidlocator = soup.findAll(<span class="string">'script'</span>, &#123;<span class="string">'language'</span>:<span class="string">"javascript"</span>&#125;)[<span class="number">-1</span>]</div><div class="line">    aid = re.search(<span class="string">r'aid=\'(.*)\', typeid'</span>, aidlocator.text).group(<span class="number">1</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 上传时间</span></div><div class="line">    uploadtime = soup.find(<span class="string">'meta'</span>,attrs=&#123;<span class="string">'itemprop'</span>:<span class="string">"uploadDate"</span>&#125;)[<span class="string">'content'</span>]</div><div class="line"></div><div class="line">    <span class="comment"># 分类信息</span></div><div class="line">    timeinfo = soup.find(<span class="string">'div'</span>, class_=<span class="string">"tminfo"</span>)</div><div class="line">    time_log = []</div><div class="line">    <span class="keyword">for</span> logx <span class="keyword">in</span> timeinfo.find_all(<span class="string">'span'</span>):</div><div class="line">        time_log.append(logx.a.text)</div><div class="line"></div><div class="line">    <span class="comment"># UP主信息</span></div><div class="line">    up = soup.find(<span class="string">'div'</span>, class_=<span class="string">"usname"</span>).a.text</div><div class="line">    mid = soup.find(<span class="string">'div'</span>, class_=<span class="string">"usname"</span>).a[<span class="string">'mid'</span>]</div><div class="line">    upspace = <span class="string">"https:"</span> + soup.find(<span class="string">'div'</span>, class_=<span class="string">"usname"</span>).a[<span class="string">'href'</span>]</div><div class="line"></div><div class="line">    <span class="comment"># 标签: b站更新后暂时没找到相关api</span></div><div class="line"></div><div class="line">    <span class="comment"># 视频简介</span></div><div class="line">    intro_text = soup.find(<span class="string">'div'</span>, class_=<span class="string">"v_desc report-scroll-module report-wrap-module"</span>).text</div><div class="line"></div><div class="line">    <span class="comment"># 视频cids &amp;分P</span></div><div class="line">    cids = []</div><div class="line">    cid_urls = []</div><div class="line">    videos = soup.find_all(<span class="string">'option'</span>)</div><div class="line"></div><div class="line">    <span class="keyword">if</span> videos:</div><div class="line">        <span class="keyword">for</span> video <span class="keyword">in</span> videos:</div><div class="line">            cids.append(video[<span class="string">'cid'</span>])</div><div class="line">            cid_urls.append( PROTOCAL + Bilibili + video[<span class="string">'value'</span>])</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        cidlocator = soup.find(<span class="string">'script'</span>,&#123;<span class="string">"type"</span>:<span class="string">"text/javascript"</span>&#125;,text=re.compile(<span class="string">'EmbedPlayer'</span>)).text</div><div class="line">        cids.append(re.search(<span class="string">'cid=(.*)&amp;aid'</span>,cidlocator).group(<span class="number">1</span>))</div><div class="line">        cid_urls.append(PROTOCAL + Bilibili + <span class="string">'/video/'</span> + str(aid))</div><div class="line"></div><div class="line">    <span class="comment"># 视频播放数据：已被移植json</span></div><div class="line">    <span class="comment"># 播放数据API1</span></div><div class="line">    info_url = PROTOCAL + <span class="string">"interface.bilibili.com/player?id=cid:"</span> + str(cids[<span class="number">0</span>]) + <span class="string">"&amp;aid="</span> + aid</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        video_info = requests.get(info_url)</div><div class="line">    <span class="keyword">except</span> requests.exceptions.RequestException <span class="keyword">as</span> e:</div><div class="line">        print(e)</div><div class="line">        sys.exit(<span class="number">1</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 播放数据API2</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        json_url = PROTOCAL + <span class="string">"api.bilibili.com/archive_stat/stat?aid="</span> + aid</div><div class="line">        json = requests.get(json_url, headers=UA).json()[<span class="string">'data'</span>]</div><div class="line">    <span class="keyword">except</span> requests.exceptions.RequestException <span class="keyword">as</span> e:</div><div class="line">        print(e)</div><div class="line">        sys.exit(<span class="number">1</span>)</div><div class="line">    </div><div class="line">    <span class="comment"># 收藏、弹幕、硬币、分析、回复、点击、时长</span></div><div class="line">    favorite = json[<span class="string">'favorite'</span>]</div><div class="line">    danmaku = json[<span class="string">'danmaku'</span>]</div><div class="line">    coin = json[<span class="string">'coin'</span>]</div><div class="line">    view = json[<span class="string">'view'</span>]</div><div class="line">    share = json[<span class="string">'share'</span>]</div><div class="line">    reply = json[<span class="string">'reply'</span>]</div><div class="line">    click = re.search(<span class="string">'&lt;click&gt;(.*)&lt;/click&gt;'</span>,video_info.text).group(<span class="number">1</span>)</div><div class="line">    duration = re.search(<span class="string">'&lt;duration&gt;(.*)&lt;/duration&gt;'</span>,video_info.text).group(<span class="number">1</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 另外一个API暂时没什么用</span></div><div class="line">    json_url2 = PROTOCAL + <span class="string">"api.bilibili.com/x/reply?jsonp=jsonp&amp;type=1&amp;sort=0&amp;pn=1&amp;nohot=1&amp;oid="</span> + aid</div><div class="line"></div><div class="line">    <span class="comment"># 储存结果</span></div><div class="line">    meta_info = &#123;<span class="string">'url'</span>:url,<span class="string">'title'</span>:title,<span class="string">'aid'</span>:int(aid),<span class="string">'cid'</span>:int(cids[<span class="number">0</span>]),<span class="string">'uploadtime'</span>:uploadtime,<span class="string">'duration'</span>:duration, <span class="string">'category'</span>:time_log&#125;</div><div class="line">    play_info =&#123;<span class="string">'view'</span>:view,<span class="string">'click'</span>:click,<span class="string">'favorite'</span>:favorite,<span class="string">'coin'</span>:coin,<span class="string">'danmaku'</span>:danmaku,<span class="string">'reply'</span>:reply,<span class="string">'share'</span>:share&#125;</div><div class="line">    up_info = &#123;<span class="string">'up'</span>:up,<span class="string">'mid'</span>:mid, <span class="string">'upspace'</span>:upspace&#125;</div><div class="line">    text_info = &#123;<span class="string">'intro'</span>:intro_text&#125;</div><div class="line"></div><div class="line">    <span class="comment"># 注意:语法要求python3.5以上 </span></div><div class="line">    result = bilibili_video(&#123;**meta_info, **play_info, **up_info, **text_info&#125;)</div><div class="line"></div><div class="line">    <span class="keyword">return</span> result</div></pre></td></tr></table></figure>
<p>结果展示 <img src="/bilibilicrawl/crawl_info.jpg"></p>
<h2 id="分析多p视频">分析多P视频</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">try</span>:</div><div class="line">    page = requests.get(url)</div><div class="line">    soup = BeautifulSoup(page.text, <span class="string">'html.parser'</span>)</div><div class="line"><span class="keyword">except</span>:</div><div class="line">    print(<span class="string">'pyton.requests: %s cannot be opened'</span> % url)</div><div class="line">    sys.exit(<span class="number">1</span>)</div><div class="line"></div><div class="line"><span class="comment"># 获取多P视频列表:关键字:option</span></div><div class="line">videos = soup.find_all(<span class="string">'option'</span>)</div><div class="line"></div><div class="line"><span class="keyword">if</span> videos: <span class="comment"># 多P视频</span></div><div class="line">    <span class="keyword">for</span> video <span class="keyword">in</span> videos:</div><div class="line">        </div><div class="line">        <span class="comment"># 抓取每P信息</span></div><div class="line">        video_title = video.contents[<span class="number">0</span>][<span class="number">2</span>:]</div><div class="line">        </div><div class="line">        <span class="comment"># API: video_url = url + '/index_' + str(page) + '.html'</span></div><div class="line">        video_url = <span class="string">'https://www.bilibili.com'</span> + video.get(<span class="string">'value'</span>)</div><div class="line"></div><div class="line">        <span class="comment"># do something</span></div><div class="line"></div><div class="line"><span class="keyword">else</span>:<span class="comment"># 单P视频</span></div><div class="line">    <span class="comment"># do something else</span></div></pre></td></tr></table></figure>
<h2 id="写入csv">写入CSV</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> csv</div><div class="line"></div><div class="line"><span class="comment"># 打开csv文件</span></div><div class="line">f = open(filename,<span class="string">'w'</span>)</div><div class="line">csv_port = csv.writer(f)</div><div class="line"></div><div class="line"><span class="comment"># 按行写入: 输入为list</span></div><div class="line">csv_port.writerow([<span class="string">'item1'</span>,<span class="string">'item2'</span>,<span class="string">'item3'</span>,<span class="string">'etc'</span>])</div><div class="line"></div><div class="line">f.close()</div><div class="line"></div><div class="line"><span class="comment"># 读取csv</span></div><div class="line"></div><div class="line"><span class="keyword">with</span> open(inputfile,newline=<span class="string">''</span>) <span class="keyword">as</span> csvfile:</div><div class="line">    out = open(<span class="string">'output.txt'</span>,<span class="string">'w'</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 打开csv reader</span></div><div class="line">    videoreader = csv.reader(csvfile,delimiter=<span class="string">','</span>)</div><div class="line">    <span class="comment"># 跳过表头</span></div><div class="line">    next(videoreader, <span class="keyword">None</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 按行读取</span></div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> videoreader:</div><div class="line">        out.write(row[<span class="number">0</span>] + row[<span class="number">1</span>] + row[<span class="number">3</span>] + <span class="string">'etc'</span>)</div></pre></td></tr></table></figure>
<h2 id="文件夹操作">文件夹操作</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line"><span class="comment"># 当前工作目录</span></div><div class="line">DIRECTORY = os.getcwd()</div><div class="line"></div><div class="line"><span class="comment"># 代码运行目录</span></div><div class="line">DIRECTORY = os.path.dirname(os.path.abspath(__file__))</div><div class="line"></div><div class="line"><span class="comment"># 创立文件夹</span></div><div class="line">os.makedirs(path)</div></pre></td></tr></table></figure>
<h2 id="regex搜索">regex搜索</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line"></div><div class="line"><span class="comment"># 搜索text1和text2之间的段落</span></div><div class="line">re.search(<span class="string">r'text1(.*)?text2'</span>,string).group(<span class="number">1</span>)</div></pre></td></tr></table></figure>
<h1 id="创作一个好看的表格">创作一个好看的表格</h1>
<p>网上有很多模板。把csv结果按行写成HTML表格,加上css就好了。</p>
<p><a href="https://cutelittleturtle.github.io/example-mc/" target="_blank" rel="noopener">样品</a> <img src="/bilibilicrawl/table.jpg"></p>
<p><a href="http://freefrontend.com/css-tables/" target="_blank" rel="noopener">更多模板</a></p>
<h1 id="鸣谢">鸣谢</h1>
<p>这篇文章采用了很多牛人的爬虫代码,特此感谢:</p>
<ul>
<li>airingursb/bilibili-video</li>
<li>http://www.cnblogs.com/liuliliuli2017/p/6746433.html</li>
<li>airingursb/bilibili-danmu</li>
<li>airingursb/bilibili-user</li>
</ul>
<p>其中<a href="https://github.com/airingursb/bilibili-video/" target="_blank" rel="noopener">airingursb/bilibili-video</a>采用了<code>lxml etree</code>分析网页,是一个很好的代替思路.我没有采用’lxml’的主要原因是<code>lxml</code>的分析结果都以<code>list</code>方式输出,提取代码每一行都会多一个<code>[0]</code>的后缀,看着很烦2333. 其次就是<code>BeautifulSoup</code>的结构遍历方式比较直观,采用<code>object.element_type['attribute'].another_find.another_find</code>的语法,对于我这种新手来说容易理解和查错.相反,<code>lxml</code>的结构遍历采取路径式:<code>etree.xpath(object/div[@attribute]/another_div/@another_attr)</code>. 个人感觉更容易出错.不过<code>lxml</code>的结构树非常的清晰,用路径式搜索也很直观,而且代码来说比较简洁,各有优劣吧.</p>
<p>这篇代码<a href="https://github.com/airingursb/bilibili-video/" target="_blank" rel="noopener">airingursb/bilibili-video</a>还采用了MySQLdb数据库来整理信息.我因为,懒,所以就没去弄,毕竟我现在需要的数据量很小,网也不快2333.但做大量数据分析还是用数据库更加稳定和高效.我会补上这一部分.</p>
<p>从这两天分析b站网页得出,爬虫最关键的还是找到合适的API.短短几年,b站的代码格式和数据结构已经变了很多,参考代码我也不得不大幅度改动.所以爬虫没有一劳永逸这回事.</p>
<p>不过另一方面来讲,规范化的API和网页结构,和开发成熟的工具,类似<code>BeautifulSoup</code>和<code>lxml</code>,使得爬虫的门槛变得很低.以后真正的竞争是获得数据和大数据的梳理建模.如何快速准确的获得数据和如何生动形象的呈现数据,才是数据工作者真正的价值所在.</p>
<p>路还有很长.</p>
]]></content>
      
        <categories>
            
            <category> data </category>
            
        </categories>
        
        
        <tags>
            
            <tag> web-crawl </tag>
            
            <tag> data </tag>
            
            <tag> python </tag>
            
            <tag> BeautifulSoup </tag>
            
            <tag> bilibili </tag>
            
            <tag> lxml </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Set up Home Streaming Library on Ubuntu (UPNP)]]></title>
      <url>/upnp-ubuntu/</url>
      <content type="html"><![CDATA[<img src="/upnp-ubuntu/logo-horiz.png">
<p>I found this spin-off of <em><a href="http://mediatomb.cc/" target="_blank" rel="noopener">MediaTomb</a></em> most straight-forward and user-friendly to set up a <strong>UPNP streaming library</strong> on Ubunu/Linux systems.</p>
<a id="more"></a>
<h2 id="features">Features</h2>
<ul>
<li>It provides a web user interface where users can just click to add custom libraries.</li>
<li>The command line interface shows detailed information such as scanning process; so you won’t be cluseless.</li>
<li>No set-up is required after installing. Just run <code>gerbera</code> and you are good to go.</li>
<li>I have tested with <code>VLC</code> and <code>UPNP Xtreme</code> on my ipad. It works great.</li>
<li>And it is actively developed.</li>
</ul>
<h2 id="installation">Installation</h2>
<p>Visit <a href="https://github.com/gerbera/gerbera" target="_blank" rel="noopener">Git</a> page and follow instructions per distribution. You can also compile from source.</p>
<h2 id="other-upnp-options">Other UPNP options</h2>
<ul>
<li><p><a href="https://mylinuxramblings.wordpress.com/2016/02/19/mini-how-to-installing-minidlna-in-ubuntu/" target="_blank" rel="noopener">minidlna</a></p>
<p>This seems to be the most popular upnp package on linux. It claims to be lightweight, stable and semi-actively-maintained. But I can’t get it to work. Basically it runs and shows up in upnp clients. But it does not scan my custom media folders. I probably have the set-up wrong somewhere. But I didn’t find any solution yet.</p></li>
<li><p><a href="https://wiki.gnome.org/Projects/Rygel" target="_blank" rel="noopener">rygel</a></p>
<p>Anothe popular package. It is easier to use than minidlna because it comes with a graphical preference interface. It has some plugins so I assume the extensibility is better. I get my custom media folder scanned alright. But the ipad-version <code>VLC</code> and other media players cannot find any content from its server. <code>UPNP Xtreme</code> works alright with it.</p></li>
</ul>
]]></content>
      
        <categories>
            
            <category> programming </category>
            
        </categories>
        
        
        <tags>
            
            <tag> linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Install Arch Linux with Ubuntu and Windows]]></title>
      <url>/arch-triboot/</url>
      <content type="html"><![CDATA[<h1 id="before-start">Before Start</h1>
<p>I have had my Ubuntu + Windows dual-boot workstation set for quite while. Then I realize that I need an additional Linux installation in case my Work Ubuntu broke down. Since this <strong>3rd</strong> distro would be primarily used for resue and leisure experimentation, I choose <a href="https://www.archlinux.org/" target="_blank" rel="noopener">Arch Linux</a> for its high customizability and compact initial size.</p>
<a id="more"></a>
<p>Though I have installed Ubuntu/Mint/other more decorated distro million times, I foudn installing Arch linux rather interesting and refreshing. Since it starts with so few basic packages, you really get to know what packages are for what and how the kernel works behind the scene.</p>
<p>Few <strong>warnings</strong> beforehand: + Arch Linux installation requires <strong>valid internet connection</strong></p>
<p><code>there are ways to install without, but it is rather complicated</code> + Arch Linux requires turning off <strong>secure boot</strong> if you have it + You will not have graphical interface after valina installation + Always <strong>back up</strong> your important files and work in paritions allocated by existing OS (so you won’t mess with existing data)</p>
<p>Some <strong>exictiments</strong> to look forward to: + Pair your base system with any <code>Desktop Environment (DE)</code> you like, wether it’s KDE, Gnome, or XDFE + Choose your own <code>display manager</code>, such as lightdm, ssdm, xterm, etc + Get along with <code>pacman</code>, which is powerful and simplier than <code>apt-get</code></p>
<p>Now let’s begin.</p>
<h1 id="disk-configuration-before-install">Disk configuration before install</h1>
<table>
<thead>
<tr class="header">
<th>Partition</th>
<th>Description</th>
<th>Size</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>The</td>
<td>bootloaders</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="even">
<td>sda1</td>
<td>msft mbr partition</td>
<td>472 MB</td>
<td>ntfs</td>
</tr>
<tr class="odd">
<td>sda2</td>
<td>EFI bootloader</td>
<td>105 MB</td>
<td>fat32</td>
</tr>
<tr class="even">
<td>The</td>
<td>Windows</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="odd">
<td>sda3</td>
<td>msft reserved</td>
<td>16.8 MB</td>
<td>msftres</td>
</tr>
<tr class="even">
<td>sda4</td>
<td>Windows 10</td>
<td>214 GB</td>
<td>ntfs</td>
</tr>
<tr class="odd">
<td>sda5</td>
<td>unknown</td>
<td>1 GB</td>
<td>ntfs</td>
</tr>
<tr class="even">
<td>The</td>
<td>Ubuntu</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="odd">
<td>sda6</td>
<td>Linux Swap</td>
<td>10 GB</td>
<td>swap</td>
</tr>
<tr class="even">
<td>sda7</td>
<td>Ubuntu 17(/)</td>
<td>70 GB</td>
<td>ext4</td>
</tr>
<tr class="odd">
<td>sda8</td>
<td>Ubuntu 17(/home)</td>
<td>174 GB</td>
<td>ext4</td>
</tr>
<tr class="even">
<td>sda9</td>
<td>Cross-OS Data</td>
<td>215 GB</td>
<td>ntfs</td>
</tr>
<tr class="odd">
<td>Some</td>
<td>free</td>
<td>space</td>
<td>…</td>
</tr>
</tbody>
</table>
<p><strong>Active Bootloader</strong>: UEFI(sda2)</p>
<p><strong>Partition table</strong>: gpt</p>
<p><strong>Data disk</strong>: NTFS(sda9)</p>
<p><strong>Free space</strong>: at end of disk</p>
<h1 id="bootloader">Bootloader</h1>
<blockquote>
<p>We are going to implement an <strong>UEFI multiboot</strong> system for our triple system configurations. The UEFI bootloader basically works as this: give UEFI bootloader one <strong>single</strong> partition; each OS will have one <strong>directory</strong> as one entry for bootloader with its own name under this UEFI partition. A detailed explanation can be found <a href="https://unix.stackexchange.com/questions/160500/how-do-multiple-boot-loaders-work-on-an-efi-system-partition" target="_blank" rel="noopener">here</a>.</p>
</blockquote>
<p>Since the disk already contains a Microsoft <code>mbr bootloader(sda1)</code> and a Linux <code>UEFI grub bootloader(sda2)</code>, with the UEFI bootloader being the active one, I will <strong>not</strong> create additional bootloader partition for Arch Linux and just <strong>mount</strong> the existing UEFI boot partition into <code>/boot</code>. Wait till reaching the <a href="#install-arch-linux">Install Arch Linux</a> section.</p>
<p><em>Note: my method works with <code>gpt</code> partition table and UEFI system. You will need to research for different combinations.</em></p>
<p><em>For more information: <a href="https://wiki.archlinux.org/index.php/Arch_boot_process" target="_blank" rel="noopener">Official Boot Guide</a></em></p>
 
<center>
<i>Now I have introduced some necessary backgrounds and concepts, it is prompt to proceed to the install methodology. First, we will look at the preparation steps.</i>
</center>
<p> </p>
<h1 id="preparation">Preparation</h1>
<h2 id="create-live-usb">Create Live-USB</h2>
<p><a href="https://www.archlinux.org/download/" target="_blank" rel="noopener">Download</a></p>
<p>It is recommened by <a href="https://wiki.archlinux.org/index.php/USB_flash_installation_media#In_GNU.2FLinux" target="_blank" rel="noopener">official docs</a> to use <code>dd</code> command to create live-usb. <code>dd</code> will destroy any data on your usb so make sure to use the correct device.</p>
<p>(do <strong>not</strong> append partition number such as <code>sda1</code>, just use <code>sda</code>)</p>
<p><code># dd bs=4M if=/path/to/archlinux.iso of=/dev/sdx status=progress &amp;&amp; sync</code></p>
<p>However, my drive created with <code>dd</code> does not boot correctly, so I used <a href="https://etcher.io/" target="_blank" rel="noopener">etcher</a> to create the live-usb. It might be your back-up solution.</p>
<h2 id="turn-off-secure-boot">Turn off Secure Boot</h2>
<p><code>Secure boot</code> might be the most redundant function added by Microsoft, aside from forcing automatic updates. It adds a lot of complication to the booting sequence and creates problems for unsigned binaries from other OS. The Arch installer will <strong>not</strong> work with secure boot by default. So I will just disable it. If you are interested maintaining it, there is an entire <a href="https://wiki.archlinux.org/index.php/Secure_Boot" target="_blank" rel="noopener">article</a> on how-tos.</p>
<p>Depending on your motherboard, the Secure Boot might require different methods to be turned off.</p>
<p>For my <code>ASUS</code> laptop, I do</p>
<ol style="list-style-type: decimal">
<li>Enter BIOS settings by press <code>F2</code></li>
<li>Go to <code>Secure</code> settings</li>
<li>Choose <code>Delete all keys</code></li>
<li>Save &amp; Exits</li>
</ol>
<p>Additional refs: <a href="https://technet.microsoft.com/en-us/library/dn481258.aspx" target="_blank" rel="noopener">Microsoft</a>,<a href="https://www.howtogeek.com/175641/how-to-boot-and-install-linux-on-a-uefi-pc-with-secure-boot/" target="_blank" rel="noopener">How-to-Geek</a>, <a href="https://www.qualityology.com/tech/disable-asus-motherboards-uefi-secure-boot/" target="_blank" rel="noopener">Qualityology</a></p>
<p>You can also turn off <code>fast boot</code>, which is not requried though.</p>
<h2 id="boot-into-live-usb">Boot into Live-USB</h2>
<p>After loading finished, you should be logged in as: <code>root@archiso</code></p>
<h2 id="wifi-configuration">WIFI configuration</h2>
<p>As I warned you, Arch Linux requires valid <strong>internet connection</strong> throughout installation. I did not understand why though people are saying things like</p>
<p><code>You will not be able to see the benefits of Arch Linux without a consistent internet connection.</code></p>
<p>Well, at least this is an <a href="https://wiki.archlinux.org/index.php/offline_installation_of_packages" target="_blank" rel="noopener">official way</a> to install without internet, which adds more trouble. So we will stick with internet; anyways you will need to learn setting up internet in the non-graphical terminal to install your DE and internet manager later.</p>
<p><strong>So, let’s start</strong>.</p>
<p>The official wireless configuration guide is <a href="https://wiki.archlinux.org/index.php/Wireless_network_configuration" target="_blank" rel="noopener">here</a>. I will just extract the key steps admist all those details and explanations (worthy reading though).</p>
<p><strong>Used packages</strong>: <code>iw</code>, <code>wpa_supplicant</code> and <code>dhcpcd</code></p>
<p><strong>3 Steps</strong>:</p>
<ol start="0" style="list-style-type: decimal">
<li><p>Check <strong><em>driver status</em></strong>: <code>lspci -k</code></p></li>
<li><p>Configure <strong><em>wireless interface</em></strong>:</p>
<ol style="list-style-type: decimal">
<li><p>Get interace name: <code>iw dev</code> -&gt; <code>interface: wlps20/wlan0</code></p></li>
<li><p>Get link status: <code>iw dev interface link</code></p></li>
<li><p>Activate interface: <code>ip link set interface up</code></p></li>
<li>Check interface status: <code>ip link show interface</code> -&gt; <code>wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</code>. The <code>UP</code> means the interface is up.</li>
</ol></li>
<li><p>Configure <strong><em>access point</em></strong>:</p>
<blockquote>
<p>The access point is basically each of the wifi SSIDs you see in either Windows or Ubuntu network manager.</p>
</blockquote>
<ol style="list-style-type: decimal">
<li><p>Scan for SSIDs: <code>iw dev interface scan | less</code> -&gt; <code>your SSID</code></p></li>
<li><p>Connect to the SSID: <code>wpa_supplicant -B -i interface -c &lt;(wpa_passphrase MYSSID passphrase)</code> -&gt; <code>Successfully initialized wpa_supplicant</code></p></li>
</ol>
<blockquote>
<p>wpa_passphrase generates a minimal configuration text block used by wpa_supplicant.</p>
</blockquote></li>
<li><p>Get an <strong><em>IP address</em></strong></p>
<p><code>dhcpcd wlan0</code></p></li>
</ol>
<p>That’s all you need to do. I won’t bother turning it off since you need internet throughout the installation.</p>
<p>Update: you can use <code>wifi-menu</code>, which is much simpler.</p>
<p>Again, for any questions, read the <a href="https://wiki.archlinux.org/index.php/Wireless_network_configuration#Check_the_driver_status" target="_blank" rel="noopener">official doc</a>.</p>
<h2 id="partitioning">Partitioning</h2>
<p>Now it’s time to set up your disk space.</p>
<p>For basic installation, Arch only requires <code>/</code> partition and <code>bootloader</code> partition. <code>swap</code> partition is optional but recommended. Separate <code>/home</code>, <code>/software</code> and other schemes are just of your own choice.</p>
<p><a href="https://wiki.archlinux.org/index.php/Partitioning#Partitionless_disk" target="_blank" rel="noopener">Official Paritioning Guide</a></p>
<p><a href="https://wiki.archlinux.org/index.php/File_systems#Create_a_file_system" target="_blank" rel="noopener">Official File System Guide</a></p>
<p>In my case, I want to <strong>share</strong> the <code>UEFI bootloader</code> and <code>linux swap</code> partitions that have been set by the old Ubuntu. So all I need to do is to create a new partition <code>sda10</code> (40 GB) for Arch Linux and mount the existing <code>sda2</code> and <code>sda6</code> partition as <code>/boot</code> and <code>/swap</code> respectively. Refer to this <a href="#disk-configuration-before-install">table</a> for the old disk configuration again.</p>
<p>The new partition can either be created before running the live-usb or during the installation process.</p>
<p>Useful utitlies: <code>parted/gparted</code>, <code>fdisk</code></p>
<p>A simple example to create partition within the live-usb:</p>
<ol style="list-style-type: decimal">
<li>Enter <code>parted</code> interface: <code>parted</code> -&gt; <code>(parted)</code></li>
<li><p>Check partitions: <code>(parted) print</code></p>
<p>You should see something like this:</p>
<p><code>Disk /dev/sda: 100GB</code></p>
<p><code>Partition Table: gpt</code></p>
<p><code>Disk Flags:</code></p>
<table>
<thead>
<tr class="header">
<th>Number</th>
<th>Start</th>
<th>End</th>
<th>Size</th>
<th>Type</th>
<th>File System</th>
<th>Flags</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>100kB</td>
<td>10GB</td>
<td>9999MB</td>
<td>primary</td>
<td>ext4</td>
<td>lba</td>
</tr>
</tbody>
</table></li>
<li>Create new partition: <code>(parted) mkpart</code></li>
<li><p>Quit (do <strong>not</strong> format yet): <code>(parted) quit</code></p></li>
</ol>
<h1 id="install-arch-linux">Install Arch Linux</h1>
<h2 id="format-new-partition">Format new partition:</h2>
<p>Check again: <code>lsblk /dev/sda</code></p>
<p>Format Arch parition: <code>mkfs.ext4 /dev/sda10</code></p>
<p>Turn on swap partition (existing): <code>swapon /dev/sda6</code></p>
<p><em>Remember the <code>swap</code> and <code>boot</code> partitions already exist. If not: refer to <a href="https://www.tecmint.com/parted-command-to-create-resize-rescue-linux-disk-partitions/" target="_blank" rel="noopener">use parted</a> and <a href="http://www.leyar.me/installation-of-archlinux/" target="_blank" rel="noopener">Arch Install Notes</a> on how-tos.</em></p>
<h2 id="mount-necessary-partitions">Mount necessary partitions</h2>
<p><code>mkdir /mnt</code> (create mount point)</p>
<p><code>mount /dev/sda10 /mnt</code> (mount <code>/</code> partition)</p>
<p><code>mkdir /mnt/boot</code> (create boot location)</p>
<p><code>mount /dev/sda2 /mnt/boot</code> (mount <code>/boot</code> partition)</p>
<h2 id="select-mirror-image">Select mirror image</h2>
<p><code>vi /etc/pacman.d/mirrorlist</code></p>
<p><strong>Uncomment</strong> the ones you want to use and put them on <strong>top</strong> of the list for speed.</p>
<p>Use <code>pacman -Syy</code> to refresh after saving file.</p>
<h2 id="install-base-packages">Install base packages</h2>
<p><code>pacstrap -i /mnt base base-devel</code></p>
<h2 id="generate-file-system-tablefstab">Generate file system table(Fstab)</h2>
<p><code>genfstab -U -p /mnt &gt;&gt; /mnt/etc/fstab</code></p>
<p>Check: <code>vi /mnt/etc/fstab</code></p>
<h2 id="change-the-root-into-new-system">Change the root into new system</h2>
<p><code>arch -chroot /mnt /bin/bash</code></p>
<h2 id="system-configurationbasic">System configuration(basic)</h2>
<h3 id="locale">Locale</h3>
<p><code>vi /etc/locale.gen</code></p>
<p>Uncomment needed entries such as <code>en_US.UTF-8 UTF-8</code> and <code>zh-CN.UTF-8 UTF-8</code></p>
<p>Generate locale file: <code>locale-gen</code></p>
<p>Add <code>LANG=en_US.UTF-8</code> to <code>/etc/locale.conf</code> to set <code>LANG</code> variable.</p>
<h3 id="timezone">Timezone</h3>
<p><code>ln -sf /usr/share/zoneinfo/Region/City /etc/localtime</code></p>
<h3 id="hostname">Hostname</h3>
<p>Add your <em>hostname</em> to <code>vi /etc/hostname</code></p>
<p>Consider adding entries to <code>/etc/hosts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">127.0.0.1	  localhost.localdomain	  localhost</div><div class="line">::1         localhost.localdomain	  localhost</div><div class="line">127.0.1.1	  myhostname.localdomain  myhostname</div></pre></td></tr></table></figure>
<h3 id="network-configuration">Network configuration</h3>
<p>The newly installed system has <strong>no network</strong>. Our previous configuration is with the live-usb only (we are still on it). And the valina Arch does <strong>not</strong> have packages such as <code>iw</code> and <code>wpa_supplicant</code> installed. So if you just leave now and boot into the new system, you will not be able to connect to internet(at least not very convinient).</p>
<p>So what is needed is to configure the internet(wireless or wired) now.</p>
<p>For wireless configuraton, follow the previous <a href="#wifi-configuration">section</a>. Basically, you install <code>iw</code> and <code>wpa_supplicant</code> packages while connected through the live-usb environment. You can also install <code>dialog</code> package if you choose to use <code>wifi-menu</code> instead.</p>
<p>For other configuration options, check the <a href="https://wiki.archlinux.org/index.php/Network_configuration#Network_managers" target="_blank" rel="noopener">official network manager guide</a>.</p>
<h3 id="root-password">Root password</h3>
<p><code>passwd</code></p>
<h3 id="bootloader-optional">Bootloader (optional)</h3>
<p>If you already have another bootloader installed from previous linux distros, do not install another one!</p>
<p>If not, check this <a href="https://wiki.archlinux.org/index.php/Category:Boot_loaders" target="_blank" rel="noopener">page</a> for information.</p>
<p>A simple procedure to set up new bootloader focusing on <strong>BIOS</strong> + <strong>GRUB</strong> is like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">pacman -S grub # install grub</div><div class="line">grub-install --target=i386-pc --recheck /dev/sda</div><div class="line">pacman -S os-prober # check existing OS on hard disks</div><div class="line">grub-mkconfig -o /boot/grub/grub.cfg # generate grub entries</div><div class="line">update-grub # (optional)</div></pre></td></tr></table></figure>
<h3 id="reboot">Reboot</h3>
<p><code>exit</code> <code>reboot</code></p>
<h3 id="some-post-installation-setup">Some post-installation setup</h3>
<p><strong>Install zsh</strong>:</p>
<p><code>pacman -S zsh</code></p>
<p><strong>Create new users</strong>:</p>
<p><code>useradd -m -g users -G wheel, video, audio, floppy, network, rfkill, scanner, storage, optical, power, uucp -s /bin/bash newusername</code> (note: do not use <code>/usr/bin/bash</code> as the official installation guide points out)</p>
<p><code>passwd newusername</code></p>
<p><strong>Install and configure sudo package</strong>:</p>
<p><code>pacman -S sudo</code></p>
<p><code>vi /etc/sudoers # edit the sudo conf file</code></p>
<p>uncomment the line to add all users belonging to the <code>wheel</code> group to the sudoers group</p>
<p><code>%wheel ALL=(ALL) ALL</code></p>
<h2 id="arch-installation-conclusion">Arch Installation Conclusion</h2>
<p>The previous sections describes <strong>how to install a valina Arch linux distro on a Ubuntu-Windows dual booting hard drive with existing UEFI GRUB bootloader</strong> and <strong>sharing the current bootloader and SWAP partitions</strong>.</p>
<p>The key is to <strong>mount existing UEFI boot partition and swap partition into the new Arch installation</strong>, and <strong>do NOT install additional bootloader</strong>.</p>
<p>Also remember to <strong>configure network</strong> for the new Arch <strong>before reboot</strong>.</p>
<h3 id="but-what-happens-if-you-forget-to-configure-internet">But what happens if you forget to configure internet</h3>
<p>and cannot connect to your WIFI in the new Arch? Don’t worry, just reboot into the live-usb, connect to wifi here and <code>mount /dev/sdxx /mnt</code> to install missing packages.</p>
<p>This is also the case if you forget or break other base packages in your new Arch system.</p>
<h2 id="reference">Reference</h2>
<ol style="list-style-type: decimal">
<li><a href="http://www.leyar.me/installation-of-archlinux/" target="_blank" rel="noopener">Archlinux 安装笔记 (highly recommened)</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Installation_guide" target="_blank" rel="noopener">Official Installation Guide (highly recommended)</a></li>
<li><a href="https://www.tecmint.com/arch-linux-installation-and-configuration-guide/" target="_blank" rel="noopener">Arch Linux Installation and Configuration on UEFI Machines</a></li>
<li><a href="http://blog.lucode.net/linux/archlinux-install-tutorial.html" target="_blank" rel="noopener">Archlinux 安装教程</a></li>
<li><a href="http://blog.lucode.net/linux/archlinux-install-tutorial.html" target="_blank" rel="noopener">ArchLinux 安装笔记</a></li>
</ol>
<p> </p>
<center>
<i>Now the valina Arch linux has been installed and you should be able to see its name appearing on the boot entries. But this new Linux does not have any graphical environment and everything you want to do has to be done in a cumbersome way with bash such as connecting to the internet. So, the next section is to install a dispalay manager, a desktop environment and a network manager with GUI that are suitable for a human to use. </i>
</center>
<p> </p>
<h1 id="install-kde-plasma-desktop-environment">Install KDE Plasma Desktop Environment</h1>
<h2 id="presequisite-xorg-x11-wayland-sddm-kde-plasma-etc">Presequisite: Xorg, X11, Wayland, SDDM, KDE, Plasma, etc</h2>
<p>So in order to install and run KDE Plasma successfully, we have to install some presequisite packages. These pacakges have similar names, a lot of alternatives, classified into ambiguous concepts; some of them even happen to be dependencies of each other.</p>
<p>Thus it is very confusing at first by just looking at some guides and Stackoverflow on how-to-install. These guides will likely to work, or not, depending on the default pacakges included in the valina Arch linux. Therefore, I researched a little more into those required packages, and attempts to generate a more thorough understanding both in concepts and methodology. If you see anything wrong or mis-leading, please let me know in the comment area. It’s still a learning process.</p>
<p><strong>So, let’s talk concepts</strong>.</p>
<p>What all those packages trying to do, is to contribute to a <strong>graphical user interface (GUI)</strong> on top of non-graphical Linux kernels. This interface connects user inputs (display, keyboard, audio) from each application that requires rendering service (<strong>client</strong>) and <strong>kernel</strong> instructions, which ultimately communicates with <strong>hardware</strong>. The interface follows standards, or <strong>protocals</strong>(<a href="%5Bref2%5D(https://www.intel.com/content/dam/www/public/us/en/documents/white-papers/inside-linux-graphics-paper.pdf)">ref</a>).</p>
<p>A <strong>display server</strong> is an application that provides services for creating this GUI. The <strong>Xorg</strong> server uses <strong>X11</strong> protocal, abbreviated also as <strong>X Window System</strong> or just <strong>X</strong>(<a href="https://wiki.gentoo.org/wiki/Xorg/Guide" target="_blank" rel="noopener">ref1</a>,<a href="http://blog.mecheye.net/2012/06/the-linux-graphics-stack/" target="_blank" rel="noopener">ref2</a>).</p>
<p>A <strong>window manager</strong> is a X client that controls the appearance and behaviour of the frames where other graphical applications are drawn. It can be part of a desktop environment or used standalone (<a href="https://wiki.archlinux.org/index.php/Window_manager" target="_blank" rel="noopener">ref</a>).It is sometimes a <strong>dependency</strong> for some display servers to function properly.</p>
<img src="/arch-triboot/Linux_graphical_scheme.png" title="Linux_graphical_scheme">
<p>A <strong>display manager/login manager</strong> provides a graphical interface for log-in screen. It is considered the <strong>first</strong> X client at the end of boot process. It replaces the default text terminal session. <strong>SDDM</strong> and <strong>LightDM</strong> are examples of it.</p>
<p>Finally, a <strong>Desktop Environment</strong> is a complete collection of not only a graphical interface, but also programs written with the same set of toolkit and rules(clients), and of many useful libraries. The usual examples of DE on Linux/Unit are Gnome, KDE, XFCE, Cinnamon etc.</p>
<p>A special note for X server: It not only manages the local GUI, but also provides remote management.</p>
<img src="/arch-triboot/X_graphical_scheme.png" title="X_graphical_scheme">
<p> </p>
<p><strong>Now, after clearing the concepts, let’s talk about installing the X server + KDE DE</strong>.</p>
<h2 id="install-kde-plasma">Install KDE Plasma</h2>
<ol style="list-style-type: decimal">
<li><p>Install proper <strong>graphic card driver</strong></p>
<p><code>pacman -S mesa xf86-video-intel # intel card</code></p>
<p><a href="https://wiki.archlinux.org/index.php/xorg#Driver_installation" target="_blank" rel="noopener">additional driver info</a></p></li>
<li><p>Install <strong>Xorg</strong></p>
<p><code>pacman -S xorg--server xorg-xinit xorg-xauth xterm</code></p>
<p><a href="https://wiki.archlinux.org/index.php/xorg#Driver_installation" target="_blank" rel="noopener">xorg-server</a> provides the x service.</p>
<p><a href="https://wiki.archlinux.org/index.php/Xinit" target="_blank" rel="noopener">xinit</a> provides easier startup configuration at <code>~/.xinitrc</code>.</p>
<p><a href="https://wiki.archlinux.org/index.php/Xterm" target="_blank" rel="noopener">xterm</a> might be needed for proper xorg function (not 100% sure).</p>
<p><a href="http://jlk.fjfi.cvut.cz/arch/manpages/man/xauth.1.en" target="_blank" rel="noopener">xauth</a> is required for xsession authentication.</p>
<p><code>Config file: /etc/X11/xinit/xinitrc</code></p></li>
<li><p>Install <strong>sddm</strong> display Manager</p>
<p><code>pacman -S sddm sddm-kcm</code></p></li>
<li><p>Enable <code>sddm</code> for graphical login</p>
<ol style="list-style-type: decimal">
<li><p><code>systemctl enable sddm</code></p></li>
<li><p><code>/etc/systemd/system/display-manager.service: symbolic link to /usr/lib/systemd/system/sddm.service</code></p></li>
</ol></li>
<li><p>Install <strong>Plasma DE</strong></p>
<p><code>pacman -S plasma-meta</code></p></li>
<li><p>Configure <code>sddm</code> for Plasma</p></li>
</ol>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sddm config file: /etc/sddm.conf</div><div class="line">comment out UserAuthFile=.Xauthority</div></pre></td></tr></table></figure></p>
<p><code>remove ~/.Xauthority</code></p>
<ol start="7" style="list-style-type: decimal">
<li><p>Install <strong>network manager</strong></p>
<p><code>pacman -S networkmanager</code></p></li>
<li><p>Reboot</p></li>
</ol>
<h1 id="bonus1-install-chinese-input-method-fctix">Bonus1: Install Chinese Input Method (Fctix)</h1>
<ol style="list-style-type: decimal">
<li>Install <strong>Fctix</strong></li>
<li>Install <strong>Fctix-googlepinyin</strong></li>
<li><p>Add entries to <strong>~/.xprofile</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">export QT_IM_MODULE=fcitx</div><div class="line">export GTK_IM_MODULE=fcitx</div></pre></td></tr></table></figure></li>
<li>Log out and log in</li>
<li><p>Set <code>default keyboard layout</code> to <code>US</code> in <code>Configure</code></p></li>
</ol>
<h1 id="bonus2-install-zshvim-configuration">Bonus2: Install zsh/vim configuration</h1>
<p>The <strong>ultimate vim vimrc</strong> at <a href="https://github.com/spf13/spf13-vim" target="_blank" rel="noopener">spf13/spf13-vim</a></p>
<p>The <strong>Oh My Zsh framework</strong> at<a href="https://github.com/robbyrussell/oh-my-zsh" target="_blank" rel="noopener">robbyrussell/oh-my-zsh</a></p>
<p><em>Small tricks on <code>~/.vimrc</code></em>:</p>
<ol style="list-style-type: decimal">
<li>Allow mouse copy: change <code>set mouse=a</code> to <code>set mouse=r</code></li>
<li>Toggle line-number: add <code>nnoremap &lt;F2&gt; :set nonumber!&lt;CR&gt;</code></li>
<li>Code folding shortcut: <code>&lt;leader&gt;f&lt;level&gt;</code> (example: <code>&lt;leader&gt;f0</code>)</li>
<li>The <code>&lt;leader&gt;</code> key is mapped to <code>,</code></li>
</ol>
]]></content>
      
        <categories>
            
            <category> programming </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Arch </tag>
            
            <tag> Linux </tag>
            
            <tag> UEFI </tag>
            
            <tag> multiboot </tag>
            
            <tag> KDE Plasma </tag>
            
            <tag> Zsh </tag>
            
            <tag> Vim </tag>
            
            <tag> Linux Graphic Stack </tag>
            
            <tag> sddm </tag>
            
            <tag> Xorg </tag>
            
            <tag> X11 </tag>
            
            <tag> Fctix </tag>
            
            <tag> display server </tag>
            
            <tag> window manager </tag>
            
            <tag> display manager </tag>
            
            <tag> Desktop Environment </tag>
            
            <tag> Linux Partition </tag>
            
            <tag> linux Chinese input </tag>
            
            <tag> arch network configuration </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Search Engine Optimization for Hexo-next site]]></title>
      <url>/hexo-seo/</url>
      <content type="html"><![CDATA[<p>This is an article publised by <a href="http://www.ehcoo.com/seo.html" target="_blank" rel="noopener">RuJia</a> to set up simple SEO improvement on Hexo supported website. It targeted both on Google Search Engine and Baidu Search (an equivalent in China). It’s simple and elegant; therefore I translated into English for my own reference and hoping to help new bloggeres. <a id="more"></a></p>
<img src="/hexo-seo/001.bmp">
<h1 id="optimizing-title">Optimizing title</h1>
<p>All SEO about is to make it easy for search engine to find your website by keywords of different priorities. For website titles, the optimization keys are <strong>important tags first, using pipes to separate and being short, precise and descriptive</strong>. The goal is to have a human readable title that is also easily understood by computers.</p>
<blockquote>
<p>For more detailed explanation, visit <a href="https://searchenginewatch.com/sew/how-to/2154469/write-title-tags-search-engine-optimization" target="_blank" rel="noopener">this</a> site.</p>
</blockquote>
<p>To optimize, edit this file: <code>website/themes/next/layout/index.swig</code></p>
<p>Change line: <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;% block title %&#125;&#123;&#123; config.title &#125;&#125;&#123;% if theme.index_with_subtitle and config.subtitle %&#125; - &#123;&#123;config.subtitle &#125;&#125;&#123;% endif %&#125;&#123;% endblock %&#125;</div></pre></td></tr></table></figure></p>
<p>To: <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;% block title %&#125;&#123;&#123; theme.keywords &#125;&#125; - &#123;&#123; config.title &#125;&#125;&#123;% if theme.index_with_subtitle and config.subtitle %&#125; - &#123;&#123;config.subtitle &#125;&#125;&#123;% endif %&#125;&#123;&#123; theme.description &#125;&#125;&#123;% endblock %&#125;</div></pre></td></tr></table></figure></p>
<p><em>There is now an option to turn on title seo in <a href="https://github.com/iissnan/hexo-theme-next/releases" target="_blank" rel="noopener">Next</a>’s configuration file. However, the title disappears on the index page. It’s probably going to be fixed som time in the future, but for now, I would just hand-edit the file.</em></p>
<h1 id="permalinks">Permalinks</h1>
<p>The default permalink format is <code>::year::month::day::postname</code>, which is very annoying and seo-unfriendly. It is recommended to change it to <code>permalink: :title/</code> in the <code>_config.yml</code> file.</p>
<p>Notice the extra space in-between and the <strong>two</strong> colons.</p>
<h1 id="use-sitemap">Use sitemap</h1>
<blockquote>
<p>Sitemaps are used by search engines such as Google to quickly find all your web <strong>pages</strong> not just your website. It is like a quick guide to all your rooms in your house. Because Google ranks webpages instead of website, it is extremely helpful to have such as guide on your site for Google to crawl.</p>
</blockquote>
<p>Plus, if you site is newly online and have dynamically generated pages, a sitemap helps both Google and site visitors understand better your website structure.</p>
<p>Sitemaps are usually placed directly under your website directory. the <code>/</code> and under the name <code>sitemap.xml</code>.</p>
<p>For Hexo generated site, there are two plugins to help generate sitemaps:</p>
<p><code>npm install hexo-generator-sitemap --save</code></p>
<p><code>npm install hexo-generator-baidu-sitemap --save</code></p>
<p>The latter is for Baidu.com, a Google equivalent search engine in China.</p>
<p>After you install the two plug-ins, add the following lines to your <code>_config.yml</code> file:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">sitemap:</span></div><div class="line"><span class="attr">  path:</span> <span class="string">sitemap.xml</span></div><div class="line"><span class="attr">baidusitemap:</span></div><div class="line"><span class="attr">  path:</span> <span class="string">baidusitemap.xml</span></div></pre></td></tr></table></figure>
<p>Also edit <code>url</code> in the configuration file. Note that if your website is hosted on Github page (free version), prefix <code>https://</code> in front of your domain name, otherwise Google will not recognize urls generated.</p>
<p><code>url: url: https://yoursite.github.io</code></p>
<p>Now, run <code>hexo g</code>. You should be able to see <code>sitemap.xml</code> and <code>baidusitemap.xml</code> under your <code>\public</code> folder.</p>
<h1 id="set-up-robots.txt">Set up robots.txt</h1>
<blockquote>
<p>Unlike sitemaps, <code>robots.txt</code> is used to defend your content against web crawls, or robots.</p>
<p>By default, search engines and web crawls will crawl <strong>all</strong> your content on your website. However, you could deny this behavior by add a <code>robots.txt</code> under your website’s root directory and using codes like <code>Allow</code> and <code>Disallow</code> to control the access.</p>
</blockquote>
<p>Here is the default example and should be placed under your <code>source</code> directory.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"># hexo robots.txt</div><div class="line">User-agent: *</div><div class="line"></div><div class="line">Allow: /</div><div class="line">Allow: /archives/</div><div class="line">Allow: /categories/</div><div class="line">Allow: /tags/</div><div class="line">Allow: /about-me/</div><div class="line"></div><div class="line">Disallow: /vendors/</div><div class="line">Disallow: /js/</div><div class="line">Disallow: /css/</div><div class="line">Disallow: /fonts/</div><div class="line">Disallow: /vendors/</div><div class="line">Disallow: /fancybox/</div><div class="line"></div><div class="line">Sitemap: https://yoursite/sitemap.xml</div><div class="line">Sitemap: https://yoursite/baidusitemap.xml</div></pre></td></tr></table></figure>
<p>The last two lines are to add the sitemaps for search engines. You can directly upload it to <code>Google Search Console</code> instead of adding them here.</p>
<h1 id="google-search-optimization">Google search optimization</h1>
<ol style="list-style-type: decimal">
<li>Register for Google Search Console <img src="/hexo-seo/gseo1.bmp"></li>
<li>Add your website <img src="/hexo-seo/gseo2.bmp"></li>
<li>Follow steps to <em>verify</em> your website. I used the <code>HTML tag</code>. To do so, copy the provided string to your <code>themes/next/layout/_partials/head.swig</code>. <img src="/hexo-seo/gseo3.bmp"></li>
<li>Upload your udpated website. Wait for a while.</li>
<li>Test your <code>robots.txt</code> <img src="/hexo-seo/gseo4.bmp"></li>
<li>Submit your sitemaps <img src="/hexo-seo/gseo5.bmp"></li>
</ol>
<p>If everything goes without errors, your Google SEO is done. Allow google few days to start indexing webpages. You can also manually submit indexing requests by using the <code>crawl -&gt; Fetch as Google</code> function on the left panel. <img src="/hexo-seo/gseo6.bmp"></p>
<h1 id="baidu-search-optimization">Baidu search optimization</h1>
<p>It is the same procedure to optimize for Baidu.com search engine. You will need to register for a Baidu account with real name and a Chinese cell phone number.</p>
<h1 id="keywords">Keywords</h1>
<p>Keywords is another important seo part in your website’s <code>meta-tag</code> region. The <code>meta-tag</code> contains descriptive information about your websites that feeds search engine and web crawlers. The website title is part of this meta data.</p>
<ol style="list-style-type: decimal">
<li>Add keywords to your <code>_config.yml</code> by editing <code>keywords: key1, key2, key3</code>. Notice the <strong>space</strong> and <strong>,</strong> separator.</li>
<li>Add keywords to your posts’ meta data by adding <code>keywords:</code> and <code>description:</code>. Notice the <strong>space</strong>.</li>
</ol>
<h1 id="add-nofollow-tag-to-exturl">Add “nofollow” tag to exturl</h1>
<blockquote>
<p>“Nofollow” provides a way for webmasters to tell search engines “Don’t follow links on this page” or “Don’t follow this specific link.” by <a href="https://support.google.com/webmasters/answer/96569?hl=en" target="_blank" rel="noopener">Google</a>.</p>
</blockquote>
<p>It basically ask search engines not to include any outgoing links on your website tagged with “nofollow” in order to <strong>1) avoid untrusted content</strong>, <strong>2) Paid/advertised links</strong>, <strong>3) Unimportant links</strong>. It all contributes to up-ranking your useful links and leveling your website’s search priorities.</p>
<p>Basically, you can add this <code>rel=&quot;external nofollow&quot;</code> tag to any links of your discretion. In the default <em>Next</em> theme files, there are few outgoing advertising links.</p>
<p>In the <code>themes/next/layout/_partials/footer.swig</code>, change the two lines</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;&#123; __(&apos;footer.powered&apos;, &apos;&lt;a class=&quot;theme-link&quot; href=&quot;http://hexo.io&quot;&gt;Hexo&lt;/a&gt;&apos;) &#125;&#125;</div><div class="line"></div><div class="line">&lt;a class=&quot;theme-link&quot; href=&quot;https://github.com/iissnan/hexo-theme-next&quot;&gt;</div></pre></td></tr></table></figure>
<p>to</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;&#123; __(&apos;footer.powered&apos;, &apos;&lt;a class=&quot;theme-link&quot; href=&quot;http://hexo.io&quot; rel=&quot;external nofollow&quot;&gt;Hexo&lt;/a&gt;&apos;) &#125;&#125;</div><div class="line"></div><div class="line">&lt;a class=&quot;theme-link&quot; href=&quot;https://github.com/iissnan/hexo-theme-next&quot; rel=&quot;external nofollow&quot;&gt;</div></pre></td></tr></table></figure>
<p>And in <code>themes/next/layout/_macro/sidebar.swig</code>, change the two lines</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a href=&quot;&#123;&#123; link &#125;&#125;&quot; target=&quot;_blank&quot;&gt;&#123;&#123; name &#125;&#125;&lt;/a&gt;</div></pre></td></tr></table></figure>
<p>to <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;a href=&quot;&#123;&#123; link &#125;&#125;&quot; target=&quot;_blank&quot; rel=&quot;external nofollow&quot;&gt;&#123;&#123; name &#125;&#125;&lt;/a&gt;</div><div class="line"></div><div class="line">&lt;a href=&quot;http://creativecommons.org/licenses/&#123;&#123; theme.creative_commons &#125;&#125;/4.0&quot; class=&quot;cc-opacity&quot; target=&quot;_blank&quot; rel=&quot;external nofollow&quot;&gt;</div></pre></td></tr></table></figure></p>
<h1 id="acknowledgement">Acknowledgement</h1>
<p>This article is based on <a href="http://www.ehcoo.com/seo.html" target="_blank" rel="noopener">this</a> Chinese article. It is merely a reproduction and translation. All effort goes to the original author.</p>
<p>For more readings on SEO, refer to <a href="https://support.google.com/webmasters/answer/40349?hl=en" target="_blank" rel="noopener">Google Search Console</a> documentation and its <a href="https://static.googleusercontent.com/media/www.google.com/en//webmasters/docs/search-engine-optimization-starter-guide.pdf" target="_blank" rel="noopener">Starter Guide</a></p>
<p>Thanks for reading.</p>
]]></content>
      
        <categories>
            
            <category> programming </category>
            
        </categories>
        
        
        <tags>
            
            <tag> webdev </tag>
            
            <tag> seo </tag>
            
            <tag> google-webmaster </tag>
            
            <tag> hexo </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Custmoizing Hexo blog theme-Next and Swiper]]></title>
      <url>/next-customization/</url>
      <content type="html"><![CDATA[<p>The first thing after moving into a new home is thinking about decoration. We want something more personal, something that represents our taste, style and preference. Or we just want the style that fits the theme, whether it’s sci-fi, techie, or kawaii. This is a scratch note on decorating a Hexo-based blog. It is based on some amazing guides from others. My effort is merely an application and translation.</p>
<a id="more"></a>
<h1 id="customization-with-style-sheet">Customization with Style Sheet</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Theme Version: 5.1.2</div><div class="line"></div><div class="line">Scheme: Gemni</div><div class="line"></div><div class="line">Languges: Less CSS, CSS, YAML, js</div><div class="line"></div><div class="line">! CSS modification will vary depending on the schem![003](next-customization/003.png)e you choose and the theme version</div></pre></td></tr></table></figure>
<blockquote>
<p>Recommended reading</p>
<p><a href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html" target="_blank" rel="noopener">打造个性超赞博客Hexo+NexT+GithubPages的超深度优化</a></p>
<p><a href="http://mashirosorata.vicp.io/HEXO-NEXT%E4%B8%BB%E9%A2%98%E4%B8%AA%E6%80%A7%E5%8C%96%E9%85%8D%E7%BD%AE.html" target="_blank" rel="noopener">HEXO+NEXT主题个性化配置</a></p>
</blockquote>
<img src="/next-customization/003.png">
<img src="/next-customization/002.bmp">
<img src="/next-customization/001.bmp">
<h2 id="change-sidebar-position">Change Sidebar Position</h2>
<p>It used to be part of customization codes but thanks to recent theme update, it now becomes a default option. For more details, just look inside your <code>_config.yml</code>.</p>
<h2 id="custom-avatar-avatar-animation">Custom Avatar + Avatar Animation</h2>
<p>Wondering about having animation on your profile image? It’s in the <code>site-author-image</code> section.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="string">//</span> <span class="string">_config.yml</span></div><div class="line"></div><div class="line"><span class="attr">avatar:</span> <span class="string">image_url</span></div><div class="line"></div><div class="line"><span class="string">//</span> <span class="string">components/sidebar/sidebar-author.styl</span></div><div class="line"></div><div class="line"><span class="string">.site-author-image</span> <span class="string">&#123;</span></div><div class="line"><span class="attr">    border:</span> <span class="number">2</span><span class="string">px</span> <span class="string">solid</span> <span class="string">rgb(255,</span> <span class="number">255</span><span class="string">,</span> <span class="number">255</span><span class="string">);</span></div><div class="line"><span class="attr">    border-radius:</span> <span class="number">80</span><span class="string">px;</span></div><div class="line"><span class="attr">    transition:</span> <span class="string">transform</span> <span class="number">1.0</span><span class="string">s</span> <span class="string">ease-out;</span></div><div class="line"><span class="string">&#125;</span></div><div class="line"></div><div class="line"><span class="attr">img:</span><span class="string">hover</span> <span class="string">&#123;</span></div><div class="line"><span class="attr">    transform:</span> <span class="string">rotateZ(360deg);</span></div><div class="line"><span class="string">&#125;</span></div><div class="line"></div><div class="line"><span class="string">.posts-expand</span> <span class="string">.post-body</span> <span class="attr">img:hover</span> <span class="string">&#123;</span></div><div class="line"><span class="attr">    transform:</span> <span class="string">initial;</span></div><div class="line"><span class="string">&#125;</span></div></pre></td></tr></table></figure>
<h2 id="sidebar-background-and-text-color">Sidebar Background and Text Color</h2>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// Custom location: themes/next/source/css/_custom/custom.styl</div><div class="line">// Original file: themes/next/source/css/_schmes/Pisces/_sidebar.styl:</div><div class="line">// 		(for @Gemni, _sidebar.styl is imported from @Pisces)</div><div class="line">  </div><div class="line"><span class="selector-class">.sidebar-inner</span>&#123;</div><div class="line">      <span class="attribute">background</span>:<span class="built_in">url</span>(image_path);  </div><div class="line">      p,span,a &#123;color: $orange; // text color inside sidebar  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="background-and-transparency">Background and transparency</h2>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// _schemes/Gemni/index.styl</div><div class="line"></div><div class="line"><span class="selector-tag">body</span>&#123;</div><div class="line">        <span class="attribute">background</span>:<span class="built_in">url</span>(/images/bwtvyjsuhbe.jpg);</div><div class="line">        <span class="attribute">background-size</span>:cover;</div><div class="line">        <span class="attribute">background-repeat</span>:no-repeat;</div><div class="line">        <span class="attribute">background-attachment</span>:fixed;</div><div class="line">        <span class="attribute">background-position</span>:center;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// _common/components/_post/post.styl</div><div class="line"><span class="selector-class">.post-block</span> &#123;</div><div class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(255,255,255,0.8);</div><div class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">! <span class="selector-tag">by</span> <span class="selector-tag">default</span>, <span class="selector-tag">content-wrap</span> <span class="selector-tag">is</span> <span class="selector-tag">set</span> <span class="selector-tag">to</span> <span class="selector-tag">transparent</span></div></pre></td></tr></table></figure>
<h2 id="sidebar-properties">Sidebar properties</h2>
<p>In <code>Gemni</code> scheme, sidebar is separated into two parts: <code>meta + menu</code> and <code>avatar + toc</code>. The <code>meta + menu</code> region holds site name and menu; the <code>avatar + toc</code> region switch between the site information and a <code>toc</code> if available.</p>
<h3 id="meta-menu">meta + menu</h3>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">// css/_schemes/Pisces/_brand.styl</div><div class="line"></div><div class="line">// site-meta background</div><div class="line"><span class="selector-class">.site-meta</span> &#123;</div><div class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(45deg, #F79533 0%, #F37055 15%, #EF4E7B 30%, #A166AB 44%, #5073B8 58%, #1098AD     72%, #07B39B 86%, #6DBA82 100%);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// _schemes/Pisces/_menu.styl</div><div class="line"></div><div class="line">// menu background</div><div class="line"><span class="selector-class">.site-nav</span> &#123;</div><div class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(image_path) or $color_code;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// menu hover</div><div class="line"><span class="selector-class">.menu</span> <span class="selector-class">.menu-item</span> &#123;</div><div class="line">  &amp;:hover&#123; // hover transition effects</div><div class="line">    background:$color_code;</div><div class="line">    color: $orange; // will inherint a &#123;&#125; if not set</div><div class="line">    border-bottom-color:$rgba(299,99,0,0.3);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// menu dot</div><div class="line"><span class="selector-class">.menu-item-active</span> <span class="selector-tag">a</span> &#123;</div><div class="line">  @extend .menu .menu-item a:hover;</div><div class="line">  // optional</div><div class="line">  // .menu-item-icon &#123;color:$color_code&#125;</div><div class="line">  </div><div class="line">  &amp;:after &#123; // the tiny square dot at the right of each menu item</div><div class="line">    background-color: $orange;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="avatar-toc">avatar + toc</h3>
<h4 id="sidebar-background-description">sidebar background + description</h4>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// _common/components/sidebar/sidebar-nav.styl</div><div class="line"><span class="selector-class">.sidebar-inner</span> &#123;</div><div class="line">  <span class="attribute">background</span>:<span class="built_in">url</span>(/images/sidebar.jpg);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.site-author-name</span> &#123;</div><div class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>($theme-color, $transparency-sidebar);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.site-state</span> &#123;</div><div class="line">  p,span,a &#123;color: rgba($theme-color, $transparency-sidebar);&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.site-state-item</span> &#123;</div><div class="line">  p,span,a &#123;color: rgba($theme-color, $transparency-sidebar);&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">! <span class="selector-tag">and</span> <span class="selector-tag">more</span> <span class="selector-tag">properties</span>: <span class="selector-tag">to</span> <span class="selector-tag">be</span> <span class="selector-tag">added</span></div></pre></td></tr></table></figure>
<h4 id="sidebar-toc">sidebar toc</h4>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">// _common/components/sidebar/sidebar-nav.styl</div><div class="line"></div><div class="line">// sidebar-toc title</div><div class="line"><span class="selector-class">.sidebar-nav</span> <span class="selector-tag">li</span> &#123;</div><div class="line">  &amp;:hover &#123; color: rgba($theme-color, $transparency-sidebar); &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.sidebar-nav</span> <span class="selector-class">.sidebar-nav-active</span> &#123;</div><div class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>($theme-color, $transparency-sidebar);</div><div class="line">  <span class="attribute">border-bottom-width</span>: <span class="number">1.5px</span>;</div><div class="line">  <span class="attribute">border-bottom-color</span>: <span class="built_in">rgba</span>($theme-color, $transparency-sidebar);</div><div class="line"></div><div class="line">  &amp;:hover &#123; color: rgba($theme-color,$transparency-sidebar); &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// _common/components/sidebar/sidebar-toc.styl</div><div class="line"></div><div class="line">// sidebar-toc link</div><div class="line"><span class="selector-class">.post-toc</span> <span class="selector-tag">ol</span> <span class="selector-tag">a</span> &#123;</div><div class="line">    <span class="attribute">color</span>: $black-light;</div><div class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#999</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.post-toc</span> <span class="selector-tag">ol</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">color</span>: $theme-color;</div><div class="line">    <span class="attribute">border-bottom-color</span>: $theme-color;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// sidebar-toc active link</div><div class="line"><span class="selector-class">.post-toc</span> <span class="selector-class">.nav</span> <span class="selector-class">.active</span> &gt; <span class="selector-tag">a</span> &#123;</div><div class="line">    <span class="attribute">color</span>: $theme-color;</div><div class="line">    <span class="attribute">border-bottom-color</span>: <span class="built_in">rgba</span>($theme-color,$transparency-sidebar);</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.post-toc</span> <span class="selector-class">.nav</span> <span class="selector-class">.active</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">color</span>: $theme-color;</div><div class="line">    <span class="attribute">border-bottom-color</span>: <span class="built_in">rgba</span>($theme-color,$transparency-sidebar);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="avatar-animation">avatar animation</h3>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// _common/components/sidebar/sidebar-author.styl</div><div class="line"></div><div class="line"><span class="selector-class">.site-author-image</span> &#123;</div><div class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="built_in">rgb</span>(255, 255, 255);</div><div class="line">    <span class="attribute">border-radius</span>: <span class="number">80px</span>;</div><div class="line">    <span class="attribute">transition</span>: transform <span class="number">1.0s</span> ease-out;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(360deg);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">transform</span>: initial;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="post-title-post-nav-and-post-tag">Post-title, Post-nav and Post-tag</h2>
<p>Post-title is located at <code>post/post-title.styl</code></p>
<p>Post-nav and post-tag are basically hyper-links, formatted in <code>post/post-nav.styl &amp; post-tag.styl</code></p>
<p>A snippet of related <code>layout</code> file is shown:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// layout/page.swig</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"posts"</span> <span class="attr">class</span>=<span class="string">"posts-expand"</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tag-cloud-tags"</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>The customization snippet is as:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">// post title &amp; title-link: components/post/post-title.styl</div><div class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-title</span> &#123;</div><div class="line">  <span class="attribute">height</span>: <span class="number">1px</span>;</div><div class="line">  <span class="attribute">color</span>: $orange;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-title-link</span> &#123;</div><div class="line">  <span class="attribute">color</span>: $orange;</div><div class="line"></div><div class="line">  &amp;::before &#123;</div><div class="line">    background-color: $orange;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// components/post/post-nav.styl</div><div class="line">// components/post/post-tag.styl</div><div class="line">// this is default, can be changed</div><div class="line"></div><div class="line"><span class="selector-class">.post-nav-item</span> <span class="selector-tag">a</span> &#123;</div><div class="line">    <span class="attribute">color</span>: $link-color;</div><div class="line">  &amp;:hover &#123;</div><div class="line">    color: $link-hover-color;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="custom-variable">Custom variable</h2>
<blockquote>
<p>The css variables are loaded before _custom/custm.styl so if you want to style your website based on some variables, you need to do it in /css/_variable/custm.styl</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">// There are many variable defined across the theme's stylesheets</div><div class="line">// They are referred by many style declarations</div><div class="line">// Original file: /css/_variables/base.styl</div><div class="line">// Custom location: /css/_variable/custom.styl</div><div class="line"></div><div class="line">// Global link color</div><div class="line">$link-color                   = $black-light</div><div class="line">$link-hover-color             = $orange</div><div class="line">$link-decoration-color        = $grey-light</div><div class="line">$link-decoration-hover-color  = $red</div><div class="line"></div><div class="line">// Global button variables</div><div class="line">$btn-font-weight                = normal</div><div class="line"></div><div class="line">$btn-default-radius             = 0 </div><div class="line">$btn-default-bg                 = $orange</div><div class="line">$btn-default-color              = white</div><div class="line">$btn-default-font-size          = 14px</div><div class="line">$btn-default-border-width       = 2px </div><div class="line"></div><div class="line">$btn-default-border-color       = $orange</div><div class="line">$btn-default-hover-bg           = white</div><div class="line">$btn-default-hover-color        = $orange</div><div class="line">$btn-default-hover-border-color = $orange</div></pre></td></tr></table></figure>
<h2 id="tag-cloud">Tag-Cloud</h2>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// layout/page.swig</div><div class="line">// so you can see the color is set inside the layout file</div><div class="line"></div><div class="line">1. Modify the /layout/page.swig to choose your color gradiet</div><div class="line">&#123;&#123; tagcloud(&#123;min_font: 12, max_font: 30, amount: 300, color: true, start_color: '#ccc', end_color:'#111'&#125;) &#125;&#125;</div><div class="line"></div><div class="line">2. Add custom css to /_custom/custom.styl</div><div class="line"><span class="selector-class">.tag-cloud</span> <span class="selector-tag">a</span> &#123;</div><div class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(5, 147, 211);</div><div class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(5, 147, 211);                                                                         </div><div class="line">    <span class="attribute">text-decoration</span>: none;</div><div class="line"></div><div class="line">    &amp;:hover &#123;</div><div class="line">    color: $theme-color;</div><div class="line">    <span class="selector-tag">border-bottom</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-tag">rgb</span>(255, 118, 0);</div><div class="line">    <span class="selector-tag">text-decoration</span>: <span class="selector-tag">none</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>For color gradient, you can reference <a href="https://uigradients.com/" target="_blank" rel="noopener">this</a> website.</p>
<h2 id="hyper-link">Hyper-link</h2>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// css/_common/scaffolding/base.styl</div><div class="line"></div><div class="line"><span class="selector-tag">a</span> &#123;</div><div class="line">  <span class="attribute">color</span>:$black-light;</div><div class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid $grey-dark;</div><div class="line">  <span class="attribute">word-wrap</span>: break-word;</div><div class="line"></div><div class="line">  &amp;:hover&#123;</div><div class="line">    color:$theme-color;</div><div class="line">    border-bottom-color:$theme-color;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="archive-timeline-style">Archive: Timeline Style</h2>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">// _common/components/post/post-collapse.styl</div><div class="line"></div><div class="line">// timeline</div><div class="line"><span class="selector-class">.posts-collapse</span><span class="selector-pseudo">::after</span> &#123;</div><div class="line">    <span class="attribute">margin-left</span>: -<span class="number">2px</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(255, 118, 0);</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(180deg,#f79533 0,#f37055 15%,#ef4e7b 30%,#a166ab 44%,#5073b8 58%,#1098ad 72%,    #07b39b 86%,#6dba82 100%);</div><div class="line">&#125;</div><div class="line">// decoration dot on timeline</div><div class="line"><span class="selector-class">.posts-collapse</span> <span class="selector-class">.collection-title</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(255, 255, 255);</div><div class="line">&#125;</div><div class="line">// first decoration dot on timeline</div><div class="line"><span class="selector-class">.page-archive</span> <span class="selector-class">.posts-collapse</span> <span class="selector-class">.archive-move-on</span> &#123;</div><div class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</div><div class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(255, 255, 255);</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(0, 0, 0, 0.5);</div><div class="line">&#125;</div><div class="line">// active decoration dot</div><div class="line"><span class="selector-class">.posts-collapse</span> <span class="selector-class">.post-header</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(255, 255, 255);</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.posts-collapse</span> <span class="selector-class">.post-header</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>($theme-color, $transparency-sidebar);                                                             </div><div class="line">&#125;</div><div class="line"></div><div class="line">// timeline title</div><div class="line"><span class="selector-class">.posts-collapse</span> <span class="selector-class">.post-title</span> <span class="selector-tag">a</span> &#123;</div><div class="line">    <span class="attribute">color</span>: $black-light;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.posts-collapse</span> <span class="selector-class">.post-title</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>($theme-color, $transparency-sidebar);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// timeline dotted line underneath title</div><div class="line"><span class="selector-class">.posts-collapse</span> <span class="selector-class">.post-header</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">border-bottom-color</span>: <span class="built_in">rgba</span>($theme-color, $transparency-sidebar);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.collection-title</span> <span class="selector-tag">h1</span> &#123;</div><div class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(90deg,#f79533 0,#f37055 15%,#ef4e7b 30%,#a166ab 44%,#5073b8 58%,#1098ad 72%,       #07b39b 86%,#6dba82 100%);</div><div class="line">  <span class="attribute">color</span>: white;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="button-style">Button style</h2>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//_common/components/post/post-button.styl</div><div class="line"></div><div class="line">// post button (readmore)</div><div class="line"><span class="selector-class">.post-button</span> &#123;</div><div class="line">  .btn &#123;</div><div class="line">    color: rgba($theme-color, $transparency-normal);</div><div class="line">    <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(255,255,255,0<span class="selector-class">.7</span>);</div><div class="line">    border: 1.5px solid rgba($theme-color, $transparency-normal);</div><div class="line">    <span class="selector-tag">border-radius</span>: 5<span class="selector-tag">px</span></div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">border</span>: <span class="number">1.5px</span> solid <span class="built_in">rgba</span>(255,255,255,0);</div><div class="line">      <span class="attribute">background</span>: <span class="built_in">rgba</span>($theme-color, $transparency-normal);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="back-to-top-button">Back-to-top button</h2>
<p>It is set to be somewhat transparent, so whatever you change here will become a little transparent.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">.back-to-top &#123;</div><div class="line">    right: 10px;</div><div class="line">    padding-right: 5px;</div><div class="line">    padding-left: 5px;</div><div class="line">    padding-top: 2.5px;</div><div class="line">    padding-bottom: 2.5px;</div><div class="line">    background: $theme-color;</div><div class="line">    border-radius: 5px;</div><div class="line">    box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.35);</div><div class="line">&#125;</div><div class="line">.back-to-top.back-to-top-on &#123;</div><div class="line">    bottom: 10px;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="local-search">Local Search</h2>
<img src="/next-customization/005.bmp">
<p>Local search needs to be installed first:</p>
<p><code>npm install hexo-generator-search --save</code></p>
<p>Then, enable it inside <code>_config.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="attr">local_search:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">true</span></div><div class="line">  <span class="comment"># if auto, trigger search by changing input</span></div><div class="line">  <span class="comment"># if manual, trigger search by pressing enter key or search button</span></div><div class="line"><span class="attr">  trigger:</span> <span class="string">auto</span></div><div class="line">  <span class="comment"># show top n results per article, show all results by setting to -1</span></div><div class="line"><span class="attr">  top_n_per_article:</span> <span class="number">1</span></div></pre></td></tr></table></figure>
<p>Configure the style by</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">// _common/components/third-party/localsearch.styl</div><div class="line"></div><div class="line"><span class="selector-class">.local-search-popup</span> <span class="selector-class">.search-icon</span>, <span class="selector-class">.local-search-popup</span> <span class="selector-class">.popup-btn-close</span> &#123;</div><div class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(255, 118, 0);</div><div class="line">    <span class="attribute">margin-top</span>: <span class="number">7px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.local-search-popup</span> <span class="selector-class">.local-search-input-wrapper</span> <span class="selector-tag">input</span> &#123;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">9px</span> <span class="number">0</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">21px</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(255, 255, 255);</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.local-search-popup</span> <span class="selector-class">.popup-btn-close</span> &#123;</div><div class="line">    <span class="attribute">border-left</span>: none;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="table-style">Table Style</h2>
<p>Table style depends more on the render you use. For example, you will get different width distribution depending on whether you are using the default <code>markdown</code> render or something more advanced such as <code>pandoc</code>. However you can always change some more general styles such as background color with <code>css</code>.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">table</span> &#123;</div><div class="line">    //background-color: rgba(255, 255, 255, 0.9);</div><div class="line">    background-color: rgba($theme-color, $transparency-normal);</div><div class="line">    <span class="selector-tag">color</span>: <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.9</span>);</div><div class="line">    <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-tag">rgba</span>(221, 221, 221, 0<span class="selector-class">.9</span>);</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">table</span>&gt;<span class="selector-tag">tbody</span>&gt;<span class="selector-tag">tr</span><span class="selector-pseudo">:nth-of-type(odd)</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(240, 240, 240, 0.9);</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">table</span>&gt;<span class="selector-tag">tbody</span>&gt;<span class="selector-tag">tr</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(245, 245, 245, 0.9);</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">th</span>, <span class="selector-tag">td</span> &#123;</div><div class="line">    <span class="attribute">border-bottom</span>: <span class="number">3px</span> solid <span class="built_in">rgba</span>(221, 221, 221, 0.9);</div><div class="line">    <span class="attribute">border-right</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(238, 238, 238, 0.9);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="complete-custom-style-sheet">Complete custom style sheet</h2>
<p>Here I attach my custom style sheet for reference.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div></pre></td><td class="code"><pre><div class="line">// custom variable</div><div class="line">$theme-color                  = $orange</div><div class="line">$theme-color-light            = rgba($orange, 0.5)</div><div class="line">$transparency-normal          = 0.8</div><div class="line">$transparency-sidebar					= 0.9</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*** BACKGROUND, HEADBAND ***/</span></div><div class="line"></div><div class="line"><span class="selector-class">.headband</span> &#123;</div><div class="line">    <span class="attribute">height</span>: <span class="number">1.5px</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(255, 255, 255, 0);</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(90deg, #F79533 0%, #F37055 15%, #EF4E7B 30%, #A166AB 44%, #5073B8 58%, #1098AD 72%, #07B39B 86%, #6DBA82 100%);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// background + transparency</div><div class="line"><span class="selector-tag">body</span>&#123;</div><div class="line">        <span class="attribute">background</span>:<span class="built_in">url</span>(/images/bwtvyjsuhbe.jpg);</div><div class="line">        <span class="attribute">background-size</span>:cover;</div><div class="line">        <span class="attribute">background-repeat</span>:no-repeat;</div><div class="line">        <span class="attribute">background-attachment</span>:fixed;</div><div class="line">        <span class="attribute">background-position</span>:center;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.post-block</span> &#123;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">rgba</span>(255,255,255,0.9);</div><div class="line">	<span class="attribute">border-radius</span>: <span class="number">10px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*** POST ***/</span></div><div class="line"></div><div class="line">// post title + link title</div><div class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-title</span> &#123;</div><div class="line">  <span class="attribute">color</span>: <span class="built_in">darken</span>($theme-color,0.5);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-title-link</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">    <span class="attribute">height</span>: <span class="number">2px</span>;</div><div class="line">    <span class="attribute">background-color</span>: <span class="built_in">darken</span>($theme-color,0.5);</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(90deg, #F79533 0%, #F37055 15%, #EF4E7B 30%, #A166AB 44%, #5073B8 58%, #1098AD 72%, #07B39B 86%, #6DBA82 100%);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// title gradient</div><div class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">h1</span>, <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span>, <span class="selector-tag">h6</span> &#123;</div><div class="line">    //border-left: 5px solid rgb(34, 244, 246);</div><div class="line">    //margin-left: -15px;</div><div class="line">    //padding-left: 10px;</div><div class="line">    <span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>(90<span class="selector-tag">deg</span>, <span class="selector-id">#3a6186</span>, <span class="selector-id">#89253e</span>);</div><div class="line">    <span class="selector-tag">background-size</span>: <span class="selector-tag">cover</span>;</div><div class="line">    <span class="selector-tag">-webkit-background-clip</span>: <span class="selector-tag">text</span>;</div><div class="line">    <span class="selector-tag">-webkit-text-fill-color</span>: <span class="selector-tag">transparent</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.post-nav-item</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">	<span class="attribute">color</span>:$theme-color;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// post button (readmore)</div><div class="line"><span class="selector-class">.post-button</span> &#123;</div><div class="line">	.btn &#123;</div><div class="line">		color: rgba($theme-color, $transparency-normal);</div><div class="line">		<span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(255,255,255,0<span class="selector-class">.7</span>);</div><div class="line">		border: 1.5px solid rgba($theme-color, $transparency-normal);</div><div class="line">		<span class="selector-tag">border-radius</span>: 5<span class="selector-tag">px</span></div><div class="line">	&#125;</div><div class="line">	<span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">		<span class="attribute">border</span>: <span class="number">1.5px</span> solid <span class="built_in">rgba</span>(255,255,255,0);</div><div class="line">			<span class="attribute">background</span>: <span class="built_in">rgba</span>($theme-color, $transparency-normal);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*** HYPERLINKS ***/</span></div><div class="line"></div><div class="line">// hyper-links</div><div class="line"><span class="selector-tag">a</span> &#123;</div><div class="line">  <span class="attribute">color</span>:$black-light;</div><div class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid $grey-dark;</div><div class="line">  <span class="attribute">word-wrap</span>: break-word;</div><div class="line"></div><div class="line">  &amp;:hover&#123;</div><div class="line">    color:$theme-color;</div><div class="line">    border-bottom-color:$theme-color;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*** SIDEBAR ***/</span></div><div class="line"></div><div class="line">// site-meta background</div><div class="line"><span class="selector-class">.site-meta</span> &#123;</div><div class="line">	<span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(45deg, #F79533 0%, #F37055 15%, #EF4E7B 30%, #A166AB 44%, #5073B8 58%, #1098AD 72%, #07B39B 86%, #6DBA82 100%);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// menu background</div><div class="line"><span class="selector-class">.site-nav</span> &#123;</div><div class="line">  <span class="attribute">background</span>:white;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// menu hover</div><div class="line"><span class="selector-class">.menu</span> <span class="selector-class">.menu-item</span> &#123;</div><div class="line">	<span class="attribute">font-weight</span>:bold;</div><div class="line">  a &#123;</div><div class="line">    &amp;<span class="selector-pseudo">:hover</span>&#123;</div><div class="line">      <span class="attribute">background</span>: <span class="number">#f9f9f980</span>;</div><div class="line">      <span class="attribute">color</span>: $theme-color;</div><div class="line">      <span class="attribute">border-bottom-color</span>: <span class="built_in">rgba</span>($theme-color,0.3);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.menu-item-active</span> <span class="selector-tag">a</span> &#123;</div><div class="line">  @extend .menu .menu-item a:hover;</div><div class="line">  // optional</div><div class="line">  // .menu-item-icon &#123;color:$color_code&#125;</div><div class="line"></div><div class="line">  &amp;:after &#123; // the tiny square dot at the right of each menu item</div><div class="line">    background-color: $theme-color;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// sidebar general</div><div class="line"></div><div class="line"><span class="selector-class">.site-author-image</span> &#123;</div><div class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="built_in">rgb</span>(255, 255, 255);</div><div class="line">    <span class="attribute">border-radius</span>: <span class="number">80px</span>;</div><div class="line">    <span class="attribute">transition</span>: transform <span class="number">1.0s</span> ease-out;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(360deg);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">transform</span>: initial;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// sidebar background + description</div><div class="line"><span class="selector-class">.sidebar-inner</span> &#123;</div><div class="line">  <span class="attribute">background</span>:<span class="built_in">url</span>(/images/sidebar.jpg);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.site-author-name</span> &#123;</div><div class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>($theme-color, 1.0);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.site-state</span> &#123;</div><div class="line">	p,span,a &#123;color: rgba($theme-color, 1.0);&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.site-state-item</span> &#123;</div><div class="line">	p,span,a &#123;color: rgba($theme-color, 1.0);&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// sidebar toc title</div><div class="line"><span class="selector-class">.sidebar-nav</span> <span class="selector-tag">li</span> &#123;</div><div class="line">  &amp;:hover &#123; color: rgba($theme-color, $transparency-sidebar); &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.sidebar-nav</span> <span class="selector-class">.sidebar-nav-active</span> &#123;</div><div class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>($theme-color, $transparency-sidebar);</div><div class="line">	<span class="attribute">border-bottom-width</span>: <span class="number">1.5px</span>;</div><div class="line">  <span class="attribute">border-bottom-color</span>: <span class="built_in">rgba</span>($theme-color, $transparency-sidebar);</div><div class="line"></div><div class="line">  &amp;:hover &#123; color: rgba($theme-color,$transparency-sidebar); &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// sidebar-toc link</div><div class="line"><span class="selector-class">.post-toc</span> <span class="selector-tag">ol</span> <span class="selector-tag">a</span> &#123;</div><div class="line">    <span class="attribute">color</span>: $black-light;</div><div class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#999</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.post-toc</span> <span class="selector-tag">ol</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">color</span>: $theme-color;</div><div class="line">    <span class="attribute">border-bottom-color</span>: $theme-color;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// sidebar-toc active link</div><div class="line"><span class="selector-class">.post-toc</span> <span class="selector-class">.nav</span> <span class="selector-class">.active</span> &gt; <span class="selector-tag">a</span> &#123;</div><div class="line">    <span class="attribute">color</span>: $theme-color;</div><div class="line">    <span class="attribute">border-bottom-color</span>: <span class="built_in">rgba</span>($theme-color,$transparency-sidebar);</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.post-toc</span> <span class="selector-class">.nav</span> <span class="selector-class">.active</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">color</span>: $theme-color;</div><div class="line">    <span class="attribute">border-bottom-color</span>: <span class="built_in">rgba</span>($theme-color,$transparency-sidebar);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// sidebar toggle button</div><div class="line"><span class="selector-class">.sidebar-toggle</span> &#123;</div><div class="line">    <span class="attribute">right</span>: <span class="number">10px</span>;</div><div class="line">    <span class="attribute">bottom</span>: <span class="number">43px</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>($theme-color, 0.8);</div><div class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(0, 0, 0, 0.35);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*** TAG CLOUD ***/</span></div><div class="line"><span class="selector-class">.tag-cloud</span> <span class="selector-tag">a</span> &#123;</div><div class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(5, 147, 211);</div><div class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(5, 147, 211);</div><div class="line">    <span class="attribute">text-decoration</span>: none;</div><div class="line"></div><div class="line">		&amp;:hover &#123;</div><div class="line">    color: $theme-color;</div><div class="line">    <span class="selector-tag">border-bottom</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-tag">rgb</span>(255, 118, 0);</div><div class="line">    <span class="selector-tag">text-decoration</span>: <span class="selector-tag">none</span>;</div><div class="line">		&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//categories</div><div class="line"><span class="selector-class">.category-all-page</span> <span class="selector-class">.category-list-count</span> &#123;</div><div class="line">  <span class="attribute">color</span>: <span class="number">#3a6186</span>;</div><div class="line"></div><div class="line">  &amp;:before &#123;</div><div class="line">    <span class="selector-tag">display</span>: <span class="selector-tag">inline</span>;</div><div class="line">    <span class="selector-tag">content</span>: " ("</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  &amp;<span class="selector-pseudo">:after</span> &#123;</div><div class="line">    <span class="attribute">display</span>: inline;</div><div class="line">    <span class="attribute">content</span>: <span class="string">") "</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*** COMMENTS ***/</span></div><div class="line"></div><div class="line"><span class="selector-class">.comments</span> &#123;</div><div class="line">    <span class="attribute">margin-top</span>: <span class="number">50px</span>;</div><div class="line">    <span class="attribute">margin-right</span>: <span class="number">20px</span>;</div><div class="line">    <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</div><div class="line">    <span class="attribute">margin-left</span>: <span class="number">20px</span>;</div><div class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.35);</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(0, 0, 0, 0.35);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*** ARCHIVE TIMELINE ***/</span></div><div class="line"></div><div class="line"><span class="selector-class">.collection-title</span> <span class="selector-tag">h1</span> &#123;</div><div class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(90deg,#f79533 0,#f37055 15%,#ef4e7b 30%,#a166ab 44%,#5073b8 58%,#1098ad 72%,#07b39b 86%,#6dba82 100%);</div><div class="line">	<span class="attribute">color</span>: white;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// timeline</div><div class="line"><span class="selector-class">.posts-collapse</span><span class="selector-pseudo">::after</span> &#123;</div><div class="line">    <span class="attribute">margin-left</span>: -<span class="number">2px</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(255, 118, 0);</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(180deg,#f79533 0,#f37055 15%,#ef4e7b 30%,#a166ab 44%,#5073b8 58%,#1098ad 72%,#07b39b 86%,#6dba82 100%);</div><div class="line">&#125;</div><div class="line">// decoration dot on timeline</div><div class="line"><span class="selector-class">.posts-collapse</span> <span class="selector-class">.collection-title</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(255, 255, 255);</div><div class="line">&#125;</div><div class="line">// first decoration dot on timeline</div><div class="line"><span class="selector-class">.page-archive</span> <span class="selector-class">.posts-collapse</span> <span class="selector-class">.archive-move-on</span> &#123;</div><div class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</div><div class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(255, 255, 255);</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(0, 0, 0, 0.5);</div><div class="line">&#125;</div><div class="line">// active decoration dot</div><div class="line"><span class="selector-class">.posts-collapse</span> <span class="selector-class">.post-header</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(255, 255, 255);</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.posts-collapse</span> <span class="selector-class">.post-header</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>($theme-color, $transparency-sidebar);</div><div class="line">&#125;</div><div class="line">// timeline title</div><div class="line"><span class="selector-class">.posts-collapse</span> <span class="selector-class">.post-title</span> <span class="selector-tag">a</span> &#123;</div><div class="line">		<span class="attribute">color</span>: $black-light;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.posts-collapse</span> <span class="selector-class">.post-title</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>($theme-color, $transparency-sidebar);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// timeline dotted line underneath title</div><div class="line"><span class="selector-class">.posts-collapse</span> <span class="selector-class">.post-header</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">border-bottom-color</span>: <span class="built_in">rgba</span>($theme-color, $transparency-sidebar);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*** FOOTER ***/</span></div><div class="line"></div><div class="line"><span class="selector-class">.footer</span> &#123;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.75);</div><div class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</div><div class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(0, 0, 0);</div><div class="line">    <span class="attribute">border-top-width</span>: <span class="number">3px</span>;</div><div class="line">    <span class="attribute">border-top-style</span>: solid;</div><div class="line">    <span class="attribute">border-top-color</span>: <span class="built_in">rgba</span>(255, 118, 0, 0.75);</div><div class="line">    <span class="attribute">padding-top</span>: <span class="number">0px</span>;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> -<span class="number">10px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(0, 0, 0, 0.15);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*** HEXO TAGS: BLOCKQUOTE ***/</span></div><div class="line"></div><div class="line"><span class="selector-tag">blockquote</span> &#123;</div><div class="line">   // padding-top: 3px;</div><div class="line">    <span class="selector-tag">padding-right</span>: 25<span class="selector-tag">px</span>;</div><div class="line">    //padding-bottom: 3px;</div><div class="line">    <span class="selector-tag">padding-left</span>: 25<span class="selector-tag">px</span>;</div><div class="line">    //color: rgba(255, 255, 255, 0.85);</div><div class="line">    border-left: 5px solid darken($theme-color,0.5);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">blockquote</span><span class="selector-class">.question</span> &#123;</div><div class="line">    //color: rgba(0, 0, 0, 0.95);</div><div class="line">    //padding-left: 25px;</div><div class="line">    <span class="selector-tag">border-left</span>: 5<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-tag">rgb</span>(5, 154, 37);</div><div class="line">    //background: rgba(255, 255, 255, 0.75);</div><div class="line">    //border-top-right-radius: 3px;</div><div class="line">    //border-bottom-right-radius: 3px;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*** TABLE ***/</span></div><div class="line"></div><div class="line"><span class="selector-tag">table</span> &#123;</div><div class="line">    //background-color: rgba(255, 255, 255, 0.9);</div><div class="line">    background-color: rgba($theme-color, $transparency-normal);</div><div class="line">    <span class="selector-tag">color</span>: <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.9</span>);</div><div class="line">    <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-tag">rgba</span>(221, 221, 221, 0<span class="selector-class">.9</span>);</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">table</span>&gt;<span class="selector-tag">tbody</span>&gt;<span class="selector-tag">tr</span><span class="selector-pseudo">:nth-of-type(odd)</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(240, 240, 240, 0.9);</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">table</span>&gt;<span class="selector-tag">tbody</span>&gt;<span class="selector-tag">tr</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(245, 245, 245, 0.9);</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">th</span>, <span class="selector-tag">td</span> &#123;</div><div class="line">    <span class="attribute">border-bottom</span>: <span class="number">3px</span> solid <span class="built_in">rgba</span>(221, 221, 221, 0.9);</div><div class="line">    <span class="attribute">border-right</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(238, 238, 238, 0.9);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*** CODE BLOCK ***/</span></div><div class="line"></div><div class="line"><span class="selector-tag">code</span> &#123;</div><div class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(0, 0, 0, 0.95);</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.75);</div><div class="line">    <span class="attribute">margin</span>: <span class="number">1px</span> <span class="number">3px</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">1px</span> <span class="number">3px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*** LOCAL SEARCH ***/</span></div><div class="line"></div><div class="line"><span class="selector-class">.local-search-popup</span> <span class="selector-class">.search-icon</span>, <span class="selector-class">.local-search-popup</span> <span class="selector-class">.popup-btn-close</span> &#123;</div><div class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(255, 118, 0);</div><div class="line">    <span class="attribute">margin-top</span>: <span class="number">7px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.local-search-popup</span> <span class="selector-class">.local-search-input-wrapper</span> <span class="selector-tag">input</span> &#123;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">9px</span> <span class="number">0</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">21px</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(255, 255, 255);</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.local-search-popup</span> <span class="selector-class">.popup-btn-close</span> &#123;</div><div class="line">    <span class="attribute">border-left</span>: none;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*** BACK-TO-TOP ***/</span></div><div class="line"></div><div class="line"><span class="selector-class">.back-to-top</span> &#123;</div><div class="line">    <span class="attribute">right</span>: <span class="number">10px</span>;</div><div class="line">    <span class="attribute">padding-right</span>: <span class="number">5px</span>;</div><div class="line">    <span class="attribute">padding-left</span>: <span class="number">5px</span>;</div><div class="line">    <span class="attribute">padding-top</span>: <span class="number">2.5px</span>;</div><div class="line">    <span class="attribute">padding-bottom</span>: <span class="number">2.5px</span>;</div><div class="line">    <span class="attribute">background</span>: $theme-color;</div><div class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(0, 0, 0, 0.35);</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.back-to-top</span><span class="selector-class">.back-to-top-on</span> &#123;</div><div class="line">    <span class="attribute">bottom</span>: <span class="number">10px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*** SCROLLBAR ***/</span></div><div class="line"><span class="comment">/* ref: https://segmentfault.com/a/1190000003708894 */</span></div><div class="line"><span class="selector-pseudo">::-webkit-scrollbar</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">10px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/* scroll bar track */</span></div><div class="line"><span class="selector-pseudo">::-webkit-scrollbar-track</span> &#123;</div><div class="line">    <span class="attribute">background</span>: <span class="number">#ccc</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/* scroll bar thumb */</span></div><div class="line"><span class="selector-pseudo">::-webkit-scrollbar-thumb</span> &#123;</div><div class="line">    <span class="attribute">border-radius</span>: <span class="number">2px</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">darken</span>($theme-color, 0.5);</div><div class="line">&#125;</div><div class="line"><span class="selector-pseudo">::-webkit-scrollbar-thumb</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">lighten</span>($theme-color,0.5);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">h2</span><span class="selector-class">.love</span> &#123;</div><div class="line">    <span class="attribute">border-left</span>: none;</div><div class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(255, 113, 168);</div><div class="line">    <span class="attribute">-webkit-text-fill-color</span>: unset;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="custom-index-page-using-swiper">Custom Index page using <a href="http://idangero.us/swiper/" target="_blank" rel="noopener">Swiper</a></h1>
<p><a href="http://idangero.us/swiper/" target="_blank" rel="noopener">Swiper</a> is a modern and smooth touch swiper API from <a href="http://framework7.io/" target="_blank" rel="noopener">FrameWork7</a>. It can be implemented as part of webpate, or independently as a single website.</p>
<img src="/next-customization/006.bmp">
<p>It is highly customizable so I put it here as one customization method to replace one of my other’s website’s home page. The demo is <a href="https://cutelittleturtle.github.io/" target="_blank" rel="noopener">here</a>.</p>
<p>To implement it, the <code>HTML</code> code is simple. Just create a new <code>index.swig</code> under <code>themes/next/layout</code> and write a full page swiper inside. Be careful about the <code>js</code> syntax depending on the version. But you will be able to find answers to most of questions under their Github <a href="https://github.com/nolimits4web/Swiper/issues" target="_blank" rel="noopener">issue page</a> or referencing to their <a href="http://idangero.us/swiper/demos/" target="_blank" rel="noopener">demo</a>.</p>
<p>The more complicated part is the <code>css</code>. There is no short-cut though, so you will have to adjust the css piece by piece. Look at my website’s page source if you need some reference.</p>
<p><code>! When referring to your css, be careful about the relative path. If css doesn't work, it is most likely because of the css is not properly found</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>YBYARCHIVE<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	&#123;% include '_third-party/analytics/index.swig' %&#125;</div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"</span> <span class="attr">name</span>=<span class="string">"viewport"</span>&gt;</span><span class="comment">&lt;!-- Link Swiper's CSS --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.1/css/swiper.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span><span class="comment">&lt;!-- link rel="stylesheet" href="//css/index-separate/index.css" --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"/css/index-separate/all.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-container"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-wrapper"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-slide"</span> <span class="attr">style</span>=<span class="string">"background-image:url(/img/index/background1/bk1.png)"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"bk1_name"</span> <span class="attr">src</span>=<span class="string">"/img/index/background1/bk1-name.png"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span> <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"bk1_name_pinyin"</span> <span class="attr">src</span>=<span class="string">"/img/index/background1/bk1-name-pinyin.png"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span> <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"bk_archive"</span> <span class="attr">src</span>=<span class="string">"/img/index/onlinearchive.png"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span> <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn ghost-button responsive-width btn-duiwu"</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span>她的队伍<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn ghost-button responsive-width btn-budang"</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span>视频补档<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn ghost-button responsive-width btn-zhibo"</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span>她的直播<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-slide"</span> <span class="attr">style</span>=<span class="string">"background-image:url(/img/index/background2/bk2.png)"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"bk2_intro"</span> <span class="attr">src</span>=<span class="string">"/img/index/background2/bk2-intro.png"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span> <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"bk2_list"</span> <span class="attr">src</span>=<span class="string">"/img/index/background2/bk2-list.png"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span> <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"bk_archive"</span> <span class="attr">src</span>=<span class="string">"/img/index/onlinearchive.png"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span> <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn ghost-button responsive-width btn-zhibo-bk2"</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/2015/09/20/ybystream/"</span>&gt;</span>直播列表<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-slide"</span> <span class="attr">style</span>=<span class="string">"background-image:url(/img/index/background3/bk3.jpg)"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"bk3_intro"</span> <span class="attr">src</span>=<span class="string">"/img/index/background3/bk3-intro.png"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span> <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"bk_archive"</span> <span class="attr">src</span>=<span class="string">"/img/index/onlinearchive.png"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span> <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn ghost-button responsive-width btn-budang-bk3"</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/2015/09/07/ybysource/"</span>&gt;</span>补档链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-slide"</span> <span class="attr">style</span>=<span class="string">"background-image:url(/img/index/background4/bk4.jpg)"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"bk4_teamx"</span> <span class="attr">src</span>=<span class="string">"/img/index/background4/bk4-teamx.png"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.snh48.com/member_list.html#s_team_x"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"bk4_zhuye"</span> <span class="attr">src</span>=<span class="string">"/img/index/background4/bk4-zhuye.png"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://weibo.com/u/5621452734"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"bk4_yingyuanhui"</span> <span class="attr">src</span>=<span class="string">"/img/index/background4/bk4-yingyuanhui.png"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.snh48.com/html/allnews/"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"bk4_xinwen"</span> <span class="attr">src</span>=<span class="string">"/img/index/background4/bk4-xinwen.png"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"bk_archive_l"</span> <span class="attr">src</span>=<span class="string">"/img/index/onlinearchive.png"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span> <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn ghost-button responsive-width btn-budang-bk4"</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/2014/09/28/ybygongyanquanchang/"</span>&gt;</span>公演全集<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-pagination"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-button-next"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-button-prev"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- Swiper JS --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.1/js/swiper.min.js"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> <span class="comment">&lt;!-- Initialize Swiper --&gt;</span></div><div class="line">	 </div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">	   var swiper = new Swiper('.swiper-container', &#123;</span></div><div class="line"><span class="undefined">	       pagination: &#123;</span></div><div class="line"><span class="undefined">	                 el: '.swiper-pagination',</span></div><div class="line"><span class="undefined">	          clickable: true,</span></div><div class="line"><span class="undefined">	       &#125;,</span></div><div class="line"><span class="undefined">	       navigation: &#123;</span></div><div class="line"><span class="undefined">	         nextEl: '.swiper-button-next',</span></div><div class="line"><span class="undefined">	         prevEl: '.swiper-button-prev',</span></div><div class="line"><span class="undefined">	       &#125;,</span></div><div class="line"><span class="undefined">	       loop: true,</span></div><div class="line"><span class="undefined">	       preload: true,</span></div><div class="line"><span class="undefined">	       mousewheel: true,</span></div><div class="line"><span class="undefined">	       slideToClickedSlide: true,</span></div><div class="line"><span class="undefined">	   &#125;);</span></div><div class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">	   $('.btn-zhibo').click(function()&#123;</span></div><div class="line"><span class="undefined">	            var index=$(this).attr('href');</span></div><div class="line"><span class="undefined">	                    swiper.slideTo(2);</span></div><div class="line"><span class="undefined">	   &#125;);</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="undefined">	   $('.btn-budang').click(function()&#123;</span></div><div class="line"><span class="undefined">	            var index=$(this).attr('href');</span></div><div class="line"><span class="undefined">	                    swiper.slideTo(3);</span></div><div class="line"><span class="undefined">	   &#125;);</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="undefined">	   $('.btn-duiwu').click(function()&#123;</span></div><div class="line"><span class="undefined">	            var index=$(this).attr('href');</span></div><div class="line"><span class="undefined">	                    swiper.slideTo(4);</span></div><div class="line"><span class="undefined">	   &#125;);</span></div><div class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="acknowledgement">Acknowledgement</h1>
<p>This note could not be compiled without reference from many advanced users.</p>
<p>Special thanks to:</p>
<p><a href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html" target="_blank" rel="noopener">打造个性超赞博客Hexo+NexT+GithubPages的超深度优化</a></p>
<p><a href="http://mashirosorata.vicp.io/HEXO-NEXT%E4%B8%BB%E9%A2%98%E4%B8%AA%E6%80%A7%E5%8C%96%E9%85%8D%E7%BD%AE.html" target="_blank" rel="noopener">HEXO+NEXT主题个性化配置</a></p>
]]></content>
      
        <categories>
            
            <category> programming </category>
            
        </categories>
        
        
        <tags>
            
            <tag> webdev </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Simple Guide to Set up Github Website]]></title>
      <url>/setupGithubPage/</url>
      <content type="html"><![CDATA[<p>Github Page provides a fast and easy way to set up a static website/blog. It uses Github as a free hosting platform, which comes with free domain, and Jekyll as a very simple site generator. Although there have been a million tutorial and documentation on how to use it, I found them usually over complicated and not easy to get started. Therefor I want to share my own experience setting up one blog from scratch with a chosen TEMPLATE; and you can just follow these steps to start your own site as well.</p>
<a id="more"></a>
<h1 id="basic-concepts">Basic concepts</h1>
<p>Here we introduce few basic concepts that help you understand the services that we are going to set up our website.</p>
<h2 id="github">Github</h2>
<p>Github is a online code [plaintext] hosting service. It is free for a public project. You need to pay to make a private project. You can use the service through its web interface, or with its local managing tool git.</p>
<p>For a complete tutorial on github, visit <a href="https://guides.github.com/" target="_blank" rel="noopener">Github 101</a> and <a href="http://rogerdudler.github.io/git-guide/" target="_blank" rel="noopener">Github Simple Guide</a></p>
<p><strong>Terms you need to know now</strong></p>
<table>
<colgroup>
<col width="27%">
<col width="72%">
</colgroup>
<thead>
<tr class="header">
<th align="left">Term</th>
<th align="center">Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Repository</strong></td>
<td align="center">A Github project</td>
</tr>
<tr class="even">
<td align="left"><strong>Branch</strong></td>
<td align="center">A isolated copy of project for testing new features</td>
</tr>
<tr class="odd">
<td align="left"><strong>Clone</strong></td>
<td align="center">Action to copy the online repository to your local machine</td>
</tr>
<tr class="even">
<td align="left"><strong>Add, commit, and push</strong></td>
<td align="center">Actions to submit a change from local copy to online repository</td>
</tr>
<tr class="odd">
<td align="left"><strong>Pull</strong></td>
<td align="center">Action to update your local copy from onlien repository newest changes</td>
</tr>
<tr class="even">
<td align="left"><strong>Merge</strong></td>
<td align="center">Action to combine tested features from branches back into the master branch</td>
</tr>
<tr class="odd">
<td align="left"><strong>Fork</strong></td>
<td align="center">Make a copy of someone else’s project and put it under your account (You can build your own project from it if the license permits)</td>
</tr>
</tbody>
</table>
<h2 id="github-page">Github page</h2>
<p>Github page is a feature provide by Gitub to host user, organization, and project pages directly based on Github repository. It starts with the idea to quickly generate product documents for Github projects, but then expands to <em>anything</em> you want to publish to the web, officially. There is a <a href="https://pages.github.com/" target="_blank" rel="noopener">full documentation</a> for Github page and examples, I will just put down some pros-cons.</p>
<p><strong><em>Github page is good for</em></strong>:</p>
<p><code>Small, fast and static&lt;/b&gt; websites or blogs that provides &lt;b&gt;public and non-sensitive information.</code></p>
<p><strong><em>Github page is not designed for/does not support</em></strong>: <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Server-side code such as PHP, Ruby, or Python</div><div class="line">Sensitive transactions such as passwords, credit card information etc</div><div class="line">Sites larger than 1GB, or monthly bandwidth over 100GB or hourly build over 10 builds.</div></pre></td></tr></table></figure></p>
<h2 id="jekyll">Jekyll</h2>
<p>Jekyll is a static site generator that renders user post files and template files into complete HTML website files.You will provide the template files that tells Jekyll how your website should look like and the post files containing the contents. Jekyll will do all the dirty work. For a complete guide on Jekyll, visit its <a href="https://jekyllrb.com/" target="_blank" rel="noopener">official website</a></p>
 
<center>
<font size="3">Now that we have some understandings on the tools and platforms,</font>
</center>
<center>
<font size="3">We will begin to build the site.</font>
</center>
<p> </p>
<h1 id="set-up-a-github-page-repository">Set up a Github page repository</h1>
<p>Github page allows you to create websites based on your existing repository or with a new repository. You can set up a user/organization github page or a project page.</p>
<h2 id="set-up-a-userorganization-github-page">Set up a user/organization github page</h2>
<ol style="list-style-type: decimal">
<li>Go to <a href="https://github.com" target="_blank" rel="noopener">Github</a> and create a new repository named <strong>username.github.io</strong>. Username has to match your user name/organization name on Github. If not, it will not work.</li>
<li>Create index.html that contains any strings. The index.html will serve as your homepage content.If index.html does not exist, README.md will be used.</li>
<li>Commit and push (if created using terminal)</li>
</ol>
<p><em>To make sure that your site works, log into your Github repository and check under <code>Settings</code>. You should see Github page service activated.</em></p>
<h2 id="set-up-a-project-github-page">Set up a project github page</h2>
<ol style="list-style-type: decimal">
<li>Create or log into an existing Github project</li>
<li>Create a <strong>gh-pages</strong> branch</li>
<li>Go to <strong>Settings</strong> and choose gh-pages branch under <strong>Source</strong> and save.<br>
</li>
<li>You will see your Github page link right above the line.</li>
</ol>
<p><em>If no website file is added, README.md will be used as <code>index.html</code>.</em></p>
<h1 id="choose-a-template">Choose a template</h1>
<p>Now that we have a working website literally. All you need to do is to set up how it should look like (template or theme) and add real contents.</p>
<p>Like any other staitc website framework, Jekyll depends on different modules to build a good-looking website. In a snapshot, you will need those files.</p>
<table style="width:99%;">
<colgroup>
<col width="16%">
<col width="82%">
</colgroup>
<thead>
<tr class="header">
<th align="left">File/Folders</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">index.html</td>
<td align="left">Homepage template to display the front page</td>
</tr>
<tr class="even">
<td align="left">_config.yml</td>
<td align="left">Jekyll configuration file that sets up site description, meta description, baseurl, markdown type, default post setting etc. The content of this file depends on functions the theme provided</td>
</tr>
<tr class="odd">
<td align="left">_layouts/</td>
<td align="left">template files defining how posts are wrapped on a post-by-post base</td>
</tr>
<tr class="even">
<td align="left">_includes/</td>
<td align="left">partials that can be reused in layouts and posts. Using liquid tag {% include "file.ext" %} to access partial in _includes/file.ext</td>
</tr>
<tr class="odd">
<td align="left">_sass/</td>
<td align="left">sass partials to be used to generated your main.css stylesheet</td>
</tr>
<tr class="even">
<td align="left">_assets/</td>
<td align="left">store custom files such as images</td>
</tr>
<tr class="odd">
<td align="left">css/</td>
<td align="left">main css or sass files</td>
</tr>
<tr class="even">
<td align="left">_posts/</td>
<td align="left">individual post files (YEAR-MONTH-DAY-title.markdown or .md</td>
</tr>
<tr class="odd">
<td align="left">_drafts/</td>
<td align="left">individual draft files (title.markdown), will not be published. Preview with Jekyll serve –draft</td>
</tr>
</tbody>
</table>
<p>For a full list of modules and explanation, visit <a href="https://jekyllrb.com/docs/structure/" target="_blank" rel="noopener">Jekyll Doc</a></p>
<p><strong>And don’t worry!</strong> If you uses Github Theme Chooser, you only need index.html to start with. If you are using an existing theme, most of them will provide all these files.</p>
<p><strong>Now let’s see how to apply a theme.</strong></p>
<h2 id="use-githubs-jekyll-theme-chooser">Use Github’s Jekyll theme chooser</h2>
<p>The easiest way to apply a theme is to use the build-in <a href="https://help.github.com/articles/creating-a-github-pages-site-with-the-jekyll-theme-chooser/" target="_blank" rel="noopener">Jekyll theme chooser</a>.</p>
<p>If you start with a new repository, just go to <strong>Settings</strong> and click on <strong>Choose a theme</strong>. Pick up a theme and click <strong>Select</strong>. Bingo!</p>
<p>If you start with an existing repository, do the same but make sure to correct all your markdown files. For more information, visit <a href="https://help.github.com/articles/troubleshooting-github-pages-builds/" target="_blank" rel="noopener">Troubleshooting</a>.</p>
<h2 id="use-general-jekyll-theme">Use general Jekyll theme</h2>
<p>Another option is to use a general theme that is developed for Jekyll framework, which might not be officially supported by Github. But you will have way more options.</p>
<p>The process is also very easy.</p>
<ol style="list-style-type: decimal">
<li><p>Clone the theme repository to your local disk</p></li>
<li><p>Modify necessary files such as <em>index.html</em>, *_config.yml<em>, or </em>_posts* to reflect your own contents</p></li>
<li><p>Test the theme with <em>Jekyll serve</em> on local machine</p></li>
<li><p>Make a backup of your existing repository (post files, old themes, configurations etc)</p></li>
<li><p>Copy the new theme to your repository, add, commit and push</p></li>
<li><p>Check the published site for any error and correction</p></li>
</ol>
<p>If you have problem seeing the site, you might want to try set the baseurl in /_config.html to your Github page url.</p>
  <br>
<center>
<font size="3">Now it’s time to write your first post</font>
</center>
<p><br>  </p>
<h1 id="write-your-first-post">Write your first post</h1>
<p>The primary reason that I prefer Github page over other more sophisticated Web publishing platform is that Github page allows people to concentrate on the contents with a overly simplified editing interface such as <em>Vim</em> and provides an almost instant preview of work on local Jekyll server, without using a mouse or messing with server/database/PHP installations.</p>
<p><strong>Writing a post with Github page is as easy as adding a file to a folder. Yes, just create one markdown file and push it to the _posts directory. That is all you need to do.</strong></p>
<p>There are few rules you need to follow though:</p>
<ul>
<li>The file must follow the format: <strong>YEAR-MONTH-DAY-title.MARKUP</strong>. Example: 2017-01-01-Hello.markdown</li>
<li>The content must begin with <a href="https://jekyllrb.com/docs/frontmatter/" target="_blank" rel="noopener">YAML Front Matter</a>
<pre>
  ---
  layout: post
  title: Blogging Like a Hacker
  ---
</pre>
The YAML Front Matter tells Jekyll how to process the file with predefined variables</li>
<li>Write your post with the markdown language of your choice</li>
</ul>
<p>For more information on writing a post with enriched content such as inserting images, creating an index and so on, visit the <a href="https://jekyllrb.com/docs/posts/" target="_blank" rel="noopener">official Jekyll tutorial</a></p>
<h1 id="develop-on-local-machine">Develop on local machine</h1>
<p>The last part I want to show you is how to set up a local installation of Jekyll environment on your own machine, from which you can test your website before publishing it online, experimenting with different template, writing posts while you have no internet, and many other things offline.</p>
<p><strong>Requirement</strong> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">1. GNU/Linux, Unix or macOS</div><div class="line"></div><div class="line">2. [Ruby](https://www.ruby-lang.org/en/downloads/) version 2.1, with development branch (-dev)</div><div class="line"></div><div class="line">3. [RubyGems](https://rubygems.org/pages/download)</div><div class="line"></div><div class="line">4. GCC and Make (You should have it with Linux installation. If something is wrong, try upgrade them to newest version with apt-get first)</div><div class="line"></div><div class="line">For Jekyll 2 or earlier version, install Python2.7 and NodeJS</div></pre></td></tr></table></figure></p>
<p><strong>Installation</strong></p>
<p>Use <em>gem</em> to install: <code>gem install jekyll bundler</code></p>
<p>To update existing installaiton: <code>gem update jekyll</code></p>
<p><strong>Usage</strong></p>
<p>Go to your local github page directory, run: <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Jekyll serve</div><div class="line">Browse to [http://localhost:4000](http://localhost:4000)</div></pre></td></tr></table></figure></p>
<p>For a full guide, visit <a href="https://jekyllrb.com/docs/quickstart/" target="_blank" rel="noopener">Quick-start</a></p>
]]></content>
      
        <categories>
            
            <category> programming </category>
            
        </categories>
        
        
        <tags>
            
            <tag> webdev </tag>
            
            <tag> Jekyll </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Use Travis-ci To Automate Github-page Build Process]]></title>
      <url>/usetravis/</url>
      <content type="html"><![CDATA[<blockquote>
<p>For Github-page users who build their website with static website generator other than the natively-supported Jekyll, it is usually troublesome to have to re-build their entire website on a configured environment every time they want to make some minor changes or just to publish a new post. It is especially annoying when you have some exciting ideas to share but have no access to a computer that is set up with whatever static website generator you are using.</p>
<p>Here, I am going to share a very basic workflow setup that allows you to use <a href="prose.io"><em>Prose.io</em></a> as your online post writer and <a href="travis-ci.org"><em>Travis-ci</em></a> as your automation deployment worker for on-the-go Github blog publication.</p>
</blockquote>
<a id="more"></a>
<h1 id="prerequisite">Prerequisite</h1>
<p>A website hosted with <a href="https://pages.github.com/" target="_blank" rel="noopener">Github page</a> service.</p>
<p>For demo: <a href="https://fredhdx.github.io/">Scattered Notes on Web-Dev</a> built with <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>.</p>
<p>Demo repository structure</p>
<p><code>master branch: HTML files</code></p>
<p><code>source branch: hexo source files</code></p>
<h1 id="using-prose.io">Using <a href="prose.io">Prose.io</a></h1>
<h2 id="about">About</h2>
<p>Prose.io is an on-line content editor designed for <a href="Github.com">Github</a> repositories. It provides a simple text-editor like interface for Github users to add, edit, and delete files directly to their Github repositories.</p>
<p>Prose.io can be set up directly with Github account.</p>
<p>Prose.io automatically detects <a href="https://daringfireball.net/projects/markdown/syntax" target="_blank" rel="noopener">markdown</a> content and provides syntax highlighting, formatting tool bar and draft preview <a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>. So it is an ideal tool to write markdown style posts directly on-line.</p>
<p>If your Github page is hosted with <a href="https://jekyllrb.com/" target="_blank" rel="noopener">Jekyll</a>, Prose.io also allows you to use a custom configuration file *_config.yml* to direct your Prose.io log in directly to the website’s source directory, for example, the *_posts* <a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>.</p>
<h2 id="usage">Usage</h2>
<p>You don’t need to do anything to use Prose.io. Just,</p>
<ol style="list-style-type: decimal">
<li>Log in <a href="Prose.io" class="uri">Prose.io</a> with your Github account</li>
<li>Choose the repository</li>
<li>Edit the file and commit</li>
</ol>
<h1 id="using-travis-ci">Using <a href="travis-ci.org">Travis-ci</a></h1>
<h2 id="about-1">About</h2>
<p><a href="travis-ci.org">Travis-ci</a> is a hosted, distributed continuous integration service used to build and test software projects hosted at <a href="github.com">Github</a> <a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>. It frees developers from tedious building and testing processes by deploying those tasks to <a href="travis-ci.org">Travis-ci</a> hosted service with custom scripts, so the developers can focus solely on writing codes.</p>
<p>Travis-ci supports up-to-date languages including C, C++, Python, Java, PHP, Scala, node-js etc.</p>
<p>Travis-ci can be activated either by commits only or by commits and pull requests.</p>
<h2 id="general-concepts">General Concepts</h2>
<p>Continuous Integration:</p>
<blockquote>
<p><code>User Commits -&gt; Detected by Travis-ci -&gt; Run build script -&gt; Return and Log</code></p>
</blockquote>
<p>Building lifecycle:</p>
<blockquote>
<p><code>Install (install required softwares) -&gt; script (building scripts) -&gt; after_script or deployment (post-processing scripts for deployment or logging or debugging)</code></p>
</blockquote>
<p>Errors vs. Failures:</p>
<blockquote>
<p><code>Error: non-zero return value from a before_install, install or before_script command. Job stops immediately</code></p>
<p><code>Failure:non-zero return value from a script command. Job continues till the end. after_success or after_failure script can be appended.</code></p>
</blockquote>
<p>For more core concepts, visit <a href="https://docs.travis-ci.com/user/for-beginners/" target="_blank" rel="noopener">Core Concepts for Beginners/Customizing Your Build</a>.</p>
<h2 id="prerequisite-1">Prerequisite</h2>
<ul>
<li>Github login</li>
<li>Working repository set up with Hexo</li>
</ul>
<blockquote>
<p>In our example:</p>
<p><code>repo: yourname/yourname.github.io</code></p>
<p><code>master branch: HTML files for github page, referred as HTML branch</code></p>
<p><code>source branch: hexo source files, referred as SOURCE branch</code></p>
<p><code>You can set up HTML/SOURCE branches however you like, even in two different repositories</code></p>
</blockquote>
<h2 id="set-up">Set up</h2>
<ol style="list-style-type: decimal">
<li><p>Log in <a href="travis-ci.org">Travis-ci</a> using your Github account</p></li>
<li><p>Choose the working repository: <code>yourname/yourname.github.io</code></p></li>
<li>Click on <strong>Settings</strong></li>
<li>Under <strong>General</strong>: Click on <strong>Build only if .travis.yml is present</strong></li>
<li>Under <strong>General</strong>: Click on <strong>Build branch updates</strong></li>
<li><p>Optional: <em>Build pull request updates</em>, <em>Auto cancellation</em></p></li>
<li><p>Configure <strong>Access Token</strong></p></li>
</ol>
<blockquote>
<p>You need to configure <em>Github access token</em> to allow <em>Travis</em> modify your Github repository</p>
</blockquote>
<ol style="list-style-type: decimal">
<li><p>Log on <a href="github.com">Github</a>, under <strong>Personal settings -&gt; Developer settings -&gt; Personal access tokens</strong></p></li>
<li><p><strong>Generate new token</strong>, give it a name</p></li>
<li><p>Select <strong>some scopes</strong>: at least <code>repo, admin:public_key</code></p></li>
<li><p>Copy the <strong>token</strong> and save it</p></li>
<li><p>Return to <a href="travis-ci.org">Travis-ci</a>, under <strong>Settings</strong>, add the access token as <code>Environmental Variables</code>, give it a name (GH_TOKEN).</p>
<blockquote>
<p><em>Now you have granted Travis-ci the access to operate on your repository</em>.</p>
</blockquote></li>
<li><p>Configure <strong>.travis.yml</strong></p></li>
</ol>
<blockquote>
<p><code>.travis.yml is used as a configuration script to lay out the build process</code></p>
<p><code>It should be placed under the root directory of the branch to be built</code></p>
<p><code>Multiple .travis.yml can exist for multiple working branches</code></p>
</blockquote>
<p>Here I will walk you through a working copy of this file</p>
<p>For detailed reference, read the <a href="https://docs.travis-ci.com/" target="_blank" rel="noopener">Documentation</a></p>
<p>​</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="attr">language:</span> <span class="string">node_js</span>  <span class="comment"># 设置主语言/the primary build langauge.</span></div><div class="line"></div><div class="line"><span class="attr">cache:</span> 	<span class="comment"># 为重复缓存组件/caching options for repeatedly loaded softwares to save             </span></div><div class="line">        <span class="comment"># build time</span></div><div class="line"><span class="bullet">  -</span> <span class="string">pandoc</span></div><div class="line"><span class="bullet">  -</span> <span class="string">hexo-renderer-pandoc</span></div><div class="line"></div><div class="line"><span class="attr">node_js:</span> <span class="string">stable</span>  <span class="comment"># 设置node_js版本/set node_js version</span></div><div class="line"></div><div class="line"><span class="attr">python:</span> <span class="number">3.5</span> <span class="comment"># 设置python版本/set python version (this is the second language I use</span></div><div class="line">            <span class="comment"># to run some processing scritps)</span></div><div class="line"></div><div class="line"><span class="attr">branches:</span> <span class="comment"># 设置目标分支/set target branches. can be used with only options to </span></div><div class="line">          <span class="comment"># specify the working options.</span></div><div class="line"><span class="attr">    only:</span></div><div class="line"><span class="bullet">      -</span> <span class="string">source</span> <span class="comment"># 只在SOURCE branch上编译/only build on SOURCE branch</span></div><div class="line"></div><div class="line"><span class="attr">install:</span> <span class="comment"># 安装插件/install required software, such as hexo</span></div><div class="line"><span class="bullet">  -</span> <span class="string">wget</span> <span class="string">$&#123;pandoc&#125;</span></div><div class="line"><span class="bullet">  -</span> <span class="string">sudo</span> <span class="string">dpkg</span> <span class="bullet">-i</span> <span class="string">pandoc*.deb</span>	<span class="comment"># 安装pandoc/install pandoc package</span></div><div class="line"><span class="bullet">  -</span> <span class="string">npm</span> <span class="string">install</span>  <span class="comment"># 安装hexo及插件/install hexo</span></div><div class="line"><span class="bullet">  -</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-renderer-pandoc</span> <span class="bullet">--save</span> <span class="comment"># 安装pandoc插件/install pandoc plugin</span></div><div class="line"></div><div class="line"><span class="attr">before_script:</span> <span class="comment"># 编译前步骤/commands before script build</span></div><div class="line">			   <span class="comment"># 设置git账户/set up git credentials</span></div><div class="line">			   <span class="comment"># 其他代码/some other codes</span></div><div class="line"><span class="bullet">    -</span> <span class="string">git</span> <span class="string">config</span> <span class="bullet">--global</span> <span class="string">user.name</span> <span class="string">'git commit name'</span></div><div class="line"><span class="bullet">    -</span> <span class="string">git</span> <span class="string">config</span> <span class="bullet">--global</span> <span class="string">user.email</span> <span class="string">'git commit email'</span></div><div class="line"><span class="bullet">    -</span> <span class="string">cd</span> <span class="string">python-codes</span></div><div class="line"><span class="bullet">    -</span> <span class="string">./build.sh</span> <span class="comment"># 一些自动生成markdown文章的代码/this is a script to generate some</span></div><div class="line">                 <span class="comment"># markdown posts</span></div><div class="line"><span class="bullet">    -</span> <span class="string">cd</span> <span class="string">..</span></div><div class="line"></div><div class="line"><span class="attr">script:</span> <span class="comment"># 编译/build and testing commands</span></div><div class="line"><span class="bullet">  -</span> <span class="string">hexo</span> <span class="string">cl</span>  <span class="comment"># 清除/clean old hexo public folder</span></div><div class="line"><span class="bullet">  -</span> <span class="string">hexo</span> <span class="string">g</span>  <span class="bullet">--config</span> <span class="string">source/_data/next.yml</span> <span class="comment">#生成/generate new public folder</span></div><div class="line"></div><div class="line"><span class="attr">after_script:</span> <span class="comment"># 编译后步骤：推送github/some deployment codes</span></div><div class="line"><span class="bullet">    -</span> <span class="string">mkdir</span> <span class="string">.deploy</span>               <span class="comment"># 创立一个推送临时文件夹/Create a folder to use for the gh-page branch</span></div><div class="line"><span class="bullet">    -</span> <span class="string">cd</span> <span class="string">.deploy</span></div><div class="line">    <span class="comment"># 下载HTML branch到临时文件夹/download latest version of the HTML branch</span></div><div class="line">    <span class="comment"># 也可以直接init临时文件夹并设置好remote/or just init the folder and set up remote</span></div><div class="line"><span class="bullet">    -</span> <span class="string">git</span> <span class="string">clone</span> <span class="bullet">--depth</span> <span class="number">1</span> <span class="bullet">--branch</span> <span class="string">master</span> <span class="bullet">--single-branch</span> <span class="string">$DEPLOY_REPO</span> <span class="string">.</span> <span class="string">||</span> <span class="string">(git</span> <span class="string">init</span> <span class="string">&amp;&amp;</span> <span class="string">git</span> <span class="string">remote</span> <span class="string">add</span> <span class="bullet">-t</span> <span class="string">master</span> <span class="string">origin</span> <span class="string">$DEPLOY_REPO)</span>	</div><div class="line"><span class="bullet">    -</span> <span class="string">rm</span> <span class="bullet">-rf</span> <span class="string">./*</span>                      <span class="comment"># 删除现存文件/Clear old verion</span></div><div class="line"><span class="bullet">    -</span> <span class="string">cp</span> <span class="bullet">-r</span> <span class="string">../public/*</span> <span class="string">.</span>             <span class="comment"># 复制新文件到临时文件夹/Copy over files for new version</span></div><div class="line"><span class="bullet">    -</span> <span class="string">git</span> <span class="string">add</span> <span class="bullet">-A</span> <span class="string">.</span></div><div class="line"><span class="bullet">    -</span> <span class="string">git</span> <span class="string">commit</span> <span class="bullet">-m</span> <span class="string">'Site updated'</span>    <span class="comment"># Make a new commit for new version</span></div><div class="line"><span class="bullet">    -</span> <span class="string">git</span> <span class="string">branch</span> <span class="bullet">-m</span> <span class="string">master</span></div><div class="line"><span class="bullet">    -</span> <span class="string">git</span> <span class="string">push</span> <span class="bullet">-q</span> <span class="bullet">-u</span> <span class="string">origin</span> <span class="string">master</span>  <span class="comment"># Push silently so we don't leak information</span></div><div class="line"></div><div class="line"><span class="attr">env:</span> <span class="comment"># 设置环境变了/set up other environmental variables</span></div><div class="line"><span class="attr">  global:</span></div><div class="line"><span class="attr">   - GH_REF:</span> <span class="string">github.com/yourname/yourname.github.io.git</span>  <span class="comment"># 设置GH_REF，注意更改yourname</span></div><div class="line"><span class="attr">   - DEPLOY_REPO:</span> <span class="attr">https://$&#123;GH_TOKEN&#125;@$&#123;GH_REF&#125;</span></div><div class="line"><span class="attr">   - pandoc:</span> <span class="attr">https://github.com/jgm/pandoc/releases/download/1.19.2.1/pandoc-1.19.2.1-1-amd64.deb</span></div></pre></td></tr></table></figure>
<p>Now you are all set.</p>
<p>Just push <code>.travis.yml</code> to your branch and the automation process should start in seconds.</p>
<h1 id="conclusion">Conclusion</h1>
<p>Summing it up, to automate your Hexo website build process and <strong>focus only on writing</strong>, here is what you do,</p>
<ol style="list-style-type: decimal">
<li>Have a Hexo site built on Github, with one branch for source files, one branch for static files</li>
<li>Configure travis-ci and add .travis.yml to the source file branch</li>
<li>Use prose.io to edit or create posts</li>
</ol>
<h1 id="additional-resources">Additional resources</h1>
<p><a href="https://github.com/prose/prose/wiki/Getting-Started" target="_blank" rel="noopener">Official Prose.io Documentation</a></p>
<p><a href="https://docs.travis-ci.com/" target="_blank" rel="noopener">Official Travis-ci Documentation</a></p>
<p><a href="https://gist.github.com/HoverBaum/d11361337d2c59f0de591c9c9390c1a9" target="_blank" rel="noopener">.travis.yml by HoverBaum</a></p>
<p><a href="http://lzhr.github.io/2016/06/04/Continuous-Integration-Your-Hexo-Blog-With-TravisCI.html" target="_blank" rel="noopener">Continuous Integration Your Hexo Blog With Travis CI</a></p>
<p><a href="http://www.jianshu.com/p/5e74046e7a0f" target="_blank" rel="noopener">使用 Travis CI 自动部署 Hexo</a></p>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p><a href="http://prose.io/#about" target="_blank" rel="noopener">About at Prose.io</a><a href="#fnref1">↩</a></p></li>
<li id="fn2"><p><a href="http://allandenot.com/development/2015/01/11/blogging-like-a-dev-jekyll-github-prose-io.html" target="_blank" rel="noopener">BLOGGING LIKE A DEV: JEKYLL + GITHUB + PROSE.IO</a><a href="#fnref2">↩</a></p></li>
<li id="fn3"><p><a href="https://en.wikipedia.org/wiki/Travis_CI" target="_blank" rel="noopener">Wikipedia Travis CI</a><a href="#fnref3">↩</a></p></li>
</ol>
</div>
]]></content>
      
        <categories>
            
            <category> programming </category>
            
        </categories>
        
        
        <tags>
            
            <tag> webdev </tag>
            
            <tag> hexo </tag>
            
            <tag> travis-ci </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Blogging on Google Cloud Platform]]></title>
      <url>/hexoGcloud/</url>
      <content type="html"><![CDATA[<p>Github is more than enough to host your static website. It provides free storage, bandwidth and a in-house static website generator that builds your website online. However, there are occasions when you want to use other hosting services, for reasons such as not exposing your files directly, scaling-up freely based usage, and using plugins that are not supported by Github’s strict codecs. While there are many such services, I would like to introduce Google Cloud Platoform, which is nearly-free, code-friendly and built on the top cloud infrastructure. <a id="more"></a></p>
<img src="/hexoGcloud/gcp-main.bmp" title="gcp-main">
<h1 id="what-is-google-cloud-platform">What is Google Cloud platform</h1>
<p>Google cloud platform is a collection of cloud computing services provided by Google.com that allows users to use the same infrastructures and engines which Google uses for its own services such as Google Search. It provides a wide range of scalable, managable services and products, such as cloud storage, cloud computing, virtual machines, machine learning, data analytics and so on. <a href="https://cloud.google.com/" target="_blank" rel="noopener">More info</a>.</p>
<h2 id="ways-to-host-website-on-google-cloud-platform-gcp">Ways to host website on Google Cloud Platform (gcp)</h2>
<p>GCP provides many ways to host website thanks to its huge selection of cloud computing and storage serivcs.</p>
<p>For static websites where you essentially only serve HTML files with simple plugins such as Javascript, GCP recommends its cloud storage services to host the static files (Firebase or storage bucket).</p>
<p>For dynamic websites where a more complicated and functional websites are created, GCP provides various choices such VM, Container Engines, or App Engines.</p>
<p>For a detailed comparision, visit <a href="https://cloud.google.com/solutions/web-serving-overview" target="_blank" rel="noopener">link</a></p>
<h4 id="price">Price</h4>
<p>Hosting static website on Google Cloud Storage is essentially free.</p>
<p>You can sign up for its <em><a href="https://cloud.google.com/free/" target="_blank" rel="noopener">Free Tier Trial</a></em>, which includes a 12 months + $300 credit to use on any GCP products, and a non-expiring <em>Always Free</em> usage limit on some of its products. For cloud storage, you get free 5 GB storage and 1G egress in/to North America, which is more than enough for blogs.</p>
<p>Beyond the free limit, you are charged at a reasonable rate for the setup you choose. Google provides a very detailed price chart and a <a href="https://cloud.google.com/products/calculator/" target="_blank" rel="noopener">price calculator</a> for estimation. For example, a simple blog set on cloud storage bucket which on multi-regional access will roughly cost:</p>
<img src="/hexoGcloud/estimate.bmp" title="estimate">
<div align="center">
<p>Now without future ado, let’s build our static website on Google Cloud Storage.</p>
</div>
<p> </p>
<h1 id="prerequisite">Prerequisite</h1>
<h2 id="choose-a-static-website-generator">Choose a static website generator</h2>
<p>Previously I have introduced <a href="https://jekyllrb.com/" target="_blank" rel="noopener">Jekyll</a>, which is the #1 used package based on serveral online surveys. However, this time we are going to use a different one, <a href="hexo.io">Hexo</a>, which is similar to Jekyll in many aspects, but beats Jekyll for faster generating speed with large volume of pages and a more well defined plugin environment. Personally, I switched to Hexo because of its absence of <a href="https://kramdown.gettalong.org/" target="_blank" rel="noopener">kramdown</a> as default markdown language. The simpler default package makes Hexo closer to universal standards and easier to transfer to other platforms. Of course, based on Javascript, Hexo is also obviously much more friendly to users on Windows.</p>
<p>Hexo installation is very simple. Follow this <a href="https://hexo.io/docs/" target="_blank" rel="noopener">guide</a> and finish within 5 minutes.</p>
<p>The website building process is the same as with any other generators. Initialize in a folder, install a theme and start writing. Follow this <a href="https://hexo.io/docs/setup.html" target="_blank" rel="noopener">page</a>.</p>
<img src="/hexoGcloud/hexo-main.bmp" title="hexo-main">
<h2 id="get-a-domain-name">Get a domain name</h2>
<p>The next thing is to get a domain name. Unlike Github page, Google Cloud does not provide free sub-domains. So you will purchase your own. Many people would do it anyways.</p>
<p>There are many services selling domains; I will recommend <a href="https://www.namecheap.com/" target="_blank" rel="noopener">NameCheap</a>, which I use personally. NameCheap provides domains at reasonable price, free 1st-year privacy protection ($2.88/year afterwards), free DNS, and a user-friendly interface. Another service I came across is <a href="https://www.namesilo.com/" target="_blank" rel="noopener">NameSilo</a>, from what I read, is also a good choice.</p>
<p>Don’t stress too much about domain name. They are cheap and easy to transfer.</p>
<h3 id="verify-domain">Verify domain</h3>
<p>One thing you will have to do with Google Cloud is to verify that you are the owner of the domain with it. Google provides several ways to do it, I will just introduce the simplest one. For a complete discussion, visit <a href="https://cloud.google.com/storage/docs/domain-name-verification" target="_blank" rel="noopener">link</a>.</p>
<ol style="list-style-type: decimal">
<li>Log into <a href="https://www.google.com/webmasters" target="_blank" rel="noopener">Google Webmaster</a> and click <code>search console</code></li>
<li>Click <code>Add A Property</code> on the right corner and enter your domain name</li>
<li>Click next and choose <code>Alternative methods -&gt; Domain name provider</code>. Add a <code>TXT record</code> under your domain provider’s DNS management interface. Consult your domain provider for how-tos. Wait for a while.</li>
<li>Click <code>verify</code>. If the record is processed successfully, your verification concludes.</li>
</ol>
<h3 id="add-a-cname-alias">Add a CNAME alias</h3>
<p>For your domain url to access files stored on Google Cloud, you will also need to add a <code>CNAME alias</code> to your domain’s DNS management. Create a <code>CNAME</code> alias pointing to <code>c.storage.googleapis.com</code>. <em>A CNAME alias is a DNS record that lets you use a url from your own domain to access resourcs stored on Google Cloud.</em> The record type should be <code>www</code>; the record value should be <code>c.storage.googleapis.com</code>. Consult your domain provider to verify that.</p>
<p>For <strong>NameCheap</strong>, the final DNS setting looks like this:</p>
<img src="/hexoGcloud/dns.bmp" title="dns">
<p>More reference: <a href="https://cloud.google.com/storage/docs/hosting-static-website" target="_blank" rel="noopener">Google</a></p>
<p><em>Note: you should not have multiple DNS records with the same type.</em></p>
<h1 id="deploy-your-website-online">Deploy your website online</h1>
<p>Now you are ready to deploy your website onto GCP. First, you need to create a <strong>cloud bucket</strong> to store your website’s files.</p>
<h2 id="create-a-cloud-bucket">Create a cloud bucket</h2>
<ol style="list-style-type: decimal">
<li>Log into your <a href="https://console.cloud.google.com" target="_blank" rel="noopener">Google Cloud Console</a> and then <code>storage-&gt;Browse</code>.</li>
<li>Click <code>Create a bucket</code>.</li>
<li>Enter your domain name as the bucket name. You will encounter problems if you haven’t verify that.</li>
<li>Choose <code>Multi-Regional</code> as your data class.</li>
<li>Click <code>Create</code></li>
</ol>
<p>Then, to allow the public see your website, you need to serve your files publicly.</p>
<h2 id="set-bucket-permission">Set bucket permission</h2>
<ol style="list-style-type: decimal">
<li>Go to storage’s <code>Browse</code> page</li>
<li>Click the setting icon at the right side of your bucket and <code>edit bucket permissions</code>.</li>
<li>You don’t have to set the entire bucket public, in case you want to hide some of data or pages. So only set the permission for <strong>object</strong>.</li>
<li>For example, create a new permission rule that sets <code>Members: allUsers  Role: Object Viewer</code> to automatically set all objects uploaded as viewable to public.</li>
</ol>
<img src="/hexoGcloud/bucket-permission.bmp" title="bucket">
<p><em>Note: You can always come back to change permissions for each object.</em></p>
<h1 id="upload-files">Upload files</h1>
<p>The last step is to upload your website’s static files. Hexo generates the website in <code>public/</code> folder. Upload the content of <code>public/</code> folder into your configured bucket’s root directory. You can use GCP’s web interface, or you can use google’s <code>gsutil</code> tool for upload.</p>
<p><em>In case you are curious about deploy to Github, you still upload only the content from <code>public/</code> folders to the root. There is a Hexo plugin allows you to do it with <code>hexo deploy</code> command.</em></p>
<h1 id="bonus-an-upload-script">BONUS: an upload script</h1>
<p>In case you are a heavy terminal user and hates web interfaces, I provide a shell script help you deploy your website. You need to install Google’s <a href="https://cloud.google.com/storage/docs/gsutil" target="_blank" rel="noopener"><code>gsutil</code> tool</a>. <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">hexo generate</div><div class="line">gsutil -m rsync -d -r . gs://$websiteurl</div></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> programming </category>
            
        </categories>
        
        
        <tags>
            
            <tag> webdev </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[A Learning Note on Shell Programming: Commandline Argument Parser]]></title>
      <url>/bashCommandparse/</url>
      <content type="html"><![CDATA[<p>I have been working with shell script for some time, mostly for completing repeatable tasks can be described by few lines. In case where a file name or some arguments are needed, editing them directly in script would be preferred due to the script’s limited length and simple structure. For example, a script I used to copy files in the current directory to upper level directory with certain filename would look like:</p>
<a id="more"></a>
<h1 id="inspiration">Inspiration</h1>
<p>I have been working with shell script for some time, mostly for completing repeatable tasks can be described by few lines. In case where a file name or some arguments are needed, editing them directly in script would be preferred due to the script’s limited length and simple structure. For example, a script I used to copy files in the current directory to upper level directory with certain filename would look like:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">newfolder=<span class="string">"this is a folder"</span></div><div class="line"><span class="keyword">for</span> f <span class="keyword">in</span> Note*.txt; <span class="keyword">do</span></div><div class="line">    cp <span class="variable">$f</span> ../<span class="variable">$newfolder</span>/</div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
<p>Here one just need to change the variabel <code>newfolder</code> everytime they move this script to its working directory.</p>
<p>However, for more complicated tasks or pipelines, you will need to work with many more variables. And it is usually much more convenient to allow users to change these variables by entering them as <em>commandline arguments</em>.</p>
<p>Recently, I encountered one of these occasions, where I need to generate some text files and deploy them to several local folders, then online repositories hosting my static websites. To complete this task, I need to copy and paste several files from and to multiple folders, generate websites with static website generators locally in each folder, and then deploy the generated folders to several repositories. It is definitely very confusing and cumbersome to do all those steps every time (say, every two days) I upate my text files. Therefore I attempted to write a shell script with some other python codes to build a pipeline to do this.</p>
<p>All the copying/moving/generating are straight forward, but to implement command line arguments interface that takes in my options to allow flexible task call is way more complicated than I expected, partly due to my ignorance in bash programming, and partly due to the strict rules bash progrmaming is implementing.</p>
<p>In this article, I will write down my journey to search for a reasonable implementation of commandline argument parser for my <em>blog distribution pipeline</em>. including the mistakes that I made and suggested readings from helpful <em>Stackoverflow</em> folks. I do not guarantee the effectiveness or beauty of my code, so take it just as a learning note and a suggested solution to related questions.</p>
<p>Thank you for being patient and there we go.</p>
<h1 id="problem-statement">Problem Statement</h1>
<p>I need to update two posts for my static website, which is generated locally with 2 different generators (Jekyll and Hexo), then deployed onto 3 different onine repositories (2 Githubs and 1 Google Cloud). The generators will have slightly different markdown syntax; the repositories require separte deployment setting. I have set up working python codes to generate posts and different configuration files regarding different repository, now I need a bash script that pipeline all the generating-deploying taks in a single run. The script can take options so that I can perform generating, localy deployment (copying markdown files to website folders) and server deployment independently. A complete work-flow would look like this:</p>
<ol style="list-style-type: decimal">
<li>Use the python script to generate markdown posts files (/workdir/generation/file1-hexo.md file1-jekyll.md file2-hexo.md, file2-jekyll.md)</li>
<li>Deploy markdown files to local website folders (/workdir/hexo-sites/hexo-site1-on-github/google /workdir/jekyll-site-on-github)</li>
<li>Deploy updated local website folders to servers (hexo-site1 to github, hexo-site1 to google, jekyll-site to github)</li>
</ol>
<p>Commandline objectivs <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">-f/--f: optional argument, if present, operand/operands are required. If not present, default file selection will be used</div><div class="line">-l/--local: optional argument, if present, selected files will be copied to local website folders</div><div class="line">-s/--server: optional argument, with optional operands. If presented, selected files will be first deloyed locally, then the updated folders will be deployed to selected servers. Default server selection will be used if option is not present.</div><div class="line">-h/--help: present usage information and quit.</div><div class="line">-d/--dryrun: generating markdown files only.</div><div class="line"></div><div class="line">default behavior: dryrun </div><div class="line">default file selection: file1 file2 (all)</div><div class="line">default server selection: github1 github2 google (all)</div></pre></td></tr></table></figure></p>
<h1 id="first-attempt-using-getop">First Attempt: using getop</h1>
<p>The first attempt is to use bash’s installed function <code>getopt</code> <code>getopt</code> allows users to read command line arguments with <code>-/--</code> options and operands following them; the options can also be put together such as <code>-avh</code> if no operands required. Using <code>getopt</code> long options starting with <code>--</code> are also allowed.</p>
<p>The implementation with <code>getopt</code> is usually done as the <a href="http://www.bahmanm.com/blogs/command-line-options-how-to-parse-in-bash-using-getopt" target="_blank" rel="noopener">following</a> example, where the arguments are parsed into a string/array with <code>getopt</code> first, and then passed into a <code>while; case;</code> loop for processing.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># set an initial value for the flag</span></div><div class="line">ARG_B=0</div><div class="line"></div><div class="line"><span class="comment"># read the options</span></div><div class="line">TEMP=`getopt -o a::bc: --long arga::,argb,argc: -n <span class="string">'test.sh'</span> -- <span class="string">"<span class="variable">$@</span>"</span>`</div><div class="line"><span class="built_in">eval</span> <span class="built_in">set</span> -- <span class="string">"<span class="variable">$TEMP</span>"</span></div><div class="line"></div><div class="line"><span class="comment"># extract options and their arguments into variables.</span></div><div class="line"><span class="keyword">while</span> <span class="literal">true</span> ; <span class="keyword">do</span></div><div class="line">    <span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></div><div class="line">        -a|--arga)</div><div class="line">            <span class="keyword">case</span> <span class="string">"<span class="variable">$2</span>"</span> <span class="keyword">in</span></div><div class="line">                <span class="string">""</span>) ARG_A=<span class="string">'some default value'</span> ; <span class="built_in">shift</span> 2 ;;</div><div class="line">                *) ARG_A=<span class="variable">$2</span> ; <span class="built_in">shift</span> 2 ;;</div><div class="line">            <span class="keyword">esac</span> ;;</div><div class="line">        -b|--argb) ARG_B=1 ; <span class="built_in">shift</span> ;;</div><div class="line">        -c|--argc)</div><div class="line">            <span class="keyword">case</span> <span class="string">"<span class="variable">$2</span>"</span> <span class="keyword">in</span></div><div class="line">                <span class="string">""</span>) <span class="built_in">shift</span> 2 ;;</div><div class="line">                *) ARG_C=<span class="variable">$2</span> ; <span class="built_in">shift</span> 2 ;;</div><div class="line">            <span class="keyword">esac</span> ;;</div><div class="line">        --) <span class="built_in">shift</span> ; <span class="built_in">break</span> ;;</div><div class="line">        *) <span class="built_in">echo</span> <span class="string">"Internal error!"</span> ; <span class="built_in">exit</span> 1 ;;</div><div class="line">    <span class="keyword">esac</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
<p>The problem I am having with this implementation is that some of my options are skipped and some are reported as bug. While I searched through online resources the most definite answer I get is: <strong>dont’t use getopt unless you need to have options combined together; it’s bash version is buggy</strong>. Well, so much with a bash built-in parser. I guess I will have to hard-code my own parser then.</p>
<p>It turns out that many people actually prefer to write their own parser anyways, due to the variety of different inputs people face. And writing a parser is not difficult, you only don’t get the <code>getopt</code> to translate the input arguments into a nice string or array for you. You will have to write your <code>while;case</code> to assign actions to input options in either case.</p>
<h1 id="revision">Revision</h1>
<p>And here comes the revision. In short, I loop through all arguments input by shifting the positional argument <code>$1</code>. I parse <code>$1</code> using a <code>case;esac</code> selector to determine if <code>$1</code> is an option or an operand, if the option is valid (following <code>$2</code> is not an option and <code>$1</code> value is defined), if the operand allowed. Then I assign child functions to valid options.</p>
<p>It is noted that in order to have multiple options existing together and to NOT require users follow any input order, I create global variables to store the state of valid options. The child functions are called after the <code>while</code> loop and processing input argument, based on the stored option states.</p>
<p>The result is a script that looks like the following:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash </span></div><div class="line"><span class="built_in">set</span> -e</div><div class="line"></div><div class="line">HEXOLOCATION=<span class="string">"/home/Github/hexo/hexo-gcs"</span></div><div class="line">HEXOWORKLOCATION=<span class="string">"/home/Github/hexo/hexo-git"</span></div><div class="line">BACKUPDIR=<span class="string">"/home/Github/user/user.github.io"</span></div><div class="line">CURRENTLOCATION=<span class="variable">$PWD</span></div><div class="line"></div><div class="line">ALLOWEDFILES=(<span class="string">"file1"</span> <span class="string">"file2"</span>) </div><div class="line">ALLOWEDSERVERS=(<span class="string">"hexo-gcp"</span> <span class="string">"hexo-git"</span> <span class="string">"google"</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="title">main</span></span>()&#123;	</div><div class="line">		<span class="comment"># flags, 1 is false, 0 is true. it's the damn bash</span></div><div class="line">		LOCAL_DEPLOY=1</div><div class="line">		SERVER_DEPLOY=1</div><div class="line">		DRY_RUN=0</div><div class="line"></div><div class="line">    FILES=(<span class="string">"<span class="variable">$&#123;ALLOWEDFILES[@]&#125;</span>"</span>); </div><div class="line">    DEPLOYTARGET=(<span class="string">"<span class="variable">$&#123;ALLOWEDSERVERS[@]&#125;</span>"</span>); </div><div class="line"></div><div class="line">    <span class="keyword">if</span> [[ <span class="variable">$#</span> -eq 0 ]]</div><div class="line">    <span class="keyword">then</span></div><div class="line">        <span class="built_in">printf</span> -- <span class="string">"Missing optins, perform DRY RUN\nFor help, run with -h/--help\n"</span></div><div class="line">        <span class="keyword">for</span> target <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;FILES[@]&#125;</span>"</span>; <span class="keyword">do</span> generate <span class="string">"<span class="variable">$target</span>"</span>; <span class="keyword">done</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"....dry run: markdown files generated in rendered/"</span></div><div class="line">        <span class="built_in">exit</span> 0</div><div class="line">    <span class="keyword">fi</span>	</div><div class="line"></div><div class="line">		<span class="comment"># while-loop only store command line arguments into GLOBAL variables</span></div><div class="line">    <span class="keyword">while</span> <span class="literal">true</span> ; <span class="keyword">do</span></div><div class="line">        <span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span> </div><div class="line">            -f |--file) <span class="comment"># required operands</span></div><div class="line">                <span class="keyword">case</span> <span class="string">"<span class="variable">$2</span>"</span> <span class="keyword">in</span></div><div class="line">                    <span class="string">""</span>) die <span class="variable">$1</span> ;;</div><div class="line">                    *) </div><div class="line">                        FILES=(<span class="variable">$2</span>)</div><div class="line">                        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;FILES[@]&#125;</span>"</span>; <span class="keyword">do</span></div><div class="line">                            <span class="keyword">if</span>  is_option <span class="variable">$i</span>; <span class="keyword">then</span> die <span class="variable">$1</span>; <span class="keyword">fi</span> <span class="comment"># check for option </span></div><div class="line">														<span class="keyword">if</span> ! check_allowed <span class="variable">$i</span> <span class="variable">$&#123;ALLOWEDFILES[@]&#125;</span>; <span class="keyword">then</span> <span class="built_in">exit</span> 1; <span class="keyword">fi</span></div><div class="line">                        <span class="keyword">done</span>; </div><div class="line">                        <span class="built_in">shift</span> 2;; <span class="comment"># input FILES are good</span></div><div class="line">                <span class="keyword">esac</span> ;;</div><div class="line">            -l|--<span class="built_in">local</span>) <span class="comment"># no operands expected</span></div><div class="line">                DRY_RUN=1 <span class="comment"># turn off dryrun</span></div><div class="line">                LOCAL_DEPLOY=0 <span class="comment"># turn on local deploy</span></div><div class="line">                <span class="built_in">shift</span> ;;</div><div class="line">            -s|--server) <span class="comment"># optional operands</span></div><div class="line">                <span class="keyword">case</span> <span class="string">"<span class="variable">$2</span>"</span> <span class="keyword">in</span></div><div class="line">                    <span class="string">""</span>) <span class="built_in">shift</span> ;; </div><div class="line">                    *) </div><div class="line">                        DEPLOYTARGET=(<span class="variable">$2</span>)  <span class="comment"># use input</span></div><div class="line">                        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;DEPLOYTARGET[@]&#125;</span>"</span>; <span class="keyword">do</span></div><div class="line">                            <span class="keyword">if</span>  is_option <span class="variable">$i</span>; <span class="keyword">then</span> die <span class="variable">$1</span>; <span class="keyword">fi</span> <span class="comment"># check for option </span></div><div class="line">														<span class="keyword">if</span> ! check_allowed <span class="variable">$i</span> <span class="variable">$&#123;ALLOWEDSERVERS[@]&#125;</span>; <span class="keyword">then</span> <span class="built_in">exit</span> 1; <span class="keyword">fi</span></div><div class="line">                        <span class="keyword">done</span> ; <span class="built_in">shift</span> 2;; <span class="comment"># use input value</span></div><div class="line">                <span class="keyword">esac</span></div><div class="line">                DRY_RUN=1</div><div class="line">                SERVER_DEPLOY=0</div><div class="line">                ;;</div><div class="line">            -n|--dryrun) <span class="comment"># dry-run:generate markdown files only</span></div><div class="line">                DRY_RUN=0</div><div class="line">                <span class="built_in">shift</span> ;;</div><div class="line">            -h|--<span class="built_in">help</span>) <span class="comment"># docs</span></div><div class="line">                print_help</div><div class="line">                <span class="built_in">exit</span> 0</div><div class="line">                ;;</div><div class="line">            --) <span class="built_in">shift</span>; <span class="built_in">break</span> ;;</div><div class="line">            -?*)</div><div class="line">                <span class="built_in">printf</span> <span class="string">'ERROR: Unkown option: %s\nExisting\n\n'</span> <span class="string">"<span class="variable">$1</span>"</span> &gt;&amp;2</div><div class="line">                print_help</div><div class="line">                <span class="built_in">exit</span> 1</div><div class="line">                <span class="built_in">shift</span></div><div class="line">                ;; </div><div class="line">            *) </div><div class="line">                <span class="built_in">break</span> ;; </div><div class="line">        <span class="keyword">esac</span> </div><div class="line">    <span class="keyword">done</span></div><div class="line"></div><div class="line">    <span class="built_in">echo</span>  <span class="string">"choose files: <span class="variable">$&#123;FILES[@]&#125;</span>"</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">""</span></div><div class="line"></div><div class="line">		<span class="comment"># operations are run after all arguments being processed, so operations can be done in other order</span></div><div class="line"></div><div class="line">    <span class="comment"># dry-run</span></div><div class="line">    <span class="keyword">if</span> [[ <span class="variable">$DRY_RUN</span> == 0 ]]; <span class="keyword">then</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"..perform dry run.."</span></div><div class="line">        <span class="keyword">for</span> target <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;FILES[@]&#125;</span>"</span>; <span class="keyword">do</span> generate <span class="string">"<span class="variable">$target</span>"</span>; <span class="keyword">done</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"....dry run: markdown files generated in rendered/"</span></div><div class="line">        <span class="built_in">exit</span> 0</div><div class="line">    <span class="keyword">fi</span></div><div class="line"></div><div class="line">    <span class="comment"># local-deploy</span></div><div class="line">    <span class="keyword">if</span> [[ <span class="variable">$LOCAL_DEPLOY</span> == 0 ]] &amp;&amp; [[ <span class="variable">$SERVER_DEPLOY</span> != 0 ]]; <span class="keyword">then</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"..deploy locally"</span></div><div class="line">        <span class="keyword">for</span> target <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;FILES[@]&#125;</span>"</span>; <span class="keyword">do</span> </div><div class="line">            generate <span class="string">"<span class="variable">$target</span>"</span> &gt; /dev/null</div><div class="line">            deploylocal <span class="string">"<span class="variable">$target</span>"</span></div><div class="line">        <span class="keyword">done</span>; </div><div class="line"></div><div class="line">    <span class="keyword">fi</span></div><div class="line"></div><div class="line">    <span class="comment"># server-deploy</span></div><div class="line">    <span class="keyword">if</span> [[ <span class="variable">$SERVER_DEPLOY</span> == 0 ]]; <span class="keyword">then</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"..deploy on servers: <span class="variable">$&#123;DEPLOYTARGET[@]&#125;</span>"</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">""</span></div><div class="line"></div><div class="line">        <span class="keyword">for</span> target <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;FILES[@]&#125;</span>"</span>; <span class="keyword">do</span> <span class="comment"># deploy locally </span></div><div class="line">            generate <span class="string">"<span class="variable">$target</span>"</span> &gt; /dev/null</div><div class="line">            deploylocal <span class="string">"<span class="variable">$target</span>"</span></div><div class="line">        <span class="keyword">done</span> </div><div class="line"></div><div class="line">        <span class="comment"># deploy to selected server: git or gcp</span></div><div class="line">        <span class="keyword">for</span> dt <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;DEPLOYTARGET[@]&#125;</span>"</span>; <span class="keyword">do</span> </div><div class="line">            deployserver <span class="variable">$dt</span> </div><div class="line">        <span class="keyword">done</span></div><div class="line">    <span class="keyword">fi</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">main <span class="string">"<span class="variable">$@</span>"</span></div></pre></td></tr></table></figure>
<h1 id="pitfalls">Pitfalls</h1>
<p>There are several programming pitfalls that have been pointed out by others. Most likely my code might be broken if some special character or pattern expansion occured. And if my file name starts with <code>-/--</code>. I guess I will have to ask my users to NOT use such filenames and to use double-quotes if they have multiple inputs for one option.</p>
<p>These pitfalls are solvable if you read through at least the following articles. I will follow up on them if I get the chance.</p>
<p><a href="http://mywiki.wooledge.org/glob" target="_blank" rel="noopener">bash: using glob</a> glob: pattern matching, pattern expansion, filename expansion, wildcard <a href="http://mywiki.wooledge.org/BashPitfalls" target="_blank" rel="noopener">bash: pitfalls</a></p>
<h1 id="conclusion">Conclusion</h1>
<p>So I hope you have tolerated my somewhat blurring words and amatuer coding skills. And this piece of note could help you understand a little more on processing commandline input with bash. Please leave any feedbacks you have.</p>
]]></content>
      
        <categories>
            
            <category> programming </category>
            
        </categories>
        
        
        <tags>
            
            <tag> bash </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[A Simple Solution For Virtual Box Usage on Ubuntu/Debian 16.04 with Secure Boot]]></title>
      <url>/vmOnubuntu17/</url>
      <content type="html"><![CDATA[<p>There are numerous cases in which an attempt to run virtualbox package on a Ubuntu/Debian machine fail. One of the cases has something to do with the way new Debian deals with secure boot loader, which is an unavoidable object for current machines, especially when you need a Windows/Linux dual-boot system. A simple and elegant solution for such case has been drafted by <a href="https://askubuntu.com/users/518562/android-dev" target="_blank" rel="noopener">Android Dev</a> at <a href="askubuntu.com">askubuntu</a>. And I take the liberty to quote it here primarily for my own reference.</p>
<a id="more"></a>
<h1 id="sympton">Sympton</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Virtual box is installed on Ubuntu 16.04 with secure boot enabled </div><div class="line">Error when loading `vboxdrv` kernel module by running virtualbox </div><div class="line">Run `\&apos;sudo /sbin/vboxconfig\&apos;` as required</div><div class="line">Error: `vboxdrv.sh: failed: modprobe vboxdrv failed. Please use &apos;dmesg&apos; to find out why.`</div></pre></td></tr></table></figure>
<h1 id="diagnostic">Diagnostic</h1>
<p><em>As quoated from <a href="https://askubuntu.com/questions/900118/vboxdrv-sh-failed-modprobe-vboxdrv-failed-please-use-dmesg-to-find-out-why" target="_blank" rel="noopener">Android Dev</a>:</em></p>
<blockquote>
<p>“The problem is the requirement that all kernel modules must be signed by a key trusted by the UEFI system, otherwise loading will fail. Ubuntu does not sign the third party vbox* kernel modules, but rather gives the user the option to disable Secure Boot upon installation of the virtualbox package. I could do that, but then I would see an annoying “Booting in insecure mode” message every time the machine starts, and also the dual boot Windows 10 installation I have would not function.”</p>
</blockquote>
<p><em>Extra credit goes to: <a href="https://gorka.eguileor.com/vbox-vmware-in-secureboot-linux-2016-update/" target="_blank" rel="noopener">VBox &amp; VMware in SecureBoot Linux (2016 Update)</a></em></p>
<h1 id="solution">Solution</h1>
<p><em>As COMPLETELY quoated from <a href="https://askubuntu.com/questions/900118/vboxdrv-sh-failed-modprobe-vboxdrv-failed-please-use-dmesg-to-find-out-why" target="_blank" rel="noopener">Android Dev</a>:</em> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">1. Install the virtualbox package. If presented with the option to disable Secure Boot. Choose “No”. </div><div class="line">2. Create a personal public/private RSA key pair which will be used to sign kernel modules. The author chose to use the root account and the directory /root/module-signing/ to store all things related to signing kernel modules.</div><div class="line"></div><div class="line">    $ sudo -i</div><div class="line">    mkdir /root/module-signing</div><div class="line">    cd /root/module-signing</div><div class="line">    openssl req -new -x509 -newkey rsa:2048 -keyout MOK.priv -outform DER -out MOK.der -nodes -days 36500 -subj &quot;/CN=YOUR_NAME/&quot;</div><div class="line">    ## YOUR_NAME = machine owner/user/etc</div><div class="line"></div><div class="line">    [...]</div><div class="line">    # chmod 600 MOK.priv</div><div class="line"></div><div class="line">3. Use the MOK (“Machine Owner Key”) utility to import the public key so that it can be trusted by the system. This is a two step process where the key is first imported, and then later must be enrolled when the machine is booted the next time. A simple password is good enough, as it is only for temporary use.</div><div class="line"></div><div class="line">    # mokutil --import /root/module-signing/MOK.der</div><div class="line">    input password:</div><div class="line">    input password again:</div><div class="line"></div><div class="line">4. Reboot the machine. </div><div class="line">   The MOK manager EFI utility should automatically start with bootloader.  </div><div class="line">   It will ask for parts of the password supplied in step 3.  </div><div class="line">   Choose to `“Enroll MOK”`. </div><div class="line">   Complete the enrollment, then continue with the boot.  </div><div class="line">   The Linux kernel will log the keys that are loaded, and you should be able to see your own key with the command:  `dmesg|grep &apos;EFI: Loaded cert&apos;`</div><div class="line"></div><div class="line">5. Using a signing utility shippped with the kernel build files, sign all the VirtualBox modules using the private MOK key generated in step 3.</div><div class="line">   The author provided a script for it:`/root/module-signing/sign-vbox-modules` </div><div class="line">   It can be easily run when new kernels are installed as part of regular updates</div><div class="line"></div><div class="line">    #!/bin/bash</div><div class="line"></div><div class="line">    for modfile in $(dirname $(modinfo -n vboxdrv))/*.ko; do</div><div class="line">    echo &quot;Signing $modfile&quot;</div><div class="line">    /usr/src/linux-headers-$(uname -r)/scripts/sign-file sha256 \</div><div class="line">                                        /root/module-signing/MOK.priv \</div><div class="line">                                       /root/module-signing/MOK.der &quot;$modfile&quot;</div><div class="line">    done</div><div class="line"></div><div class="line">    To authorize it: `chmod 700 /root/module-signing/sign-vbox-modules`</div><div class="line"></div><div class="line">6. Run the script, and for every time a new kernel is updated.</div><div class="line">7. Load vboxdrv module: `# modprobe vboxdrv`</div></pre></td></tr></table></figure></p>
<p><br><font size="2"> Again, complete courtesy to</font><br> <a href="https://askubuntu.com/questions/900118/vboxdrv-sh-failed-modprobe-vboxdrv-failed-please-use-dmesg-to-find-out-why" target="_blank" rel="noopener">Android Dev</a>’s answer at <a href="askubuntu.com">askubuntu</a>.</p>
]]></content>
      
        <categories>
            
            <category> Linux </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Github & Linux Tips]]></title>
      <url>/githubTips/</url>
      <content type="html"><![CDATA[<p>Github Page provides a fast and easy way to set up a static website/blog. Since it is managed as a code repository rather than a website, I figure that it is useful to provide some commonly needed tips for a Github newbee like me so that the job can be done efficiently with minimum distraction. So here we go.</p>
<a id="more"></a>
<h2 id="using-multiple-github-accounts">Using multiple Github accounts</h2>
<ol style="list-style-type: decimal">
<li><p><a href="http://tommaso.pavese.me/2014/07/08/git-config-for-multiple-github-accounts/" target="_blank" rel="noopener">Git config for multiple GitHub accounts</a></p>
<p>A comprehensive guide on using multiple github accounts on terminal</p></li>
<li><p><a href="http://tommaso.pavese.me/2014/07/08/git-config-for-multiple-github-accounts/" target="_blank" rel="noopener">Set up push credentials</a></p>
A short snipet on how to push without entering username everytime 1. Set up SSH for each account, <a href="https://gist.github.com/jexchan/2351996" target="_blank" rel="noopener">link1</a>, <a href="https://code.tutsplus.com/tutorials/quick-tip-how-to-work-with-github-and-multiple-accounts--net-22574" target="_blank" rel="noopener">link2</a>
<ol start="2" style="list-style-type: decimal">
<li>Make Sure <code>.ssh/config</code> file is correctly configured</li>
<li>Set up <code>--local</code> push configuration: <code>git config --local user.name &quot;Name Surname&quot;</code>, <code>git config --local user.email &quot;name.surname@company.com&quot;</code></li>
<li>Set remote url: <code>git remote set-url origin git@work-github.com:account_name/repo_name.git</code></li>
</ol></li>
</ol>
<h2 id="remove-old-git-commits">Remove old git commits</h2>
<p>What if commits went wrong?</p>
<ol style="list-style-type: decimal">
<li><a href="https://stackoverflow.com/questions/13716658/how-to-delete-all-commit-history-in-github" target="_blank" rel="noopener">Remove all commit history and re-create current repository</a></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">1.Checkout: git checkout --orphan latest_branch</div><div class="line"></div><div class="line">2.Add all the files: git add -A</div><div class="line"></div><div class="line">3.Commit the changes: git commit -am &quot;commit message&quot;</div><div class="line"></div><div class="line">4.Delete the branch: git branch -D master</div><div class="line"></div><div class="line">5.Rename the current branch to master: git branch -m master</div><div class="line"></div><div class="line">6.Finally, force update your repository: git push -f origin master</div></pre></td></tr></table></figure>
<ol start="2" style="list-style-type: decimal">
<li><p><a href="https://stackoverflow.com/questions/9725156/remove-old-git-commits" target="_blank" rel="noopener">Remove old git commits</a></p>
<p>Use <code>git rebase -i HEAD~4</code> command</p></li>
</ol>
<p> </p>
<h2 id="kramdown-syntax"><a href="https://kramdown.gettalong.org/syntax.html" target="_blank" rel="noopener">Kramdown Syntax</a></h2>
<p><em>A quick reference on writing with Github page</em></p>
<h2 id="configure-vim-8.0-with-python-python3-ruby-and-lua-support-on-ubuntu-16.04">Configure Vim 8.0 with Python, Python3, Ruby and Lua support on Ubuntu 16.04</h2>
<p><code>Ref: https://gist.github.com/odiumediae/3b22d09b62e9acb7788baf6fdbb77cf8</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">sudo apt-get remove --purge vim vim-runtime vim-gnome vim-tiny vim-gui-common</div><div class="line"> </div><div class="line">sudo apt-get install liblua5.1-dev luajit libluajit-5.1 python-dev python3-dev ruby-dev libperl-dev libncurses5-dev libatk1.0-dev libx11-dev libxpm-dev libxt-dev</div><div class="line"></div><div class="line">#Optional: so vim can be uninstalled again via `dpkg -r vim`</div><div class="line">sudo apt-get install checkinstall</div><div class="line"></div><div class="line">sudo rm -rf /usr/local/share/vim /usr/bin/vim</div><div class="line"></div><div class="line">cd ~</div><div class="line">git clone https://github.com/vim/vim</div><div class="line">cd vim</div><div class="line">git pull &amp;&amp; git fetch</div><div class="line"></div><div class="line">#In case Vim was already installed</div><div class="line">cd src</div><div class="line">make distclean</div><div class="line">cd ..</div><div class="line"></div><div class="line">./configure \</div><div class="line">--enable-multibyte \</div><div class="line">--enable-perlinterp=dynamic \</div><div class="line">--enable-rubyinterp=dynamic \</div><div class="line">--with-ruby-command=/usr/bin/ruby \</div><div class="line">--enable-pythoninterp=dynamic \</div><div class="line">--with-python-config-dir=/usr/lib/python2.7/config-x86_64-linux-gnu \</div><div class="line">--enable-python3interp \</div><div class="line">--with-python3-config-dir=/usr/lib/python3.5/config-3.5m-x86_64-linux-gnu \</div><div class="line">--enable-luainterp \</div><div class="line">--with-luajit \</div><div class="line">--enable-cscope \</div><div class="line">--enable-gui=auto \</div><div class="line">--with-features=huge \</div><div class="line">--with-x \</div><div class="line">--enable-fontset \</div><div class="line">--enable-largefile \</div><div class="line">--disable-netbeans \</div><div class="line">--with-compiledby=&quot;yourname&quot; \</div><div class="line">--enable-fail-if-missing</div><div class="line"></div><div class="line">make &amp;&amp; sudo make install</div></pre></td></tr></table></figure>
<p>Tips: 1. check ruby version and ruby path: mine is <code>/usr/bin/ruby</code> instead of <code>usr/local/bin/ruby</code> 2. to compile with pyhton, you need to install <code>-dev</code> package for each version 3. checek <code>with-compiledby=yourname</code></p>
]]></content>
      
        <categories>
            
            <category> programming </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Github </tag>
            
            <tag> webdev </tag>
            
            <tag> linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[SNH48 Team X 友情(CP)大乱炖 B站补档目录]]></title>
      <url>/teamX-cp/</url>
      <content type="html"><![CDATA[<p>主页没什么好说的，吃糖吃到饱，吃刀片吃到不知所措。。在梦旗一周年之际，又完成了自己饭偶像生涯中一个夙愿。</p>
<p>大家多来看看这群真情实感的小女生吧。</p>
<p>清流，并不意味着无趣，她们之间也一直迸发出各种有趣到让人瑟瑟发抖的火花。大家要耐心地观察。</p>
<p>当然，作为不要face的cp粉，喜欢的其实也只是看到她们关系融洽，快快乐乐地一起生活工作。偶像工作不容易，能够有一群可以互相信任互相依靠的朋友，粉丝父母看着也会快乐放心很多。多余的想法，不存在的。相遇相处，要珍惜的只是这一段段缘分和时光。</p>
<p>主页半路入坑，对很多梗都不了解，也可能有一些误解。所以请大家看到缺失或者不合适的地方私信主页，一定更正。</p>
<p>最后，祝X队小偶像《梦想的旗帜》一周年快乐，希望大家喜欢她们的新公演。</p>
<p>PS：希望友情的初心只有一个，希望明年还记得，不存在的。</p>
<p>PS: 有没有盆友私信我一点配图啊~想给每个CP配个图</p>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">版权：本页面仅仅收录视频链接，不涉及任何链接视频的版权。</div></pre></td></tr></table></figure>
<h2 id="全员向---x队的cp都是乱来的">全员向 - X队的CP都是乱来的</h2>
<p><a href="https://www.bilibili.com/video/av6137510" target="_blank" rel="noopener">TeamX全员向CP混剪（甜到牙疼的视频，不点进来看一眼吗？）</a></p>
<p><a href="https://www.bilibili.com/video/av9176162" target="_blank" rel="noopener">teamX-比同人文还要混乱的队内关系【王叔叔口述】</a></p>
<p><a href="https://www.bilibili.com/video/av7767032" target="_blank" rel="noopener">真·隔壁的王叔叔 束·水·三·韫【三韫】【三束】【束韫】</a></p>
<h2 id="水灰---直男开窍vs小学生的恋情">水灰 - 直男开窍vs小学生的恋情</h2>
<h3 id="mv误">MV(误)</h3>
<p><a href="https://www.bilibili.com/video/av14573837" target="_blank" rel="noopener">【水韫灰】电灯胆</a></p>
<p><a href="https://www.bilibili.com/video/av5584370" target="_blank" rel="noopener">水灰韫灰·电灯胆（虐向）+九灰彩蛋</a></p>
<p><a href="https://www.bilibili.com/video/av6902287" target="_blank" rel="noopener">水灰—生誕祭2016</a></p>
<p><a href="https://www.bilibili.com/video/av6435922" target="_blank" rel="noopener">恋爱循环 水水x灰灰</a></p>
<p><a href="https://www.bilibili.com/video/av13861926" target="_blank" rel="noopener">（伪）有些人一谈恋爱就招人讨厌！</a></p>
<h3 id="mc剪辑">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av15026689" target="_blank" rel="noopener">冯晓菲的直男之旅【OLD48】</a></p>
<p><a href="https://www.bilibili.com/video/av15391825" target="_blank" rel="noopener">【冯晓菲×杨冰怡】《莫寒前辈给别人发生祝了VS娜娜前辈不要我了》</a></p>
<p><a href="https://www.bilibili.com/video/av15081605" target="_blank" rel="noopener">【水灰】【冯晓菲x杨冰怡】著名女团成员直播打架片段前因后果！</a></p>
<p><a href="https://www.bilibili.com/video/av15079631" target="_blank" rel="noopener">【冯晓菲x杨冰怡】吃完火锅回家路上的戏精二人组</a></p>
<p><a href="https://www.bilibili.com/video/av15494094" target="_blank" rel="noopener">水灰互怼，灰灰模仿钓系偶像水水自我介绍，水水在唱歌</a></p>
<p><a href="https://www.bilibili.com/video/av14967887/" target="_blank" rel="noopener">《水灰带call教学，大闪怎么弄，是敲水水头？（误）》</a></p>
<p><a href="https://www.bilibili.com/video/av5289703" target="_blank" rel="noopener">snh48冯晓菲&amp;杨冰怡</a></p>
<p><a href="https://www.bilibili.com/video/av15536143" target="_blank" rel="noopener">水灰·苦是饭头苦</a></p>
<p><a href="https://www.bilibili.com/video/av14258245" target="_blank" rel="noopener">《水灰发糖了，天使的圈套&amp;爱恨的泪》四周年公演</a></p>
<p><a href="https://www.bilibili.com/video/av15016931" target="_blank" rel="noopener">【杨冰怡x冯晓菲】20171003杨冰怡生日公演水灰cut</a></p>
<p><a href="https://www.bilibili.com/video/av5493810" target="_blank" rel="noopener">【杨冰怡x冯晓菲】20160723 杨冰怡生日公演 生日环节 冯晓菲</a></p>
<p><a href="https://www.bilibili.com/video/av15169700" target="_blank" rel="noopener">【冯晓菲x杨冰怡】20150718 杨冰怡生日公演水灰相关cut</a></p>
<p><a href="https://www.bilibili.com/video/av10483543" target="_blank" rel="noopener">水灰正教【人鱼】【水煮鱼】</a></p>
<p><a href="https://www.bilibili.com/video/av14626869" target="_blank" rel="noopener">【水灰】【冯晓菲x杨冰怡】心型病毒</a></p>
<p><a href="https://www.bilibili.com/video/av8163120" target="_blank" rel="noopener">【水灰】杨冰怡、冯晓菲《下一站是你》剪辑版</a></p>
<h2 id="韫灰---随时随地都在晒素质极差">韫灰 - 随时随地都在晒，素质极差</h2>
<h3 id="mv">MV</h3>
<p><a href="https://www.bilibili.com/video/av14903879" target="_blank" rel="noopener">【韫灰】恋爱循环</a></p>
<p><a href="https://www.bilibili.com/video/av6235067" target="_blank" rel="noopener">【三韫灰冉】红白玫瑰。[yyy·zds·fxf·sxr]</a></p>
<h3 id="mc剪辑-1">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av13925303" target="_blank" rel="noopener">重大发表：冯晓菲离婚了【OLD48】</a></p>
<p><a href="https://www.bilibili.com/video/av12482783" target="_blank" rel="noopener">《回村的诱惑2（重大发表：韫灰结婚了）》20170723口袋</a></p>
<p><a href="https://www.bilibili.com/video/av12177663" target="_blank" rel="noopener">《回村的诱惑1》20170713口袋直播剪辑</a></p>
<p><a href="https://www.bilibili.com/video/av14131980" target="_blank" rel="noopener">禁忌的二人（韫灰）【OLD48】</a></p>
<p><a href="https://www.bilibili.com/video/av13892226" target="_blank" rel="noopener">【韫灰秀恩爱，可怜的绵羊被晒一脸】七夕特别公演剪辑</a></p>
<p><a href="https://www.bilibili.com/video/av14939471" target="_blank" rel="noopener">《亲吻狂魔小灰灰》</a></p>
<p><a href="https://www.bilibili.com/video/av12802018" target="_blank" rel="noopener">韫灰夫妻第四届总选握手秀恩爱直播【20170731】</a></p>
<p><a href="https://www.bilibili.com/video/av7323347" target="_blank" rel="noopener">《我是被我的刀第一个伤到的人》冯晓菲口袋48电台直播</a></p>
<p><a href="https://www.bilibili.com/video/av7496996" target="_blank" rel="noopener">20161211 杨韫玉口袋直播 灰韫约会</a></p>
<p><a href="https://www.bilibili.com/video/av15816712" target="_blank" rel="noopener">【如果想谁给她出个路费让她回来，给杨韫玉报也不给你们报】</a></p>
<p><a href="https://www.bilibili.com/video/av13884560" target="_blank" rel="noopener">杨韫玉+冯晓菲【禁忌的爱】</a></p>
<h2 id="水韫灰---什么是伦理不存在的">水韫灰 - 什么是伦理？不存在的</h2>
<h3 id="mv-1">MV</h3>
<p><a href="https://www.bilibili.com/video/av14573837" target="_blank" rel="noopener">【水韫灰】电灯胆</a></p>
<p><a href="https://www.bilibili.com/video/av5584370" target="_blank" rel="noopener">水灰韫灰·电灯胆（虐向）+九灰彩蛋</a></p>
<h3 id="mc剪辑-2">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av13925220" target="_blank" rel="noopener">你们离婚后房子归YBY【OLD48】</a></p>
<p><a href="https://www.bilibili.com/video/av6987992" target="_blank" rel="noopener">[SNH48]中秋特别公演unit《青涩的香蕉》</a></p>
<h2 id="菌束---都是粉丝抖m我们只要做朋友">菌束 - 都是粉丝抖M，我们只要做朋友</h2>
<h3 id="mv-2">MV</h3>
<p><a href="https://www.bilibili.com/video/av5051584" target="_blank" rel="noopener">（微虐）菌束x文晶x晶菇【电灯胆】- 你告诉我这是微虐</a></p>
<p><a href="https://www.bilibili.com/video/av4913425" target="_blank" rel="noopener">【菌束】下雨了 吃糖会蛀牙的</a></p>
<p><a href="https://www.bilibili.com/video/av4871775" target="_blank" rel="noopener">I Do Again（甜向×安利向）</a></p>
<p><a href="https://www.bilibili.com/video/av3773143" target="_blank" rel="noopener">菌束-第三年的见异思迁</a></p>
<p><a href="https://www.bilibili.com/video/av4033805" target="_blank" rel="noopener">【SNH48】三·韫束·菌 ×红白玫瑰</a></p>
<p><a href="https://www.bilibili.com/video/av4797732" target="_blank" rel="noopener">菌束《消失的恋人》解谜游戏实况解说（伪）</a></p>
<h3 id="mc剪辑-3">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av4096074" target="_blank" rel="noopener">束菌韫×卖拐（汪束闫明筠杨韫玉→大忽悠傻媳妇小短腿一起演小品）</a></p>
<p><a href="https://www.bilibili.com/video/av10366936" target="_blank" rel="noopener">《ˊ_-ˋ 直播ymj喝豆汁》汪束口袋48直播（20170506）</a></p>
<p><a href="https://www.bilibili.com/video/av6941417" target="_blank" rel="noopener">《菌菇回来了》汪束口袋48直播（20161103）</a></p>
<p><a href="https://www.bilibili.com/video/av5546909" target="_blank" rel="noopener">汪束碎碎念（菌束部分）</a></p>
<p><a href="https://www.bilibili.com/video/av5697265" target="_blank" rel="noopener">2016年生诞公演&amp;闫明筠来信</a></p>
<p><a href="https://www.bilibili.com/video/av5502425" target="_blank" rel="noopener">《wss和ymj的跑步大队》汪束口袋48直播（20160726）</a></p>
<p><a href="https://www.bilibili.com/video/av4759332" target="_blank" rel="noopener">我把你当兄弟 你却_________</a></p>
<p><a href="https://www.bilibili.com/video/av5669032" target="_blank" rel="noopener">SNH48李钊-就在刚才！我！成为了汪束的英雄！！！</a></p>
<p><a href="https://www.bilibili.com/video/av6412945" target="_blank" rel="noopener">《叔叔教菌菇玩游戏》闫明筠口袋48直播（20160728）</a></p>
<p><a href="https://www.bilibili.com/video/av10562692" target="_blank" rel="noopener">【菌束】 下一站是你</a></p>
<p><a href="https://www.bilibili.com/video/av3663416" target="_blank" rel="noopener">闫明筠生日冷餐会菌束部分剪辑及菌束日常2.0视频</a></p>
<h2 id="晶菇---给你地缠绵放在心底">晶菇 - 给你地缠绵放在心底</h2>
<h3 id="翻跳">翻跳</h3>
<p><a href="https://www.bilibili.com/video/av4369295" target="_blank" rel="noopener">闫明筠 、李晶 TroubleMaker的《没有明天》</a></p>
<p><a href="https://www.bilibili.com/video/av4953982" target="_blank" rel="noopener">晶菇 true blood</a></p>
<p><a href="https://www.bilibili.com/video/av5020260" target="_blank" rel="noopener">【SNH48-闫明筠】再爱一回</a></p>
<p><a href="https://www.bilibili.com/video/av4772392" target="_blank" rel="noopener">【SNH48闫明筠】和晶晶的缠绵版【曲终人散】</a></p>
<h3 id="mc剪辑-4">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av4510563" target="_blank" rel="noopener">闫明筠生日公演庆祝部分 李晶请前辈录视频祝福</a></p>
<h2 id="文晶---对你的关心写在掌心">文晶 - 对你的关心写在掌心</h2>
<p><a href="https://www.bilibili.com/video/av16017125/" target="_blank" rel="noopener">【文晶】【李晶X孙歆文】以后还做朋友</a></p>
<p>### 共演</p>
<p><a href="https://www.bilibili.com/video/av11253648/index_2.html" target="_blank" rel="noopener">【真正的友情】2017大米生诞 和新闻一起拉票</a></p>
<p><a href="https://www.bilibili.com/video/av7069059/index_38.html" target="_blank" rel="noopener">【想要守护你】2016大米生诞 新闻读信(8:30开始)</a></p>
<p><a href="https://www.bilibili.com/video/av14383046" target="_blank" rel="noopener">170907 纽约梦（李晶，孙歆文）</a></p>
<p><a href="https://www.bilibili.com/video/av9761441" target="_blank" rel="noopener">流着泪的微笑-李晶&amp;孙歆文</a></p>
<p><a href="https://www.bilibili.com/video/av6296886" target="_blank" rel="noopener">孙歆文、李晶、汪佳翎、谢天依《再爱一回》</a></p>
<h3 id="mc剪辑-5">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av7571626" target="_blank" rel="noopener">《在大奶奶房间蹭吃的~》孙歆文口袋</a></p>
<p><a href="https://www.bilibili.com/video/av7573211" target="_blank" rel="noopener">《和报纸哥哥一起吃饭吧~》李晶口袋</a></p>
<p><a href="https://www.bilibili.com/video/av6454626" target="_blank" rel="noopener">《与报纸哥哥一起教你做黑暗饮料》</a></p>
<h2 id="蚊菌---w舞姬的惺惺相惜">蚊菌 - W舞姬的惺惺相惜</h2>
<h3 id="翻跳-1">翻跳</h3>
<p><a href="https://www.bilibili.com/video/av7035580" target="_blank" rel="noopener">【菌菇&amp;蚊子】弃子之山</a></p>
<p><a href="https://www.bilibili.com/video/av4335963" target="_blank" rel="noopener">【菌菇&amp;蚊子】MAD HEAD LOVE【暗戳戳的渣投稿】</a></p>
<p><a href="https://www.bilibili.com/video/av4358934" target="_blank" rel="noopener">【慎点【菌菇&amp;蚊子】重置版喵生【自带鬼畜】</a></p>
<p><a href="https://www.bilibili.com/video/av3832882" target="_blank" rel="noopener">【菌菇とMako】啊啊，美妙的喵生【情人节快乐wฅ】【双人初投】</a></p>
<p><a href="https://www.bilibili.com/video/av8275101" target="_blank" rel="noopener">【菌菇とMako】12 Fan Club【鸡年快乐w】</a></p>
<p><a href="https://www.bilibili.com/video/av5447073" target="_blank" rel="noopener">【菌菇&amp;Mako】渴望诞生</a></p>
<p><a href="https://www.bilibili.com/video/av14045426" target="_blank" rel="noopener">【菌蚊】麻烦死啦</a></p>
<h2 id="九笨---清流偶像安静发糖">九笨 - 清流偶像，安静发糖</h2>
<h3 id="mv-3">MV</h3>
<p><a href="https://www.bilibili.com/video/av11612667" target="_blank" rel="noopener">【九笨】有必要不好意思吗</a></p>
<p><a href="https://www.bilibili.com/video/av11604554" target="_blank" rel="noopener">【九笨】飞雪</a></p>
<p><a href="https://www.bilibili.com/video/av11620039" target="_blank" rel="noopener">【九笨】让梦冬眠</a></p>
<p><a href="https://www.bilibili.com/video/av4656069" target="_blank" rel="noopener">【九九×笨笨】《99次我爱他》</a></p>
<p><a href="https://www.bilibili.com/video/av13548945" target="_blank" rel="noopener">【GNZ48】【cp向】美杜莎的温柔</a></p>
<h3 id="mc剪辑-6">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av12564351" target="_blank" rel="noopener">汪佳翎 谢天依《追光者》</a></p>
<p><a href="https://www.bilibili.com/video/av9567136" target="_blank" rel="noopener">《人鱼》-谢天依 汪佳翎</a></p>
<p><a href="https://www.bilibili.com/video/av13440631" target="_blank" rel="noopener">《完美超载》谢天依 汪佳翎 陈琳</a></p>
<p><a href="https://www.bilibili.com/video/av7351627" target="_blank" rel="noopener">《和九笨一起去吃火锅》王晓佳口袋</a></p>
<p><a href="https://www.bilibili.com/video/av10720802" target="_blank" rel="noopener">【九笨】微博秒拍发糖合集（P2高甜慎点）</a></p>
<p><a href="https://www.bilibili.com/video/av9582276" target="_blank" rel="noopener">【SNH48】九笨合作unit合集</a></p>
<p><a href="https://www.bilibili.com/video/av9705473" target="_blank" rel="noopener">【九笨】一千零一夜</a></p>
<p><a href="https://www.bilibili.com/video/av9657079" target="_blank" rel="noopener">【九笨】gili gili eye</a></p>
<p><a href="https://www.bilibili.com/video/av9822340" target="_blank" rel="noopener">【九笨】20170413公演mc剪辑（高糖）</a></p>
<p><a href="https://www.bilibili.com/video/av9680747" target="_blank" rel="noopener">【九笨】旧糖回顾系列2016.04</a></p>
<p><a href="https://www.bilibili.com/video/av5120260" target="_blank" rel="noopener">16626 谢天依生日环节 九笨cut</a></p>
<p><a href="https://www.bilibili.com/video/av10421220" target="_blank" rel="noopener">【九笨】两个直女的读信环节</a></p>
<p><a href="https://www.bilibili.com/video/av9675309" target="_blank" rel="noopener">【SNH48】【九笨】九九生诞祭特别节目</a></p>
<p><a href="https://www.bilibili.com/video/av9674769" target="_blank" rel="noopener">【九笨】笨笨生诞祭特别节目</a></p>
<p><a href="https://www.bilibili.com/video/av7061916" target="_blank" rel="noopener">汪佳翎口袋直播 九笨大法好</a></p>
<p><a href="https://www.bilibili.com/video/av9780613" target="_blank" rel="noopener">【九笨】星厨驾到直播稍微cut版</a></p>
<p><a href="https://www.bilibili.com/video/av13012102" target="_blank" rel="noopener">下一个景点：九笨的房间！170723 汪佳翎生日公演</a></p>
<p><a href="https://www.bilibili.com/video/av9563860" target="_blank" rel="noopener">TeamX两周年公演 010被九笨撒狗粮</a></p>
<h2 id="九笨010---爸爸妈妈想看你快活地长大">九笨010 - 爸爸妈妈想看你快活地长大</h2>
<h3 id="mv-4">MV</h3>
<p><a href="https://www.bilibili.com/video/av15398177" target="_blank" rel="noopener">我看到的日月星成员的生日会怎么是这样的？</a></p>
<h3 id="mc剪辑-7">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av13333197" target="_blank" rel="noopener">完美犯罪（陈琳/林忆宁/谢天依）</a></p>
<p><a href="https://www.bilibili.com/video/av12550805" target="_blank" rel="noopener">汪佳翎&amp;陈琳&amp;谢天依&amp;林忆宁 - 黑天鹅</a></p>
<p><a href="https://www.bilibili.com/video/av14256674" target="_blank" rel="noopener">对峙 林忆宁 谢天依</a></p>
<p><a href="https://www.bilibili.com/video/av14402148" target="_blank" rel="noopener">游乐园 谢天依直播 20170912【笨笨 010 大头】</a></p>
<p><a href="https://www.bilibili.com/video/av13049537" target="_blank" rel="noopener">林忆宁生日公演：日月星出道，爸爸妈妈的祝福</a></p>
<p><a href="https://www.bilibili.com/video/av12053094" target="_blank" rel="noopener">《和010还有九九一起吃海底捞》谢天依口袋</a></p>
<p><a href="https://www.bilibili.com/video/av9861592" target="_blank" rel="noopener">20170319 谢天依雇林忆宁刷微博评论</a></p>
<p><a href="https://www.bilibili.com/video/av4750228" target="_blank" rel="noopener">【SNH48谢天依】#整人视频#</a></p>
<p><a href="https://www.bilibili.com/video/av11712941" target="_blank" rel="noopener">谢天依生日公演林忆宁CUT：汪！</a></p>
<h2 id="三韫---情不知所起一往而深">三韫 - 情不知所起，一往而深</h2>
<h3 id="mv-5">MV</h3>
<p><a href="https://www.bilibili.com/video/av4040763" target="_blank" rel="noopener">【三韫】Everytime we touch</a></p>
<p><a href="https://www.bilibili.com/video/av6235067" target="_blank" rel="noopener">【三韫灰冉】红白玫瑰。[yyy·zds·fxf·sxr]</a></p>
<p><a href="https://www.bilibili.com/video/av4033805" target="_blank" rel="noopener">【SNH48】三·韫束·菌 ×红白玫瑰</a></p>
<p><a href="https://www.bilibili.com/video/av3939482" target="_blank" rel="noopener">【三韫】【杨韫玉】【张丹三】给三韫一点爱</a></p>
<p><a href="https://www.bilibili.com/video/av6365881" target="_blank" rel="noopener">【三韫】【张丹三】【杨韫玉】三韫结婚吧~</a></p>
<p><a href="https://www.bilibili.com/video/av8379439" target="_blank" rel="noopener">【三韫】【张丹三】【杨韫玉】我有着和你一样的情绪</a></p>
<p><a href="https://www.bilibili.com/video/av4222110" target="_blank" rel="noopener">【三韫】【杨韫玉】【张丹三】我的三韫不可能这么甜</a></p>
<p><a href="https://www.bilibili.com/video/av12369218" target="_blank" rel="noopener">【三韫】【张丹三x杨韫玉】留在你方圆几里</a></p>
<p><a href="https://www.bilibili.com/video/av8262908" target="_blank" rel="noopener">【百合】【三韫】恋爱写真（无敌短，没有正片真的没有</a></p>
<p><a href="https://www.bilibili.com/video/av4551540" target="_blank" rel="noopener">大概是最甜的糖</a></p>
<p><a href="https://www.bilibili.com/video/av5818400" target="_blank" rel="noopener">【三韫】告白气球~</a></p>
<p><a href="https://www.bilibili.com/video/av5662922" target="_blank" rel="noopener">【三韫】遇见你的时候所有星星都落在我头上</a></p>
<p><a href="https://www.bilibili.com/video/av4600248" target="_blank" rel="noopener">大概是有毒的糖</a></p>
<p><a href="https://www.bilibili.com/video/av3957105" target="_blank" rel="noopener">【三韫】A Little Love</a></p>
<p><a href="https://www.bilibili.com/video/av4073961" target="_blank" rel="noopener">【三韫】【SNH48】化身孤岛的鲸</a></p>
<p><a href="https://www.bilibili.com/video/av5895276" target="_blank" rel="noopener">【三韫】空白格</a></p>
<p><a href="https://www.bilibili.com/video/av4321947" target="_blank" rel="noopener">三韫大法好！！糖吃多了换换口味之 Take me to church</a></p>
<p><a href="https://www.bilibili.com/video/av5807909" target="_blank" rel="noopener">三韫—上心</a></p>
<p><a href="https://www.bilibili.com/video/av15284702" target="_blank" rel="noopener">【三韫】你看不见</a></p>
<p><a href="https://www.bilibili.com/video/av4528469" target="_blank" rel="noopener">[ 三韫 ] Me &amp; U</a></p>
<p><a href="https://www.bilibili.com/video/av5041341" target="_blank" rel="noopener">【三韫】独家记忆</a></p>
<p><a href="https://www.bilibili.com/video/av3957105" target="_blank" rel="noopener">【三韫】A Little Love</a></p>
<p><a href="https://www.bilibili.com/video/av14559025" target="_blank" rel="noopener">杨韫玉生日公演 特殊表演环节 【张丹三】</a></p>
<h3 id="mc剪辑-8">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av12204892" target="_blank" rel="noopener">【良心5小时】<三韫> 各种cut</三韫></a></p>
<p><a href="https://www.bilibili.com/video/av13955557" target="_blank" rel="noopener">【SNH48 张丹三X杨韫玉】三韫七夕街头羞耻采访路人</a></p>
<p><a href="https://www.bilibili.com/video/av4352790" target="_blank" rel="noopener">杨韫玉亲张丹三 SNH48杨韫玉生日公演</a></p>
<p><a href="https://www.bilibili.com/video/av4585927" target="_blank" rel="noopener">【三韫】【杨韫玉】【张丹三】任性虐狗的流星</a></p>
<p><a href="https://www.bilibili.com/video/av7679538" target="_blank" rel="noopener">《三韫发糖啦~平安夜一起吃饭》杨韫玉and张丹三口袋</a></p>
<p><a href="https://www.bilibili.com/video/av4414655" target="_blank" rel="noopener">20151212 X队MC3别人喜欢自己哪点之杨韫玉张丹三</a></p>
<p><a href="https://www.bilibili.com/video/av6670030" target="_blank" rel="noopener">20160914 X队MC3公主抱 张丹三抱杨韫玉</a></p>
<p><a href="https://www.bilibili.com/video/av3983757" target="_blank" rel="noopener">【三韫】【张丹三】【杨韫玉】国美MC三韫</a></p>
<p><a href="https://www.bilibili.com/video/av4910894" target="_blank" rel="noopener">心型病毒 SNH48 B30 杨冰怡 杨韫玉 张丹三</a></p>
<p><a href="https://www.bilibili.com/video/av4387401" target="_blank" rel="noopener">【SNH48张丹三】特别公演时溜出剧场逛街，遇到miyo和鱼哥！</a></p>
<p><a href="https://www.bilibili.com/video/av14195293" target="_blank" rel="noopener">【三韫】MC互动剪辑（最后的钟声响起）</a></p>
<p><a href="https://www.bilibili.com/video/av7625626" target="_blank" rel="noopener">三韫直播吐槽大会（20161220）</a></p>
<p><a href="https://www.bilibili.com/video/av7126450" target="_blank" rel="noopener">【三韫】水手服(20161116)</a></p>
<p><a href="https://www.bilibili.com/video/av15261121" target="_blank" rel="noopener">一年一次的三韫【OLD48】</a></p>
<p><a href="https://www.bilibili.com/video/av8657676" target="_blank" rel="noopener">【SNH48】盘点塞纳河那些动人的情话（三）</a></p>
<h2 id="文草---普通邻居的刻薄互怼w大只萝莉">文草 - 普通邻居的刻薄互怼，W大只萝莉</h2>
<h3 id="mv-6">MV</h3>
<p><a href="https://www.bilibili.com/video/av13894787" target="_blank" rel="noopener">文草《一次就好》治愈甜向</a></p>
<p><a href="https://www.bilibili.com/video/av7255906" target="_blank" rel="noopener">文草xW王《一直很安静》</a></p>
<p><a href="https://www.bilibili.com/video/av10900757" target="_blank" rel="noopener">【文草】Wildest Dreams</a></p>
<p><a href="https://www.bilibili.com/video/av9532234" target="_blank" rel="noopener">【文草】I don’t wanna live forever</a></p>
<p><a href="https://www.bilibili.com/video/av12996583" target="_blank" rel="noopener">【文草】If This Was a Movie</a></p>
<p><a href="https://www.bilibili.com/video/av7202824" target="_blank" rel="noopener">（强行胡剪）文草x小幸运【赠·清水寒冰】</a></p>
<p><a href="https://www.bilibili.com/video/av3191720" target="_blank" rel="noopener">文聪三草《爱转角》【喵喵喵？】</a></p>
<h3 id="mc剪辑-9">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av13892551" target="_blank" rel="noopener">七夕情人节特别公演_《狼与自尊》【W大只萝莉太可爱了】</a></p>
<p><a href="https://www.bilibili.com/video/av12682817" target="_blank" rel="noopener">孙歆文x王晓佳《右肩》练习室版</a></p>
<p><a href="https://www.bilibili.com/video/av12680985" target="_blank" rel="noopener">孙歆文x王晓佳《梅洛斯之路》练习室版</a></p>
<p><a href="https://www.bilibili.com/video/av10093402" target="_blank" rel="noopener">孙歆文x王晓佳《人鱼》《夜蝶》练习室版</a></p>
<p><a href="https://www.bilibili.com/video/av12683931" target="_blank" rel="noopener">孙歆文x王晓佳《虫之诗》练习室版</a></p>
<p><a href="https://www.bilibili.com/video/av15707788" target="_blank" rel="noopener">文草夜蝶（天草姐姐位）</a></p>
<p><a href="https://www.bilibili.com/video/av8639751" target="_blank" rel="noopener">文草-塞纳河普通邻居的隔墙互怼</a></p>
<p><a href="https://www.bilibili.com/video/av9260167" target="_blank" rel="noopener">文草-你嘴瓢我刻薄的普通邻居</a></p>
<p><a href="https://www.bilibili.com/video/av11005942" target="_blank" rel="noopener">文草电台-我们队的关系就是这么的表面！</a></p>
<p><a href="https://www.bilibili.com/video/av10217739" target="_blank" rel="noopener">文草直播-自带BGM讲相声的普通邻居</a></p>
<p><a href="https://www.bilibili.com/video/av11047063" target="_blank" rel="noopener">文草-不存在的表面cp的表面生祝【主页罢工了，这么多直播剪辑，你们自己去小报亭看吧】</a></p>
<p><a href="https://www.bilibili.com/video/av12500167" target="_blank" rel="noopener">文草直播-总有一个普通邻居能欣赏你的美颜【但是主页还是很喜欢新闻天草，继续粘贴吧】</a></p>
<p><a href="https://www.bilibili.com/video/av10894965" target="_blank" rel="noopener">文草直播-我的邻居我的窗帘和我的狗</a></p>
<p><a href="https://www.bilibili.com/video/av10848783" target="_blank" rel="noopener">《穿了小裙子的新闻》</a></p>
<h2 id="草沐---笨草戆沐节操毁灭机">草沐 - 笨草戆沐，节操毁灭机</h2>
<h3 id="mv-7">MV</h3>
<p><a href="https://www.bilibili.com/video/av9561491" target="_blank" rel="noopener">SNH48：糖（王晓佳、林忆宁、张嘉予）</a></p>
<p><a href="https://www.bilibili.com/video/av10561509" target="_blank" rel="noopener">monster~（王晓佳、张嘉予、杨冰怡、孙歆文）</a></p>
<p><a href="https://www.bilibili.com/video/av12254743" target="_blank" rel="noopener">本草纲沐？草沐皆兵【人鱼】</a></p>
<p><a href="https://www.bilibili.com/video/av12284422" target="_blank" rel="noopener">《剧场在召唤（剧场练习版）》第一套全国塞纳河打尻体操</a></p>
<h3 id="mc剪辑-10">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av15201770" target="_blank" rel="noopener">草沐的哲学时间【皮王什么鬼？？】</a></p>
<p><a href="https://www.bilibili.com/video/av14426339" target="_blank" rel="noopener">【王晓佳 张嘉予】两位萌妹子带你玩LOL</a></p>
<p><a href="https://www.bilibili.com/video/av14418922" target="_blank" rel="noopener">Team X 打脸机是什么鬼… 王晓佳张嘉予</a></p>
<p><a href="https://www.bilibili.com/video/av13351940" target="_blank" rel="noopener">Team X 王晓佳外出直播和张嘉予</a></p>
<p><a href="https://www.bilibili.com/video/av6556840" target="_blank" rel="noopener">《和沐沐一起吃喝唱+玩守望PG》王晓佳口袋</a></p>
<p><a href="https://www.bilibili.com/video/av12614587" target="_blank" rel="noopener">《试着做蓝色可乐鸡翅》王晓佳口袋</a></p>
<p><a href="https://www.bilibili.com/video/av12063615" target="_blank" rel="noopener">《找到了炒冰激凌》王晓佳口袋</a></p>
<p><a href="https://www.bilibili.com/video/av11267222" target="_blank" rel="noopener">《在沐沐宿舍做蛋挞！》王晓佳口袋</a></p>
<p><a href="https://www.bilibili.com/video/av15168885" target="_blank" rel="noopener">皮皮草皮皮沐—双皮偶像的趣味”打脸“比赛</a></p>
<h2 id="冉聪---两小无猜我的软弱只有你能懂">冉聪 - 两小无猜，我的软弱只有你能懂</h2>
<h3 id="mv-8">MV</h3>
<p><a href="https://www.bilibili.com/video/av9123894" target="_blank" rel="noopener">【聪冉】一笑倾城</a></p>
<p><a href="https://www.bilibili.com/video/av5186967" target="_blank" rel="noopener">【聪冉】爱情闯进门</a></p>
<p><a href="https://www.bilibili.com/video/av12930409" target="_blank" rel="noopener">【聪冉】狐狸精</a></p>
<p><a href="https://www.bilibili.com/video/av6068287" target="_blank" rel="noopener">SNH48邵雪聪宋昕冉任性的流星合体发穿越千年的糖X160828</a></p>
<h3 id="mc剪辑-11">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av4399479" target="_blank" rel="noopener">邵雪聪X宋昕冉《夜蝶》</a></p>
<p><a href="https://www.bilibili.com/video/av6105710" target="_blank" rel="noopener">邵雪聪 宋昕冉《任性的流星》20160828</a></p>
<p><a href="https://www.bilibili.com/video/av6205546" target="_blank" rel="noopener">20160710 X队宋昕冉生日表演 邵雪聪</a></p>
<p><a href="https://www.bilibili.com/video/av9220478" target="_blank" rel="noopener">170317TeamX 聪冉澳洲同住 被扯被子无奈相拥入眠</a></p>
<p><a href="https://www.bilibili.com/video/av4495507" target="_blank" rel="noopener">SNH48《报告粉丝》第一期回顾：邵雪聪，宋昕冉分享三亚组拍摄花絮</a></p>
<p><a href="https://www.bilibili.com/video/av5079401" target="_blank" rel="noopener">160624《一直播》SNH48邵雪聪 宋昕冉</a></p>
<p><a href="https://www.bilibili.com/video/av9137842" target="_blank" rel="noopener">《边拍摄边逛悉尼》邵雪聪口袋48直播</a></p>
<p><a href="https://www.bilibili.com/video/av7755210" target="_blank" rel="noopener">【SNH48】《澳门外务和冉冉一起住哟。》</a></p>
<p><a href="https://www.bilibili.com/video/av4368472" target="_blank" rel="noopener">20151018 X队MC1谁是大力士片段 宋昕冉背邵雪聪</a></p>
<p><a href="https://www.bilibili.com/video/av4681144" target="_blank" rel="noopener">聪冉花式秀恩爱</a></p>
<p><a href="https://www.bilibili.com/video/av6482208" target="_blank" rel="noopener">20160828 SNH48 X队邵雪聪生日公演庆祝部分</a></p>
<h2 id="冉聪静---第三年的见异思迁">冉聪静 - 第三年的见异思迁</h2>
<h3 id="mv-9">MV</h3>
<p><a href="https://www.bilibili.com/video/av9403764" target="_blank" rel="noopener">【祁静×宋昕冉】该死的懦弱</a></p>
<p><a href="https://www.bilibili.com/video/av12892971" target="_blank" rel="noopener">【祁静×邵雪聪】珊瑚海</a></p>
<h3 id="mc剪辑-12">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av8901009" target="_blank" rel="noopener">狼与自尊【祁静X宋昕冉】</a></p>
<p><a href="https://www.bilibili.com/video/av12558662" target="_blank" rel="noopener">Cat And Mouse【宋昕冉X祁静 杨冰怡】</a></p>
<p><a href="https://www.bilibili.com/video/av7751910" target="_blank" rel="noopener">20161210 X队MC剪辑 静静插足聪冉</a></p>
<p><a href="https://www.bilibili.com/video/av7471305" target="_blank" rel="noopener">宋昕冉拒绝痴汉祁静</a></p>
<p><a href="https://www.bilibili.com/video/av7751910" target="_blank" rel="noopener">静静插足聪冉</a></p>
<p><a href="https://www.bilibili.com/video/av15499601" target="_blank" rel="noopener">祁冉冉【OLD48】</a></p>
<p><a href="https://www.bilibili.com/video/av13252063" target="_blank" rel="noopener">口嫌体正直的冉冉【OLD48】</a></p>
<h2 id="文聪---x队安定室友情-夜蝶一年真有爱">文聪 - X队安定室友情 夜蝶一年真有爱</h2>
<h3 id="mv-10">MV</h3>
<p><a href="https://www.bilibili.com/video/av14194975" target="_blank" rel="noopener">【文聪】如果的事（孙歆文X邵雪聪）</a></p>
<h3 id="mc剪辑-13">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av5116809" target="_blank" rel="noopener">【邵雪聪&amp;孙歆文】SNH48 TeamX《夜蝶》室友爱 合集</a></p>
<p><a href="https://www.bilibili.com/video/av4340675" target="_blank" rel="noopener">20150823 《爱喔爱》等舞蹈表演－SNH48邵雪聪 孙歆文</a></p>
<p><a href="https://www.bilibili.com/video/av6024989" target="_blank" rel="noopener">小映助学映客直播 邵雪聪 孙歆文 20160826</a></p>
<h2 id="纯静---甜甜蜜蜜小醋王-晒晒直播噗噗养">纯静 - 甜甜蜜蜜小醋王 晒晒直播噗噗养</h2>
<h3 id="mv-11">MV</h3>
<p><a href="https://www.bilibili.com/video/av13503616" target="_blank" rel="noopener">【纯静】浮生未歇 姚祎纯X祁静</a></p>
<p><a href="https://www.bilibili.com/video/av13192005" target="_blank" rel="noopener">【2017静静生日公演】【搞静静】渣静的修罗现场(欢乐误解向）</a></p>
<p><a href="https://www.bilibili.com/video/av13030314" target="_blank" rel="noopener">【2017静静生日公演】一个人的寂寞，两个人的错，三个人的友谊使我困惑</a></p>
<p><a href="https://www.bilibili.com/video/av13035908" target="_blank" rel="noopener">【2017静静生日公演】生日公演秒变修罗场！那么到底选纯静还是祁吕呢！</a></p>
<p><a href="https://www.bilibili.com/video/av13233182" target="_blank" rel="noopener">【2017静静生日公演】红玫瑰</a></p>
<p><a href="https://www.bilibili.com/video/av15197500" target="_blank" rel="noopener">【2017静静生日公演】情歌</a></p>
<p><a href="https://www.bilibili.com/video/av12521297" target="_blank" rel="noopener">【糖还是刀片】祁吕，甜到忧伤！纯静，扎到心伤！</a></p>
<h3 id="mc剪辑-14">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av10582239" target="_blank" rel="noopener">170514 纯静《人鱼》</a></p>
<p><a href="https://www.bilibili.com/video/av8896800" target="_blank" rel="noopener">20170121 辞旧迎新公演 《流着泪微笑》 祁静and姚祎纯</a></p>
<p><a href="https://www.bilibili.com/video/av9561972" target="_blank" rel="noopener">《黑天鹅》（陈琳、冯晓菲、祁静、姚祎纯）</a></p>
<p><a href="https://www.bilibili.com/video/av12220421" target="_blank" rel="noopener">潘燕琦 祁静 姚祎纯《谢谢你的温柔》</a></p>
<p><a href="https://www.bilibili.com/video/av12221572" target="_blank" rel="noopener">潘燕琦 祁静 姚祎纯《super star》</a></p>
<p><a href="https://www.bilibili.com/video/av8897426" target="_blank" rel="noopener">2017跨年特别公演 《好想你》 祁静and姚祎纯</a></p>
<p><a href="https://www.bilibili.com/video/av10582499" target="_blank" rel="noopener">【SNH48】170514 纯静 《我的秘密》 祁静 姚祎纯</a></p>
<p><a href="https://www.bilibili.com/video/av10556204" target="_blank" rel="noopener">170514TeamX 姚祎纯生日个人表演</a></p>
<p><a href="https://www.bilibili.com/video/av12870389" target="_blank" rel="noopener">【SNH48】纯静直播二三事</a></p>
<p><a href="https://www.bilibili.com/video/av7827580" target="_blank" rel="noopener">《祁静与纯纯互怼时间》1vs1</a></p>
<p><a href="https://www.bilibili.com/video/av14268391" target="_blank" rel="noopener">【2017静静生日公演】祁吕纯修罗场【OLD48】</a></p>
<p><a href="https://www.bilibili.com/video/av10709263" target="_blank" rel="noopener">170520 祁静 姚祎纯 直播 小仙女游乐园约会 居然还去了鬼屋~</a></p>
<p><a href="https://www.bilibili.com/video/av6959682" target="_blank" rel="noopener">塞纳河畔夜谈vol.73：祁静 姚祎纯 张丹三</a></p>
<p><a href="https://www.bilibili.com/video/av9350993" target="_blank" rel="noopener">《突然直播》祁静+姚祎纯</a></p>
<p><a href="https://www.bilibili.com/video/av11449101" target="_blank" rel="noopener">《唱歌啦啦啦啦啦》祁静+姚祎纯口袋</a></p>
<p><a href="https://www.bilibili.com/video/av10491346" target="_blank" rel="noopener">《社会我莲妹，人恨发不多》祁洁莲(祁静)口袋</a></p>
<p><a href="https://www.bilibili.com/video/av10663264" target="_blank" rel="noopener">170518 祁静 姚祎纯直播 嘿嘿嘿 鹿和兔子的尬聊时间</a></p>
<p><a href="https://www.bilibili.com/video/av8224165" target="_blank" rel="noopener">《好久不聊天了←_←喝了假酒的假静静》祁静口袋</a></p>
<p><a href="https://www.bilibili.com/video/av8896671" target="_blank" rel="noopener">新年祝福 祁静and姚祎纯</a></p>
<p><a href="https://www.bilibili.com/video/av6940834" target="_blank" rel="noopener">20161102 祁静口袋 静静纯纯唱歌</a></p>
<h2 id="水蜜桃---你们的初恋不可能这么甜">水蜜桃 - 你们的初恋不可能这么甜</h2>
<h3 id="mv-12">MV</h3>
<p><a href="https://www.bilibili.com/video/av2732830" target="_blank" rel="noopener">你是对的人-水蜜桃</a></p>
<p><a href="https://www.bilibili.com/video/av6431416" target="_blank" rel="noopener">每天回家都会看到我的老婆在装死-水蜜桃</a></p>
<p><a href="https://www.bilibili.com/video/av8305952" target="_blank" rel="noopener">岁月神偷-水蜜桃</a></p>
<p><a href="https://www.bilibili.com/video/av9372142" target="_blank" rel="noopener">【杨冰怡x李钊】337水蜜桃的A Little Story</a></p>
<p><a href="https://www.bilibili.com/video/av6027798" target="_blank" rel="noopener">【甜过初恋的水蜜桃】唉哟~烦不烦 这样的甜蜜还看不出来</a></p>
<h3 id="mc剪辑-15">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av6987992" target="_blank" rel="noopener">中秋特别公演unit《青涩的香蕉》</a></p>
<p><a href="https://www.bilibili.com/video/av9558626" target="_blank" rel="noopener">水蜜桃室友组【她和她】</a></p>
<p><a href="https://www.bilibili.com/video/av8361703" target="_blank" rel="noopener">三个人的友谊使我困惑~ （杨冰怡、汪束、李钊）</a></p>
<p><a href="https://www.bilibili.com/video/av8794772" target="_blank" rel="noopener">《今天也是小可爱：水蜜桃闲聊》杨冰怡口袋</a></p>
<p><a href="https://www.bilibili.com/video/av11473724" target="_blank" rel="noopener">《哟～晚上好w今天是水蜜桃小公主》杨冰怡+李钊口袋</a></p>
<p><a href="https://www.bilibili.com/video/av7743341" target="_blank" rel="noopener">《年末了，水蜜桃对谈》杨冰怡口袋</a></p>
<p><a href="https://www.bilibili.com/video/av13234520" target="_blank" rel="noopener">李钊生日公演水水念信CUT</a></p>
<p><a href="https://www.bilibili.com/video/av3304117" target="_blank" rel="noopener">杨冰怡 李钊 杨韫玉 汪束 搞笑模仿<东北玩泥巴></东北玩泥巴></a></p>
<p><a href="https://www.bilibili.com/video/av5127294" target="_blank" rel="noopener">160628《一直播》SNH48李钊 杨冰怡</a></p>
<p><a href="https://www.bilibili.com/video/av4972408" target="_blank" rel="noopener">giligili eye 20160614 SNH48 杨冰怡和李钊玩音响 还敲大闪</a></p>
<p><a href="https://www.bilibili.com/video/av6409586" target="_blank" rel="noopener">《和李钊一起密室逃脱》杨冰怡口袋</a></p>
<p><a href="https://www.bilibili.com/video/av4781008" target="_blank" rel="noopener">SNH48杨冰怡-李钊不让我发我偏要发</a></p>
<h2 id="桃束---大概是直男直女的惺惺相惜吧">桃束 - 大概是直男直女的惺惺相惜吧</h2>
<h3 id="mc剪辑-16">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av9110542" target="_blank" rel="noopener">《狼与自尊》 170311 白色情人节特别公演</a></p>
<p><a href="https://www.bilibili.com/video/av13341517" target="_blank" rel="noopener">《天使的圈套》170812 汪束生日公演</a></p>
<p><a href="https://www.bilibili.com/video/av12023247" target="_blank" rel="noopener">《心电心》李钊生日环节特殊表演</a></p>
<p><a href="https://www.bilibili.com/video/av12022953" target="_blank" rel="noopener">束宝宝最爱的桃宝宝生日快乐！桃束大法好！</a></p>
<p><a href="https://www.bilibili.com/video/av7494464" target="_blank" rel="noopener">20161210 汪束口袋直播 桃束休闲时间</a></p>
<p><a href="https://www.bilibili.com/video/av9110416" target="_blank" rel="noopener">游戏环节 170311 白色情人节特别公演</a></p>
<p><a href="https://www.bilibili.com/video/av12029601" target="_blank" rel="noopener">李钊生日公演 念信环节 170708</a></p>
<p><a href="https://www.bilibili.com/video/av7499176" target="_blank" rel="noopener">《和桃宝宝约会一起吃烤羊腿》汪束口袋</a></p>
<p><a href="https://www.bilibili.com/video/av7360796" target="_blank" rel="noopener">桃：“王叔叔一般都是男主角”叔：“对对对”嗯？</a></p>
<h2 id="头晶---被妈妈认可的那个">头晶 - 被妈妈认可的那个</h2>
<h3 id="mc剪辑-17">MC剪辑</h3>
<p><a href="https://www.bilibili.com/video/av14772903" target="_blank" rel="noopener">我才是被家长认可的那个【OLD48】</a></p>
<h2 id="彩蛋---顺路看到的一些有趣视频和邪教">彩蛋 - 顺路看到的一些有趣视频和邪教。。</h2>
<p><a href="https://www.bilibili.com/video/av4188539" target="_blank" rel="noopener">20150417 《支柱》－SNH48四期生 X队首演</a></p>
<p><a href="https://www.bilibili.com/video/av9938356" target="_blank" rel="noopener">SNH48杨冰怡-MC TeamX“一人我饮酒醉”</a></p>
<p><a href="https://www.bilibili.com/video/av2724004" target="_blank" rel="noopener">学长教授（天草丹三）《恋人未满》</a></p>
<p><a href="https://www.bilibili.com/video/av11650997" target="_blank" rel="noopener">【钱笨】钱蓓婷×谢天依 初吻的故事</a></p>
<blockquote>
<p>顺便安利一下主页做的X队<a href="https://cutelittleturtle.github.io/2014/09/28/ybygongyanquanchang/" target="_blank" rel="noopener">公演补档目录</a></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> SNH48 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> SNH48 </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
